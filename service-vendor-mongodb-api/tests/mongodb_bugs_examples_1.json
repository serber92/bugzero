[
  {
    "title": "[SERVER-EXAMPLE-1] A bug without versions that should be skipped",
    "link": "https://jira.mongodb.org/browse/SERVER-EXAMPLE-1",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p><a href=\"https://github.com/mongodb/mongo/blob/afcb670f36b9cabda26d719c81f3991b9b2ed5b8/src/mongo/db/s/shard_server_catalog_cache_loader.cpp#L253\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">Reads</a> on a collection in the ShardServerCatalogCacheLoader <a href=\"https://github.com/mongodb/mongo/blob/afcb670f36b9cabda26d719c81f3991b9b2ed5b8/src/mongo/db/s/shard_server_catalog_cache_loader.cpp#L397\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">scheduled as part of the call to getChunksSince</a> can conflict with <a href=\"https://github.com/mongodb/mongo/blob/afcb670f36b9cabda26d719c81f3991b9b2ed5b8/src/mongo/db/s/shard_server_catalog_cache_loader.h#L498\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">other tasks</a> scheduled for the same collection, such as <a href=\"https://github.com/mongodb/mongo/blob/afcb670f36b9cabda26d719c81f3991b9b2ed5b8/src/mongo/db/s/shard_server_catalog_cache_loader.cpp#L1000\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">drops</a>. These should either be serialized or the <a href=\"https://github.com/mongodb/mongo/blob/8cbbba49935f632e876037f9f2d9eecc779eb96a/src/mongo/db/s/shard_metadata_util.cpp#L143-L145\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">read</a> should be made to not yield.</p>",
    "environment": "",
    "key": {
      "id": "746362",
      "content": "SERVER-40865"
    },
    "summary": "The ShardServerCatalogCacheLoader does not serialize read operations with other operations for the same collection",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "matthew.saltz",
      "content": "Matthew Saltz"
    },
    "labels": "",
    "created": "Fri, 26 Apr 2019 21:18:24 +0000",
    "updated": "Tue, 21 Sep 2021 07:49:50 +0000",
    "resolved": "Tue, 31 Aug 2021 15:03:10 +0000",
    "version": [
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.4"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "6",
    "comments": {
      "comment": [
        {
          "id": "3912380",
          "author": "ratika.gandhi",
          "created": "Thu, 1 Jul 2021 15:14:09 +0000",
          "content": "<p>flagging this for scheduling because it has 7 BFs depended on it. It would be good to schedule this to be able to close the BFs.Â </p>"
        },
        {
          "id": "4031093",
          "author": "pierlauro.sciarelli",
          "created": "Tue, 31 Aug 2021 12:33:25 +0000",
          "content": "<p>Considering that all the failures are due to <tt>QueryPlanKilled</tt> exceptions, going to implement a solution that simply adds this error to the <a href=\"https://github.com/mongodb/mongo/blob/c96a409f1b61384d9ca5c464e9ec55b05f6507d5/src/mongo/s/catalog_cache.cpp#L264-L286\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">ones retried by the catalog cache</a> rather than introducing additional complexity: it's only needed an additional retry of the read to \"see\" eventual changes since drop is not yielding. This will also allow quick backports.</p>"
        },
        {
          "id": "4031507",
          "author": "xgen-internal-githook",
          "created": "Tue, 31 Aug 2021 14:50:39 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-40865\" title=\"The ShardServerCatalogCacheLoader does not serialize read operations with other operations for the same collection\" class=\"issue-link\" data-issue-key=\"SERVER-40865\"><del>SERVER-40865</del></a> Retry QueryPlanKilled errors in the catalog cache<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/a9c17e84f57070ab1021013ba9ca02a74c7c771e\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/a9c17e84f57070ab1021013ba9ca02a74c7c771e</a></p>"
        },
        {
          "id": "4072858",
          "author": "xgen-internal-githook",
          "created": "Mon, 20 Sep 2021 21:32:34 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-40865\" title=\"The ShardServerCatalogCacheLoader does not serialize read operations with other operations for the same collection\" class=\"issue-link\" data-issue-key=\"SERVER-40865\"><del>SERVER-40865</del></a> Retry QueryPlanKilled errors in the catalog cache<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/5387de8c4fbe580bbb7bc246796a7491e9372e70\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/5387de8c4fbe580bbb7bc246796a7491e9372e70</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "4.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21777",
                "content": "v5.0"
              },
              {
                "key": "18953",
                "content": "v4.4"
              },
              {
                "key": "16775",
                "content": "v4.2"
              },
              {
                "key": "15640",
                "content": "v4.0"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 1 Jul 2021 15:14:09 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-2011"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "140.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "matthew.saltz",
              "pierlauro.sciarelli",
              "ratika.gandhi"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|huvu6f:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "0|i3irnb:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5180",
              "content": "Sharding EMEA 2021-09-06"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|huvgfr:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-51806] bulk key insertion phase of index build holds IX lock without yielding",
    "link": "https://jira.mongodb.org/browse/SERVER-51806",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The key insertion phase of a hybrid index build seems to hold and not yield an IX (w) lock. Any single command with an S (R) lock can block all operations during that time. In this case the offending command seems to be the read-only profile command (<tt>profile: -1</tt>)</p>\n\n<h6><a name=\"originaldescription\"></a>original description</h6>\n\n<p>hello:<br/>\n my mongo cluster is 4.2.8 with six data node.today i create index with follow command:</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">db.monitorIn.createIndex({ org: 1.0, et: 1.0, pbOrg: 1.0 });\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p> index from 2020/10/22 09:58,to 10:30,all write is slow 10 times than before.it is :</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Database: { acquireCount: { w: 3 }, acquireWaitCount: { w: 1 }, timeAcquiringMicros: { w: 3908088 } }.run in Index Build: inserting keys from </span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">external sorter into index mode,\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>all write is blocking.</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:09.819+0800 I  INDEX    [conn997955] index build: inserted 439497660 keys from external sorter into index in 319 seconds.\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>all write is blocked time :319 </p>\n\n<p>from 2020-10-22T12:28:update time is 288831.</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.853+0800 I  WRITE    [conn1004545] update expMonitordb.expInfos appName: \"monitor_in_out\" command: { q: { _id: \"YT4873152410671\", $or: [ { curT: { $exists: false } }, { curT: { $lt: new Date(1603336989000) } } ] }, u: { $set: { curT: new Date(1603336989000), currentOrg: \"454001\", currentOp: 131 } }, multi: false, upsert: false } planSummary: IXSCAN { _id: 1 } keysExamined:1 docsExamined:1 nMatched:1 nModified:1 numYields:0 queryHash:DE51A53B planCacheKey:2FB486A3 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 2 } }, ReplicationStateTransition: { acquireCount: { w: 2 } }, Global: { acquireCount: { w: 2 } }, Database: { acquireCount: { w: 2 }, acquireWaitCount: { w: 1 }, timeAcquiringMicros: { w: 288830662 } }, Collection: { acquireCount: { w: 2 } }, Mutex: { acquireCount: { r: 5 } } } flowControl:{ acquireCount: 1, timeAcquiringMicros: 1 } storage:{} 288831ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>",
    "environment": "",
    "key": {
      "id": "1522303",
      "content": "SERVER-51806"
    },
    "summary": "bulk key insertion phase of index build holds IX lock without yielding",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "yuhong.zhang",
      "content": "Yuhong Zhang"
    },
    "reporter": {
      "username": "601290552@qq.com",
      "content": "jing xu"
    },
    "labels": "",
    "created": "Thu, 22 Oct 2020 09:24:28 +0000",
    "updated": "Fri, 24 Sep 2021 03:56:49 +0000",
    "resolved": "Thu, 5 Aug 2021 13:54:25 +0000",
    "version": [
      "4.2.0",
      "4.4.0"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.4"
    ],
    "component": "Index Maintenance",
    "votes": "0",
    "watches": "22",
    "comments": {
      "comment": [
        {
          "id": "3458740",
          "author": "601290552@qq.com",
          "created": "Thu, 22 Oct 2020 09:27:32 +0000",
          "content": "<p>create index from 2020/10/22 09:58:00 to 2020/10/22 12:28:00.<br/>\nbut from 10:30 to 12:30.connections from 150 to 1000.so it effect system.<br/>\n4.2 create index is online,why blocking write for Index Build: inserting keys from external sorter into index mode and other time update is slow 10 times from   normal time?<br/>\nso create index has two problems:<br/>\none problem is :create index is running,but .create index execute more than 30 minutes,so <br/>\ndatabase begin to deal with update slowly, more than 10 times on begin to create index or before create index.<br/>\ntwo problem is:Index Build: inserting keys from external sorter into index,so that database is blocking all request.</p>\n\n<p>from 10:32: normal update is 155ms,after update is 3909ms,so it spends time on timeAcquiringMicros: </p>\n{ w: 3908088 }\n<p>. </p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T10:32:19.127+0800 I  COMMAND  [conn999225] command expMonitordb.$cmd appName: \"monitor_in_out\" command: update { update: \"monitorOut\", bypassDocumentValidation: false, ordered: true, stmtIds: [ 0 ], updates: [ { q: { org: \"571038\", ct: new Date(1602241845000), no: \"YT2092258602172\" }, u: { $set: { curCode: 131, curEmp: \"00754344\", curOrg: \"571901\", curT: new Date(1603333798000), preOrg: \"571901\", nextOrg: \"571038\", st: new Date(1603333938954), status: 4, ioType: \"01\" } }, multi: false, upsert: true } ], runtimeConstants: { localNow: new Date(1603333938972), clusterTime: Timestamp(1603333938, 4789) }, shardVersion: [ Timestamp(21262, 9), ObjectId('5f0ee7bb9a174cbcccb36243') ], allowImplicitCollectionCreation: false, lsid: { id: UUID(\"09afed15-ad59-4bf8-939d-ecea3d219183\"), uid: BinData(0, F26770D132634AFD9C12F0330423A9A86C8757FAA1BC0F272877335651AAEA5A) }, txnNumber: 1947281, $clusterTime: { clusterTime: Timestamp(1603333938, 4789), signature: { hash: BinData(0, 83C0AA143F1BE5725E52C85B2425E2DD8C438C87), keyId: 6844800181754396704 } }, $audit: { $impersonatedUsers: [ { user: \"lhexp\", db: \"expMonitordb\" } ], $impersonatedRoles: [ { role: \"readWrite\", db: \"expMonitordb\" } ] }, $client: { driver: { name: \"mongo-java-driver|sync\", version: \"4.0.5\" }, os: { type: \"Linux\", name: \"Linux\", architecture: \"amd64\", version: \"3.10.0-693.21.1.el7.x86_64\" }, platform: \"Java/Oracle Corporation/1.8.0_172-b11\", application: { name: \"monitor_in_out\" }, mongos: { host: \"srvdb10.yto.cloud:21051\", client: \"10.7.53.133:45306\", version: \"4.2.8\" } }, $configServerState: { opTime: { ts: Timestamp(1603333938, 2583), t: 1 } }, $db: \"expMonitordb\" } numYields:1 reslen:426 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 5 } }, ReplicationStateTransition: { acquireCount: { w: 6 } }, Global: { acquireCount: { r: 1, w: 4 } }, Database: { acquireCount: { w: 4 } }, Collection: { acquireCount: { w: 4 } }, Metadata: { acquireCount: { W: 1 } }, Mutex: { acquireCount: { r: 8 } } } flowControl:{ acquireCount: 2 } storage:{} protocol:op_msg 155ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T10:32:23.462+0800 I  COMMAND  [conn999198] command expMonitordb.$cmd appName: \"monitor_in_out\" command: update { update: \"monitorOut\", bypassDocumentValidation: false, ordered: true, stmtIds: [ 0 ], updates: [ { q: { org: \"538001\", ct: new Date(1603189414000), no: \"YT4873213854502\" }, u: { $set: { curCode: 171, curEmp: \"01927198\", curOrg: \"280001\", curT: new Date(1603333774000), preOrg: null, nextOrg: \"\", st: new Date(1603333939119), status: 4, ioType: \"01\" } }, multi: false, upsert: true } ], runtimeConstants: { localNow: new Date(1603333939137), clusterTime: Timestamp(1603333939, 1195) }, shardVersion: [ Timestamp(21262, 9), ObjectId('5f0ee7bb9a174cbcccb36243') ], allowImplicitCollectionCreation: false, lsid: { id: UUID(\"1a38e17f-5d87-4734-9246-f1a57fc16c30\"), uid: BinData(0, F26770D132634AFD9C12F0330423A9A86C8757FAA1BC0F272877335651AAEA5A) }, txnNumber: 2029302, $clusterTime: { clusterTime: Timestamp(1603333939, 1195), signature: { hash: BinData(0, 747EE21466E6E579EB645F8D0541FBB587FB5D14), keyId: 6844800181754396704 } }, $audit: { $impersonatedUsers: [ { user: \"lhexp\", db: \"expMonitordb\" } ], $impersonatedRoles: [ { role: \"readWrite\", db: \"expMonitordb\" } ] }, $client: { driver: { name: \"mongo-java-driver|sync\", version: \"4.0.5\" }, os: { type: \"Linux\", name: \"Linux\", architecture: \"amd64\", version: \"3.10.0-693.21.1.el7.x86_64\" }, platform: \"Java/Oracle Corporation/1.8.0_172-b11\", application: { name: \"monitor_in_out\" }, mongos: { host: \"srvdb10.yto.cloud:21051\", client: \"10.7.53.132:58114\", version: \"4.2.8\" } }, $configServerState: { opTime: { ts: Timestamp(1603333938, 2583), t: 1 } }, $db: \"expMonitordb\" } numYields:0 reslen:426 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 4 } }, ReplicationStateTransition: { acquireCount: { w: 5 } }, Global: { acquireCount: { r: 1, w: 3 } },           Database: { acquireCount: { w: 3 }, acquireWaitCount: { w: 1 }, timeAcquiringMicros: { w: 3908088 } }, Collection: { acquireCount: { w: 3 } }, Metadata: { acquireCount: { W: 1 }, acquireWaitCount: { W: 1 }, timeAcquiringMicros: { W: 34 } }, Mutex: { acquireCount: { r: 8 } } } flowControl:{ acquireCount: 1 } storage:{} protocol:op_msg 3909ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>"
        },
        {
          "id": "3458912",
          "author": "601290552@qq.com",
          "created": "Thu, 22 Oct 2020 12:43:51 +0000",
          "content": "<p>i will upload shard1  primary log including:mongo slow log and diag log.<br/>\n<del>rw</del>------ 1 mongo mongo 10410467 Oct 22 08:17 metrics.2020-10-21T19-47-05Z-00000<br/>\n<del>rw</del>------ 1 mongo mongo 10489382 Oct 22 12:31 metrics.2020-10-22T00-17-05Z-00000<br/>\n<del>rw</del>------ 1 mongo mongo 10472702 Oct 22 16:31 metrics.2020-10-22T04-31-37Z-00000<br/>\n<del>rw</del>------ 1 mongo mongo 10336305 Oct 22 20:31 metrics.2020-10-22T08-31-42Z-00000<br/>\n<del>rw</del>------ 1 mongo mongo   872577 Oct 22 20:51 metrics.2020-10-22T12-31-43Z-00000</p>"
        },
        {
          "id": "3462402",
          "author": "601290552@qq.com",
          "created": "Sun, 25 Oct 2020 01:02:10 +0000",
          "content": "<p>hello:<br/>\n   please help me deal with it.need to other diag log?if too long time,some diag log would be lost.tks. </p>"
        },
        {
          "id": "3464008",
          "author": "601290552@qq.com",
          "created": "Mon, 26 Oct 2020 22:46:09 +0000",
          "content": "<p>1ãplease help me analyze metrics from 2020-10-22 08:00:00+08:00 to 16:00:00+08:00,because the problem begin at 2020-10-22 10:30:00+08:00,index create time is 2020-10-22 09:58:00+08:00,the issue stop time is 2020-10-22 14:00:00+08:00.analyze metrics,  it would include connections and flowcontrol metrics?</p>\n\n<p>2ãplease help analyze how and why  create index influence db performance about response time  and final blocking all write?</p>"
        },
        {
          "id": "3464021",
          "author": "eric.sedor",
          "created": "Mon, 26 Oct 2020 23:07:14 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=601290552%40qq.com\" class=\"user-hover\" rel=\"601290552@qq.com\">jing xu</a> we are investigating and apologize for the delay.</p>"
        },
        {
          "id": "3464086",
          "author": "601290552@qq.com",
          "created": "Tue, 27 Oct 2020 00:44:30 +0000",
          "content": "<p>hi Eric Sedor:<br/>\n  thank you very much. i am waiting for it</p>"
        },
        {
          "id": "3470501",
          "author": "601290552@qq.com",
          "created": "Sat, 31 Oct 2020 08:19:47 +0000",
          "content": "<p>hi Eric:<br/>\n   What is the current progressï¼</p>\n\n\n\n"
        },
        {
          "id": "3474756",
          "author": "eric.sedor",
          "created": "Tue, 3 Nov 2020 22:27:54 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=601290552%40qq.com\" class=\"user-hover\" rel=\"601290552@qq.com\">jing xu</a>, thanks for your patience so far. I've compiled my observations but have not identified a clear cause yet.</p>\n\n<p>From the diagnostic data we see queueing from 2020-10-22T12:23:19.232Z+0800 to 2020-10-22T12:28:10.906+0800. This occurs during the bulk key insertion for a 2.5 hour index build on the expMonitordb.monitorIn collection, but does not coincide directly with that bulk key insertion. The queuing most closely coincides with a 291318ms update to the expMonitordb.monitorIn collection, which is blocked acquiring the Database.timeAcquiringMicros.w lock for almost all of its execution time. It's not yet clear what the blocking operation was.</p>\n\n<p>A few notes:</p>\n\n<ul>\n\t<li>The \"Detected blocked worker threads, starting new thread to unblock service executor\" log line occurs many times in the provided logs, oftentimes multiple times a minute. The first and last line are noted in the timeline.</li>\n</ul>\n\n\n<ul>\n\t<li>createIndex for lastUse:1 in system.sessions is logged twice during the provided logs, and multiple other createIndex commands are reported in diagnostic data. One of those commands runs long during the period of queueing and is noted in the timeline below.</li>\n</ul>\n\n\n<p>The timeline:</p>\n\n<p> <span class=\"image-wrap\" style=\"\"><img src=\"https://jira.mongodb.org/secure/attachment/285608/285608_Screen+Shot+2020-11-03+at+2.27.31+PM.png\" width=\"100%\" style=\"border: 0px solid black\" /></span> </p>\n\n<ul>\n\t<li>2020-10-22T09:58:11.342+0800 - (Not pictured) Index build on expMonitordb.monitorIn ( \n{ org: 1.0, et: 1.0, pbOrg: 1.0 }\n<p> ) begins</p></li>\n</ul>\n\n\n<ul>\n\t<li>2020-10-22T10:04:20.249+080 - (Not pictured) The first \"Detected blocked worker threads\" line in the provided logs</li>\n</ul>\n\n\n<ul>\n\t<li>2020-10-22T12:22:53.020+0800 - (A) bulk key inserts for the expMonitordb.monitorIn ( {{{ org: 1.0, et: 1.0, pbOrg: 1.0 }}}) index begin</li>\n</ul>\n\n\n<ul>\n\t<li>2020-10-22T12:23:19.232Z+0800 - (B) Queueing begins, a createIndexes command is reported in diagnostic data (could not correlate with a log entry), the noted long-running (291318ms) update to expMonitordb.monitorIn begins</li>\n</ul>\n\n\n<ul>\n\t<li>2020-10-22T12:25:36.000+0800 - (D) Index build on system.sessions (lastUse:1) begins</li>\n</ul>\n\n\n<ul>\n\t<li>2020-10-22T12:28:10.809+0800- (~E) The last \"Detected blocked worker threads, starting new thread to unblock service executor\" for a while</li>\n</ul>\n\n\n<ul>\n\t<li>2020-10-22T12:28:10.890+0800 - (E) Index build on system.sessions (lastUse:1) completes after 154678ms.</li>\n</ul>\n\n\n<ul>\n\t<li>2020-10-22T12:28:10.906+0800 - (F) An update to expMonitordb.monitorIn completes after 291318ms (with Database.timeAcquiringMicros.w: 291264650), queues resolve</li>\n</ul>\n\n\n<ul>\n\t<li>2020-10-22T12:28:51.133+0800 - (G) Index build on expMonitordb.monitorIn ( {{{ org: 1.0, et: 1.0, pbOrg: 1.0 }}} ) completes after 9039886ms. At this time, we see the lock acquisition for the collection W lock that the end of the long-running index build should need.</li>\n</ul>\n"
        },
        {
          "id": "3475122",
          "author": "601290552@qq.com",
          "created": "Wed, 4 Nov 2020 06:11:52 +0000",
          "content": "<p>hi:<br/>\n  thank you for very much,but i have some problem for it:<br/>\n1ãfrom 09:58 to 10:30,update slow than before. 2020-10-22T10:04:20.249+080 - (Not pictured) The first \"Detected blocked worker threads\" line in the provided logs,online ddl why blocking?<br/>\n2ãwhy 2020-10-22T12:23:19 to 2020-10-22T12:28:10.906 ,blocking all thread?<br/>\nso it is a bug for online ddl ?</p>\n\n<p>3ãwhy it need so long for Database.timeAcquiringMicros?because online ddl for index?<br/>\nAn update to expMonitordb.monitorIn completes after 291318ms (with Database.timeAcquiringMicros.w: 291264650)</p>\n\n<p>4ãfrom shard1.log about create index:</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T09:58:11.342+0800 I  INDEX    [conn997955] index build: starting on expMonitordb.monitorIn properties: { v: 2, key: { org: 1.0, et: 1.0, pbOrg: 1.0 }, name: \"org_1_et_1_pbOrg_1\", ns: \"expMonitordb.monitorIn\" } using method: Hybrid</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T09:58:11.342+0800 I  INDEX    [conn997955] build may temporarily use up to 200 megabytes of RAM</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:51.133+0800 I  COMMAND  [conn997955] command expMonitordb.monitorIn appName: \"MongoDB Shell\" command: createIndexes { createIndexes: \"monitorIn\", indexes: [ { key: { org: 1.0, et: 1.0, pbOrg: 1.0 }, name: \"org_1_et_1_pbOrg_1\" } ], allowImplicitCollectionCreation: false, lsid: { id: UUID(\"6b1368d9-beec-41c4-ae80-1d751b2c264a\"), uid: BinData(0, 3B408CB48548B5037822C10EB0976B3CBF2CEE3BF9C708796BF03941FBECD80F) }, $clusterTime: { clusterTime: Timestamp(1603331891, 974), signature: { hash: BinData(0, 77EDCB6E8F0CD34729DB9B51B23ED53E36B45D74), keyId: 6844800181754396704 } }, $audit: { $impersonatedUsers: [ { user: \"admin\", db: \"admin\" } ], $impersonatedRoles: [ { role: \"root\", db: \"admin\" } ] }, $client: { application: { name: \"MongoDB Shell\" }, driver: { name: \"MongoDB Internal Client\", version: \"4.2.8\" }, os: { type: \"Linux\", name: \"CentOS Linux release 7.6.1810 (Core) \", architecture: \"x86_64\", version: \"Kernel 3.10.0-957.el7.x86_64\" }, mongos: { host: \"srvdb6.yto.cloud:21051\", client: \"127.0.0.1:57948\", version: \"4.2.8\" } }, $configServerState: { opTime: { ts: Timestamp(1603331890, 3311), t: 1 } }, $db: \"expMonitordb\" } numYields:3447957 reslen:409 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 3447959 } }, ReplicationStateTransition: { acquireCount: { w: 3447960 } }, Global: { acquireCount: { r: 1, w: 3447959 } }, Database: { acquireCount: { r: 1, w: 3447959 }, acquireWaitCount: { w: 136 }, timeAcquiringMicros: { w: 164847 } }, Collection: { acquireCount: { r: 3447959, w: 1, R: 1, W: 2 } }, Mutex: { acquireCount: { r: 4 } } } flowControl:{ acquireCount: 3447958, timeAcquiringMicros: 1215115 } storage:{ data: { bytesRead: 580449277358, bytesWritten: 2598814, timeReadingMicros: 4797651363, timeWritingMicros: 1985 } } protocol:op_msg 9039886ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:51.106+0800 I  INDEX    [conn997955] index build: drain applied 1444434 side writes (inserted: 694530, deleted: 749904) for 'org_1_et_1_pbOrg_1' in 40458 ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>5ãdefault active create index 3. i only create one index<br/>\n    cpp_varname: maxNumActiveUserIndexBuilds<br/>\n    default: 3<br/>\n    validator:<br/>\n      gte: 0</p>"
        },
        {
          "id": "3475176",
          "author": "601290552@qq.com",
          "created": "Wed, 4 Nov 2020 08:32:29 +0000",
          "content": "<p>why mongodb auto create index for system.sessions.another i create index for monitorIn from 09:58.so They are not related,the system begin slow from 10:00,config.$cmd command: createIndexes from 11:23.</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T11:23:35.956+0800 I  COMMAND  [conn1000118] command config.$cmd command: createIndexes { createIndexes: \"system.sessions\", indexes: [ { key: { lastUse: 1 }, name: \"lsidTTLIndex\", expireAfterSeconds: 1800 } ], allowImplicitCollectionCreation: false, $clusterTime: { clusterTime: Timestamp(1603337013, 9), signature: { hash: BinData(0, 4C51EDBABAE3332C5329CA971C5C84D7085BDCBD), keyId: 6844800181754396704 } }, $configServerState: { opTime: { ts: Timestamp(1603337013, 9), t: 1 } }, $db: \"config\" } numYields:0 reslen:412 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 2 } }, ReplicationStateTransition: { acquireCount: { w: 2 } }, Global: { acquireCount: { w: 2 } }, Database: { acquireCount: { w: 2 } }, Collection: { acquireCount: { w: 1 } }, Mutex: { acquireCount: { r: 1 } } } flowControl:{ acquireCount: 1 } protocol:op_msg 1682ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.890+0800 I  COMMAND  [conn1004100] command config.$cmd command: createIndexes { createIndexes: \"system.sessions\", indexes: [ { key: { lastUse: 1 }, name: \"lsidTTLIndex\", expireAfterSeconds: 1800 } ], allowImplicitCollectionCreation: false, $clusterTime: { clusterTime: Timestamp(1603340735, 45), signature: { hash: BinData(0, 391B4D5FFCC8F50FD773E00F8797B52B50C30F8B), keyId: 6844800181754396704 } }, $configServerState: { opTime: { ts: Timestamp(1603340735, 45), t: 1 } }, $db: \"config\" } numYields:0 reslen:412 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 2 } }, ReplicationStateTransition: { acquireCount: { w: 2 } }, Global: { acquireCount: { w: 2 } }, Database: { acquireCount: { w: 2 } }, Collection: { acquireCount: { w: 1 } }, Mutex: { acquireCount: { r: 1 } } } flowControl:{ acquireCount: 1 } protocol:op_msg 154678ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>"
        },
        {
          "id": "3475721",
          "author": "601290552@qq.com",
          "created": "Wed, 4 Nov 2020 15:24:49 +0000",
          "content": "<p>hi:<br/>\nthe complete create index log:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T09:58:11.342+0800 I  INDEX    [conn997955] index build: starting on expMonitordb.monitorIn properties: { v: 2, key: { org: 1.0, et: 1.0, pbOrg: 1.0 }, name: \"org_1_et_1_pbOrg_1\", ns: \"expMonitordb.monitorIn\" } using method: Hybrid</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T09:58:11.342+0800 I  INDEX    [conn997955] build may temporarily use up to 200 megabytes of RAM</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T09:58:14.000+0800 I  -        [conn997955]   Index Build: scanning collection: 444500/438835262 0%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:22:48.001+0800 I  -        [conn997955]   Index Build: scanning collection: 438989200/438794149 100%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:22:50.791+0800 I  INDEX    [conn997955] index build: collection scan done. scanned 439497660 total records in 8679 seconds</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:22:57.001+0800 I  -        [conn997955]   Index Build: inserting keys from external sorter into index: 3930000/439497660 0%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:09.001+0800 I  -        [conn997955]   Index Build: inserting keys from external sorter into index: 438294000/439497660 99%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:09.819+0800 I  INDEX    [conn997955] index build: inserted 439497660 keys from external sorter into index in 319 seconds</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:13.104+0800 I  -        [conn997955]   Index Build: draining writes received during build: 19000/1428254 1%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:49.018+0800 I  -        [conn997955]   Index Build: draining writes received during build: 1309000/1444293 90%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:51.106+0800 I  INDEX    [conn997955] index build: drain applied 1444434 side writes (inserted: 694530, deleted: 749904) for 'org_1_et_1_pbOrg_1' in 40458 ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:51.109+0800 I  INDEX    [conn997955] index build: done building index org_1_et_1_pbOrg_1 on ns expMonitordb.monitorIn</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:51.133+0800 I  COMMAND  [conn997955] command expMonitordb.monitorIn appName: \"MongoDB Shell\" command: createIndexes { createIndexes: \"monitorIn\", indexes: [ { key: { org: 1.0, et: 1.0, pbOrg: 1.0 }, name: \"org_1_et_1_pbOrg_1\" } ], allowImplicitCollectio</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">nCreation: false, lsid: { id: UUID(\"6b1368d9-beec-41c4-ae80-1d751b2c264a\"), uid: BinData(0, 3B408CB48548B5037822C10EB0976B3CBF2CEE3BF9C708796BF03941FBECD80F) }, $clusterTime: { clusterTime: Timestamp(1603331891, 974), signature: { hash: BinData(0, 77EDCB6E8F0CD34729DB9B</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">51B23ED53E36B45D74), keyId: 6844800181754396704 } }, $audit: { $impersonatedUsers: [ { user: \"admin\", db: \"admin\" } ], $impersonatedRoles: [ { role: \"root\", db: \"admin\" } ] }, $client: { application: { name: \"MongoDB Shell\" }, driver: { name: \"MongoDB Internal Client\", </span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">version: \"4.2.8\" }, os: { type: \"Linux\", name: \"CentOS Linux release 7.6.1810 (Core) \", architecture: \"x86_64\", version: \"Kernel 3.10.0-957.el7.x86_64\" }, mongos: { host: \"srvdb6.yto.cloud:21051\", client: \"127.0.0.1:57948\", version: \"4.2.8\" } }, $configServerState: { op</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Time: { ts: Timestamp(1603331890, 3311), t: 1 } }, $db: \"expMonitordb\" } numYields:3447957 reslen:409 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 3447959 } }, ReplicationStateTransition: { acquireCount: { w: 3447960 } }, Global: { acquireCount: { r: 1, w: 3447</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">959 } }, Database: { acquireCount: { r: 1, w: 3447959 }, acquireWaitCount: { w: 136 }, timeAcquiringMicros: { w: 164847 } }, Collection: { acquireCount: { r: 3447959, w: 1, R: 1, W: 2 } }, Mutex: { acquireCount: { r: 4 } } } flowControl:{ acquireCount: 3447958, timeAcqu</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">iringMicros: 1215115 } storage:{ data: { bytesRead: 580449277358, bytesWritten: 2598814, timeReadingMicros: 4797651363, timeWritingMicros: 1985 } } protocol:op_msg 9039886ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>"
        },
        {
          "id": "3498632",
          "author": "eric.sedor",
          "created": "Thu, 19 Nov 2020 22:00:07 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=601290552%40qq.com\" class=\"user-hover\" rel=\"601290552@qq.com\">jing xu</a>,</p>\n\n<p>Thanks for your patience. What we see happening is that a database lock is being taken during the \"key insertion\" phase of the index build, during the period covered by these log lines:</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:22:50.791+0800 I  INDEX    [conn997955] index build: collection scan done. scanned 439497660 total records in 8679 seconds</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:22:57.001+0800 I  -        [conn997955]   Index Build: inserting keys from external sorter into index: 3930000/439497660 0%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:09.001+0800 I  -        [conn997955]   Index Build: inserting keys from external sorter into index: 438294000/439497660 99%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:09.819+0800 I  INDEX    [conn997955] index build: inserted 439497660 keys from external sorter into index in 319 seconds\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>During that time, the database lock is preventing lock acquisition by <tt>profile</tt> commands:</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.853+0800 I  COMMAND  [conn1004028] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340599, 25), signature: { hash: BinData(0, A6629B4A02DAC651DF672778E73312F2EA74749E), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 291292837 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 291293ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.871+0800 I  COMMAND  [conn1004431] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340658, 1), signature: { hash: BinData(0, CA4139178AC1DBD30A3698F87B4ED78A2D9F4A0B), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 231316757 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 231316ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.871+0800 I  COMMAND  [conn1005022] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340778, 1), signature: { hash: BinData(0, 4835199DFC366CF648820EBED7C6FC2F0DDA1E8E), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 111325056 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 111325ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.871+0800 I  COMMAND  [conn1005251] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340839, 26), signature: { hash: BinData(0, C73486F8FB0AF4EF9610EF9E7B35A8EE33BB513C), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 51140763 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 51140ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.872+0800 I  COMMAND  [conn1004828] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340718, 1), signature: { hash: BinData(0, F6E27F35CFCF27C982C9F761224F142F7AE8DC14), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 171096737 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 171097ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>Since these operations require a lock that blocks other operations, all other operations are blocked on these. So you may be able to avoid blocking all updates by avoiding these repeated profile commands (which appear to be noops since they are all setting a profile level of -1).</p>"
        },
        {
          "id": "3499053",
          "author": "601290552@qq.com",
          "created": "Fri, 20 Nov 2020 02:35:47 +0000",
          "content": "<p>Â </p>\n\n<p>hi:</p>\n\n<p>1ãi find</p>\n\n{profile: -1}\n\n<p>to get current settings,this command executed by mongo not meã<br/>\n i see it from doc.<br/>\n profile Changed in version 4.0: The command can be run on mongos with profile level:<br/>\n 0 to set the slowms and sampleRate for the system log; i.e. you cannot enable the profiler on a mongos.<br/>\n -1 to read the current settings.</p>\n\n<p>2ãHow often does this command execute and trigger conditions?</p>\n\n<p>i see 10-22 one day,profile:-1 executed from 00:00 toÂ 21:15:19.</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T00:00:19.597+0800 I  COMMAND  [conn993781] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603296019, 1166), signature: { hash: BinData(0, 356764A28D0C8DED53D9AACA08F951613B387793), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 137497 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 137ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T00:21:19.904+0800 I  COMMAND  [conn993781] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603297279, 1097), signature: { hash: BinData(0, A343F8473F97535F9E994775041E541F1348236D), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 418730 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 419ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T08:21:19.646+0800 I  COMMAND  [conn997203] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603326079, 2984), signature: { hash: BinData(0, A304633A5D5A8DD57FFC89CB5832F87FCEE6F68B), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 118882 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 119ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T10:04:28.325+0800 I  COMMAND  [conn998027] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603332259, 4739), signature: { hash: BinData(0, 08169BF64EE3CDF6CEF359A8733914D5E3C02152), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 8781646 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 8782ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T10:07:27.047+0800 I  COMMAND  [conn998206] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603332439, 1637), signature: { hash: BinData(0, DACFB13DB9C13F162AED8F039B25DFEAEB48FFA0), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 7516195 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 7517ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T10:08:19.761+0800 I  COMMAND  [conn998027] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603332499, 5149), signature: { hash: BinData(0, 487103B37E43D1763B1ED8AE26643CD3ECDD6872), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 110318 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 110ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.871+0800 I  COMMAND  [conn1005022] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340778, 1), signature: { hash: BinData(0, 4835199DFC366CF648820EBED7C6FC2F0DDA1E8E), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 111325056 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 111325ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.871+0800 I  COMMAND  [conn1005251] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340839, 26), signature: { hash: BinData(0, C73486F8FB0AF4EF9610EF9E7B35A8EE33BB513C), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 51140763 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 51140ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.872+0800 I  COMMAND  [conn1004828] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340718, 1), signature: { hash: BinData(0, F6E27F35CFCF27C982C9F761224F142F7AE8DC14), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 171096737 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 171097ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:49:19.641+0800 I  COMMAND  [conn1005455] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603342159, 3409), signature: { hash: BinData(0, 6C2272583614011BC3078BF0425E3354E7D9DF7A), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 106047 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 106ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T13:03:19.742+0800 I  COMMAND  [conn1006651] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603342999, 3763), signature: { hash: BinData(0, C965FAF80DC396D4A0A15412560603FAD97C0288), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 166112 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 166ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T16:37:20.123+0800 I  COMMAND  [conn1013065] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603355839, 6148), signature: { hash: BinData(0, BA20C801EC1FF2FCFFC987706128C844F7F81976), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 558182 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 558ms</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T21:15:19.700+0800 I  COMMAND  [conn1017680] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603372519, 8000), signature: { hash: BinData(0, 5791949A9D96BC21394EAF1A139FE4237DF5EACF), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 101372 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 101ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>3ãthis profile command need to shard lock.how to block this command?<br/>\n i find external sorter into index:op_time:319s this hold w<br/>\n profile:-1:op_time:219s. this need R lock<br/>\n lock: external sorter into index block profile:-1,profile:-1 block other update.<br/>\n connections:from 103 to 1000.so this 391s connections not relese.<br/>\n from logs:2020-10-22T12:23:00 to 2020-10-22T12:28:09,there is no update or select .<br/>\n t think:profile:-1 is blocked by index,after profile:-1 block other all update.<br/>\n so profile:-1 This command doesn't make sense. how to disable itï¼</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:23:00.001+0800 I  -        [conn997955]   Index Build: inserting keys from external sorter into index: 8411900/439497660 1%</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:09.819+0800 I  INDEX    [conn997955] index build: inserted 439497660 keys from external sorter into index in 319 seconds</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.247+0800 I  NETWORK  [listener] connection accepted from 10.5.130.54:54632 #1005589 (1042 connections now open)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2020-10-22T12:28:10.853+0800 I  COMMAND  [conn1004028] command expMonitordb.$cmd command: profile { profile: -1, $clusterTime: { clusterTime: Timestamp(1603340599, 25), signature: { hash: BinData(0, A6629B4A02DAC651DF672778E73312F2EA74749E), keyId: 6844800181754396704 } }, $db: \"expMonitordb\", $readPreference: { mode: \"primaryPreferred\" } } numYields:0 reslen:354 locks:{ ParallelBatchWriterMode: { acquireCount: { r: 1 } }, ReplicationStateTransition: { acquireCount: { w: 1 } }, Global: { acquireCount: { r: 1 } }, Database: { acquireCount: { R: 1 }, acquireWaitCount: { R: 1 }, timeAcquiringMicros: { R: 291292837 } }, Mutex: { acquireCount: { r: 1 } } } protocol:op_msg 291293ms\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>so i need to set profilelevel=0,so this command does not get current settings? <br/>\n how to disable this command?</p>\n\n<p>Â </p>\n\n<p>4ãmongod db profileStatus:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">shard1:PRIMARY&gt; db.getProfilingStatus();{ \"was\" : 1, \"slowms\" : 100, \"sampleRate\" : 1, \"$gleStats\" : { \"lastOpTime\" : Timestamp(0, 0), \"electionId\" : ObjectId(\"7fffffff0000000000000005\") }, \"lastCommittedOpTime\" : Timestamp(1605863816, 6506), \"$configServerState\" : { \"opTime\" : { \"ts\" : Timestamp(1605863815, 5381), \"t\" : NumberLong(1) } }, \"$clusterTime\" : { \"clusterTime\" : Timestamp(1605863816, 6539), \"signature\" : { \"hash\" : BinData(0,\"ztX6+flrG6FrQXVENsfn3tg39mM=\"), \"keyId\" : NumberLong(\"6844800181754396704\") } }, \"operationTime\" : Timestamp(1605863816, 6539)}</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>Â </p>"
        },
        {
          "id": "3503221",
          "author": "601290552@qq.com",
          "created": "Tue, 24 Nov 2020 07:11:42 +0000",
          "content": "<p>The key insertion phase of a hybrid index build seems to hold and not yield an IX (w) lock. Any single command with an S (R) lock can block all operations during that time. In this case the offending command seems to be the read-only profile command (<tt>profile: -1</tt>)</p>\n\n<p>Â </p>\n\n<p>mongodbÂ  key insertion is write operation,so it holds IX(w) lock, so it block S lock, it is ok.</p>\n\n<p>Â </p>\n\n<p>profile: -1 is it hold IS(r) lock. rather than holdÂ  S (R) lock</p>\n\n<p>Â </p>"
        },
        {
          "id": "3653376",
          "author": "JIRAUSER1257149",
          "created": "Mon, 8 Mar 2021 23:01:14 +0000",
          "content": "<p>Can anyone confirm if this same bug exists in v4.4?</p>"
        },
        {
          "id": "3653405",
          "author": "louis.williams",
          "created": "Mon, 8 Mar 2021 23:15:53 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=amanda.brosig\" class=\"user-hover\" rel=\"amanda.brosig\">Amanda Brosig</a>, this affects all versions of 4.2 and 4.4.</p>"
        },
        {
          "id": "3885501",
          "author": "louis.williams",
          "created": "Thu, 17 Jun 2021 18:02:32 +0000",
          "content": "<p>There will be a workaround available for this issue available in the next 4.4 release that prevents the profile operation from blocking index builds. See <a href=\"https://jira.mongodb.org/browse/SERVER-55034\" title=\"The profile command should not take S or X database locks\" class=\"issue-link\" data-issue-key=\"SERVER-55034\"><del>SERVER-55034</del></a> for details.</p>"
        },
        {
          "id": "3982135",
          "author": "xgen-internal-githook",
          "created": "Thu, 5 Aug 2021 02:50:06 +0000",
          "content": "<p>Author:</p>\n{'name': 'Yuhong Zhang', 'email': 'danielzhangyh@gmail.com', 'username': 'YuhongZhang98'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-51806\" title=\"bulk key insertion phase of index build holds IX lock without yielding\" class=\"issue-link\" data-issue-key=\"SERVER-51806\"><del>SERVER-51806</del></a> bulk key insertion phase of index build holds IX lock without yielding<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/935bd194b9ff3cd871470d2e6fe036ee288f17f2\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/935bd194b9ff3cd871470d2e6fe036ee288f17f2</a></p>"
        },
        {
          "id": "4075880",
          "author": "xgen-internal-githook",
          "created": "Tue, 21 Sep 2021 21:46:32 +0000",
          "content": "<p>Author:</p>\n{'name': 'Yuhong Zhang', 'email': 'danielzhangyh@gmail.com', 'username': 'YuhongZhang98'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-51806\" title=\"bulk key insertion phase of index build holds IX lock without yielding\" class=\"issue-link\" data-issue-key=\"SERVER-51806\"><del>SERVER-51806</del></a> bulk key insertion phase of index build holds IX lock without yielding</p>\n\n<p>(cherry picked from commit 935bd194b9ff3cd871470d2e6fe036ee288f17f2)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/60faa8ed58c6b86e4e5bf5d3de4d2b4638f483f8\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/60faa8ed58c6b86e4e5bf5d3de4d2b4638f483f8</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          },
          "inwardlinks": {
            "description": "backports"
          }
        },
        {
          "id": "10520",
          "name": "Problem/Incident",
          "outwardlinks": {
            "description": "causes"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "inwardlinks": {
            "description": "is related to",
            "issuelink": [
              {
                "issuekey": {
                  "id": "1845835",
                  "content": "SERVER-59190"
                }
              },
              {
                "issuekey": {
                  "id": "1839084",
                  "content": "SERVER-59042"
                }
              },
              {
                "issuekey": {
                  "id": "1557106",
                  "content": "SERVER-53180"
                }
              },
              {
                "issuekey": {
                  "id": "1643268",
                  "content": "SERVER-55034"
                }
              }
            ]
          }
        }
      ]
    },
    "attachments": {
      "attachment": [
        {
          "id": "284435",
          "name": "Screen Shot 2020-10-26 at 10.01.53 AM.png",
          "size": "97659",
          "author": "eric.sedor",
          "created": "Mon, 26 Oct 2020 17:04:07 +0000"
        },
        {
          "id": "285608",
          "name": "Screen Shot 2020-11-03 at 2.27.31 PM.png",
          "size": "96165",
          "author": "eric.sedor",
          "created": "Tue, 3 Nov 2020 22:27:48 +0000"
        },
        {
          "id": "302020",
          "name": "Screen Shot 2021-02-26 at 14.53.11.png",
          "size": "100117",
          "author": "jennifer.huang",
          "created": "Fri, 26 Feb 2021 14:55:00 +0000"
        },
        {
          "id": "306816",
          "name": "Screen Shot 2021-03-26 at 18.25.10.png",
          "size": "61013",
          "author": "jennifer.huang",
          "created": "Fri, 26 Mar 2021 18:25:21 +0000"
        },
        {
          "id": "284029",
          "name": "metrics.2020-10-21T19-47-05Z-00000",
          "size": "10410467",
          "author": "601290552@qq.com",
          "created": "Thu, 22 Oct 2020 12:58:55 +0000"
        },
        {
          "id": "284024",
          "name": "metrics.2020-10-22T00-17-05Z-00000",
          "size": "10489382",
          "author": "601290552@qq.com",
          "created": "Thu, 22 Oct 2020 12:47:51 +0000"
        },
        {
          "id": "284025",
          "name": "metrics.2020-10-22T04-31-37Z-00000",
          "size": "10472702",
          "author": "601290552@qq.com",
          "created": "Thu, 22 Oct 2020 12:49:08 +0000"
        },
        {
          "id": "284026",
          "name": "metrics.2020-10-22T08-31-42Z-00000",
          "size": "10336305",
          "author": "601290552@qq.com",
          "created": "Thu, 22 Oct 2020 12:52:00 +0000"
        },
        {
          "id": "284028",
          "name": "metrics.2020-10-22T12-31-43Z-00000",
          "size": "1084470",
          "author": "601290552@qq.com",
          "created": "Thu, 22 Oct 2020 12:58:07 +0000"
        },
        {
          "id": "284027",
          "name": "shard1.log.tar.gz",
          "size": "46298866",
          "author": "601290552@qq.com",
          "created": "Thu, 22 Oct 2020 12:52:52 +0000"
        }
      ]
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "19.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21777",
                "content": "v5.0"
              },
              {
                "key": "18953",
                "content": "v4.4"
              },
              {
                "key": "16775",
                "content": "v4.2"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_13552",
          "key": "com.go2group.jira.plugin.crm:crm_generic_field",
          "customfieldname": "Case",
          "customfieldvalues": {
            "customfieldvalue": "[5002K00000tTREeQAO, 5002K00000tR8IwQAK, 5002K00000xmcgiQAA]"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 26 Oct 2020 23:07:14 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dmitry.ryabtsev"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            2 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "137.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "amanda.brosig",
              "eric.sedor",
              "xgen-internal-githook",
              "601290552@qq.com",
              "louis.williams",
              "yuhong.zhang"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hye0yv:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "0|i00l8f:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4882",
                "content": "Execution Team 2021-07-26"
              },
              {
                "id": "5116",
                "content": "Execution Team 2021-08-09"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hydn87:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-53853] Large buildup of mongos to mongod connections and low performance with secondaryPreferred reads",
    "link": "https://jira.mongodb.org/browse/SERVER-53853",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Test consists of 500 threads doing secondaryPreferred reads as fast as possible against a single shard cluster. In the chart below the queries before A are from the primary for reference, after A are secondaryPreferred.</p>\n\n<p><span class=\"image-wrap\" style=\"\"><img src=\"https://jira.mongodb.org/secure/attachment/295769/295769_conns.png\" width=\"100%\" style=\"border: 0px solid black\" /></span></p>\n\n<ul>\n\t<li>As expected, there are 500 connections to mongos, so there are as many as 500 outstanding operations.</li>\n</ul>\n\n\n<ul>\n\t<li>Before A when reading from the primary (node 0) connections from mongos to mongod build to about 300, and the pool totalInUse and mongod active connections metrics are at times in the hundreds, justifying the need for 300 connections.</li>\n</ul>\n\n\n<ul>\n\t<li>But after A when doing secondary reads connections from mongos to mongod build steadily up to about 10 k connections, far more than the 500 possible outstanding operations. Most of those are considered \"in use\" by mongos, but very few are \"active\" in mongod.</li>\n</ul>\n\n\n<ul>\n\t<li>After reaching about 10 k connections the mongos seems to reset and begin building connections again, either to the same or a different secondary.</li>\n</ul>\n\n\n<ul>\n\t<li>Slow query logs from mongos record a large number of operations taking tens of milliseconds, but almost non on mongod. The latency metrics from mongod confirm that there is no performance bottleneck on mongod.</li>\n</ul>\n\n\n<ul>\n\t<li>Query throughput after A when doing secondary reads is much less than the primary reads before A. This seems to get worse as the number of connections build, but the latency on mongod remains low, so this is probably not due to an issue on mongod with the number of connections, but rather some issue in mongos.</li>\n</ul>\n\n",
    "environment": "",
    "key": {
      "id": "1592884",
      "content": "SERVER-53853"
    },
    "summary": "Large buildup of mongos to mongod connections and low performance with secondaryPreferred reads",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "9",
      "content": "Done"
    },
    "assignee": {
      "username": "amirsaman.memaripour",
      "content": "Amirsaman Memaripour"
    },
    "reporter": {
      "username": "bruce.lucas",
      "content": "Bruce Lucas"
    },
    "labels": "",
    "created": "Sat, 16 Jan 2021 16:46:21 +0000",
    "updated": "Fri, 23 Apr 2021 20:28:06 +0000",
    "resolved": "Fri, 23 Apr 2021 20:28:06 +0000",
    "version": [
      "4.2.0",
      "4.2.11"
    ],
    "votes": "2",
    "watches": "30",
    "comments": {
      "comment": [
        {
          "id": "3569170",
          "author": "bruce.lucas@10gen.com",
          "created": "Sun, 17 Jan 2021 13:55:25 +0000",
          "content": "<p>While doing some more experiments I found that this issue does not always occur - sometimes the secondary reads are evenly distributed between the secondaries and no buildup of connections occurs. I guess this is the expected behavior? However it seemed to reproduce reliably when running the above (both mongo client and single-shard cluster) all on a single desktop machine with 24 cpus.</p>\n\n<p>Also noticed the following:</p>\n\n<p><span class=\"image-wrap\" style=\"\"><img src=\"https://jira.mongodb.org/secure/attachment/295805/295805_odd.png\" width=\"100%\" style=\"border: 0px solid black\" /></span></p>\n\n<p>During the period A-B for example</p>\n<ul>\n\t<li>As noted previously all queries are routed to secondary member 1, and a buildup of connections occurs on that node (although as mentioned above these connections were marked in-use on mongos but were not active on mongod, and there's no reason for 10 k connections to service at most 500 concurrent requests).</li>\n\t<li>No connections are created to secondary member 2 nor are queries routed there, but nevertheless there is a high volume of ismaster commands on member 2, about one per query, which seems unusual to me.</li>\n</ul>\n"
        },
        {
          "id": "3570846",
          "author": "bruce.lucas@10gen.com",
          "created": "Tue, 19 Jan 2021 13:50:05 +0000",
          "content": "<p>This issue affects 4.2.0 and 4.2.11, but does not seem to affect 4.0.22 nor 4.4.3.</p>"
        },
        {
          "id": "3573544",
          "author": "bruce.lucas@10gen.com",
          "created": "Wed, 20 Jan 2021 15:23:46 +0000",
          "content": "<p>There's another reportÂ in <a href=\"https://jira.mongodb.org/browse/SERVER-53899\" title=\"TaskExecutor CPU fills up instantly\" class=\"issue-link\" data-issue-key=\"SERVER-53899\"><del>SERVER-53899</del></a> that may be impacted by this issue.</p>"
        },
        {
          "id": "3736619",
          "author": "JIRAUSER1254107",
          "created": "Fri, 23 Apr 2021 20:27:28 +0000",
          "content": "<p>We believe this issue was addressed with <a href=\"https://jira.mongodb.org/browse/SERVER-54278\" class=\"external-link\" rel=\"nofollow\">https://jira.mongodb.org/browse/SERVER-54278</a>. Thanks everyone!Â </p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10010",
          "name": "Duplicate",
          "inwardlinks": {
            "description": "is duplicated by",
            "issuelink": {
              "issuekey": {
                "id": "1594651",
                "content": "SERVER-53899"
              }
            }
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": {
              "issuekey": {
                "id": "1611402",
                "content": "SERVER-54278"
              }
            }
          },
          "inwardlinks": {
            "description": "is related to"
          }
        }
      ]
    },
    "attachments": {
      "attachment": [
        {
          "id": "296402",
          "name": "connection-pool.png",
          "size": "230303",
          "author": "amirsaman.memaripour",
          "created": "Thu, 21 Jan 2021 02:09:12 +0000"
        },
        {
          "id": "296398",
          "name": "connections.png",
          "size": "344176",
          "author": "amirsaman.memaripour",
          "created": "Thu, 21 Jan 2021 01:48:39 +0000"
        },
        {
          "id": "295769",
          "name": "conns.png",
          "size": "272629",
          "author": "bruce.lucas",
          "created": "Sat, 16 Jan 2021 16:45:37 +0000"
        },
        {
          "id": "297430",
          "name": "default-scheduling.png",
          "size": "251095",
          "author": "amirsaman.memaripour",
          "created": "Wed, 27 Jan 2021 22:57:25 +0000"
        },
        {
          "id": "296395",
          "name": "mongos-targeting.png",
          "size": "197155",
          "author": "amirsaman.memaripour",
          "created": "Thu, 21 Jan 2021 01:30:11 +0000"
        },
        {
          "id": "295805",
          "name": "odd.png",
          "size": "369241",
          "author": "bruce.lucas",
          "created": "Sun, 17 Jan 2021 13:45:24 +0000"
        },
        {
          "id": "297431",
          "name": "reactor-scheduling.png",
          "size": "232094",
          "author": "amirsaman.memaripour",
          "created": "Wed, 27 Jan 2021 22:57:39 +0000"
        },
        {
          "id": "296966",
          "name": "single-target-command.png",
          "size": "378671",
          "author": "amirsaman.memaripour",
          "created": "Mon, 25 Jan 2021 22:04:35 +0000"
        },
        {
          "id": "295770",
          "name": "x-conns.tgz",
          "size": "1355104",
          "author": "bruce.lucas",
          "created": "Sat, 16 Jan 2021 16:50:25 +0000"
        }
      ]
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "4.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "7.0"
          }
        },
        {
          "id": "customfield_13552",
          "key": "com.go2group.jira.plugin.crm:crm_generic_field",
          "customfieldname": "Case",
          "customfieldvalues": {
            "customfieldvalue": "[5002K00000s0IVRQA2]"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 18 Jan 2021 22:48:16 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        21 weeks, 6 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "matthew.tretin"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            21 weeks, 6 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "amirsaman.memaripour",
              "bruce.lucas",
              "matthew.tretin"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hypzx3:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hys0jz:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4500",
                "content": "Service Arch 2021-02-08"
              },
              {
                "id": "4501",
                "content": "Service Arch 2021-02-22"
              },
              {
                "id": "4502",
                "content": "Service Arch 2021-03-08"
              },
              {
                "id": "4503",
                "content": "Service Arch 2021-03-22"
              },
              {
                "id": "4504",
                "content": "Service Arch 2021-04-05"
              },
              {
                "id": "4685",
                "content": "Service Arch 2021-04-19"
              },
              {
                "id": "4686",
                "content": "Service Arch 2021-05-03"
              }
            ]
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>Run this workload against a single-shard cluster</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">function repro() {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    nthreads = 500</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    db.c.insert({_id: 0})</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    threads = []</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    for (var t=0; t&lt;nthreads; t++) {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        thread = new Thread(function(t) {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">            while (true)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                db.c.find({_id: 0}).readPref(\"secondaryPreferred\").itcount()</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        }, t)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        threads.push(thread)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        thread.start()</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    }</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    for (var t = 0; t &lt; nthreads; t++)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        threads[t].join()</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hypm6f:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-53973] Migration manager recovery should handle failed findIntersectingChunk during refineShardKey",
    "link": "https://jira.mongodb.org/browse/SERVER-53973",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The call to <a href=\"https://github.com/mongodb/mongo/blob/ee1e7ff4575e1b5b7d5957feef60206f80dc22cc/src/mongo/db/s/balancer/migration_manager.cpp#L351\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">findIntersectingChunkWithSimpleCollation</a> is being called with the original shard key after a refineShardKey operation. This results in a ShardKeyNotFound exception being thrown which goes unhandled.</p>\n\n<p>This should have been addressed by the changes in <a href=\"https://jira.mongodb.org/browse/SERVER-48365\" class=\"external-link\" rel=\"nofollow\">https://jira.mongodb.org/browse/SERVER-48365</a> by making sure that the migration recovery entries are written while holding the dist lock. However, there is an interleaving where this is not the case.</p>",
    "environment": "",
    "key": {
      "id": "1597708",
      "content": "SERVER-53973"
    },
    "summary": "Migration manager recovery should handle failed findIntersectingChunk during refineShardKey",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "tommaso.tocci",
      "content": "Tommaso Tocci"
    },
    "reporter": {
      "username": "alex.taskov",
      "content": "Alexander Taskov"
    },
    "labels": {
      "label": [
        "Sharding-EMEA",
        "sharding-wfbf-day"
      ]
    },
    "created": "Fri, 22 Jan 2021 15:38:25 +0000",
    "updated": "Tue, 25 May 2021 22:12:11 +0000",
    "resolved": "Tue, 30 Mar 2021 09:56:13 +0000",
    "version": "4.4.4",
    "fixVersion": [
      "4.4.6",
      "5.0.0-rc0"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "4",
    "comments": {
      "comment": [
        {
          "id": "3646441",
          "author": "tommaso.tocci",
          "created": "Thu, 4 Mar 2021 12:27:42 +0000",
          "content": "<p>I'll bounce back this to <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=alex.taskov\" class=\"user-hover\" rel=\"alex.taskov\">Alexander Taskov</a> to add more context.</p>"
        },
        {
          "id": "3653818",
          "author": "kaloian.manassiev",
          "created": "Tue, 9 Mar 2021 07:33:07 +0000",
          "content": "<p>I think the problem is just that the following race condition can happen:</p>\n<ol>\n\t<li>A migration starts, which <a href=\"https://github.com/mongodb/mongo/blob/d0004a3e0239570a2602af35f14a84a47fb290b1/src/mongo/db/s/balancer/migration_manager.cpp#L523\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">takes the dist lock</a>, then <a href=\"https://github.com/mongodb/mongo/blob/d0004a3e0239570a2602af35f14a84a47fb290b1/src/mongo/db/s/balancer/migration_manager.cpp#L547\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">writes</a> document with shardKey {a: 1}, which majority commits (so there is actually no order issue)</li>\n\t<li>Step-down happens of that same node, followed by step-up, but on the config server we <a href=\"https://github.com/mongodb/mongo/blob/8f5b19480757929c98a5d7675c4c1762b32b09e9/src/mongo/db/repl/replication_coordinator_external_state_impl.cpp#L864\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">throw-out the dist locks</a> unconditionally</li>\n\t<li>Before the Balancer recovery has managed to run and re-acquire the dist locks, a refine shard key sneaks-in</li>\n\t<li>Now the Balancer recovery has a wrong shard key</li>\n</ol>\n\n\n<p>Â </p>\n\n<p>I think it will be extremely difficult to fix the distributed lock unlocking issue, so instead we should just address the crash by try/catching the lookup of the chunk in the ChunkManager and abandoning that migration recovery in that case.</p>"
        },
        {
          "id": "3687614",
          "author": "tommaso.tocci",
          "created": "Sat, 27 Mar 2021 12:41:58 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=kaloian.manassiev\" class=\"user-hover\" rel=\"kaloian.manassiev\">Kaloian Manassiev</a> was right about the racing scenario, I've been able to reproduce it by adding a couple of sleeps. <a href=\"https://github.com/toto-dev/mongo/commit/0a000591ab8cb883331efcb975fd19cf1a71ab41\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">This is patch to reproduce the error</a></p>"
        },
        {
          "id": "3690717",
          "author": "xgen-internal-githook",
          "created": "Tue, 30 Mar 2021 09:50:57 +0000",
          "content": "<p>Author:</p>\n{'name': 'Tommaso Tocci', 'email': 'tommaso.tocci@mongodb.com', 'username': 'toto-dev'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-53973\" title=\"Migration manager recovery should handle failed findIntersectingChunk during refineShardKey\" class=\"issue-link\" data-issue-key=\"SERVER-53973\"><del>SERVER-53973</del></a> Migration manager recovery should handle failed findIntersectingChunk during refineShardKey<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/1256d8e67a6b4bb88875cbc112987bbc8fffe76b\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/1256d8e67a6b4bb88875cbc112987bbc8fffe76b</a></p>"
        },
        {
          "id": "3706643",
          "author": "xgen-internal-githook",
          "created": "Wed, 7 Apr 2021 21:36:59 +0000",
          "content": "<p>Author:</p>\n{'name': 'Tommaso Tocci', 'email': 'tommaso.tocci@mongodb.com', 'username': 'toto-dev'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-53973\" title=\"Migration manager recovery should handle failed findIntersectingChunk during refineShardKey\" class=\"issue-link\" data-issue-key=\"SERVER-53973\"><del>SERVER-53973</del></a> Migration manager recovery should handle failed findIntersectingChunk during refineShardKey<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/469b1101cea8cf0c5b34437cdeb391b7002f7d19\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/469b1101cea8cf0c5b34437cdeb391b7002f7d19</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "5.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "4.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "18953",
              "content": "v4.4"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 29 Jan 2021 16:13:12 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        24 weeks, 1 day ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "vivian.ge"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            24 weeks, 1 day ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "26.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "alex.taskov",
              "xgen-internal-githook",
              "kaloian.manassiev",
              "tommaso.tocci"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyqtgf:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyt5db:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4485",
                "content": "Sharding 2021-02-22"
              },
              {
                "id": "4486",
                "content": "Sharding 2021-03-08"
              },
              {
                "id": "4487",
                "content": "Sharding 2021-03-22"
              },
              {
                "id": "4497",
                "content": "Sharding 2021-04-05"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyqfpj:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-54507] Can't execute $merge if sharding catalog cache is empty",
    "link": "https://jira.mongodb.org/browse/SERVER-54507",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Manifestation of the bug: <b>The impossibility to execute the $merge pipeline stage</b></p>\n\n\n<p>Consider the case in which the $merge pipeline stage is executed in a shard that:</p>\n<ul>\n\t<li>Has the CollectionShardingState correctly updated with the latest shard version of the target collection.</li>\n\t<li>Doesn't currently hold any entry in the cache for the target collection.</li>\n</ul>\n\n\n<p>(This is possible because the sharding catalog cache is a LRU cache in which not frequently used entries can be evicted.)</p>\n\n<p>The shard executes <a href=\"https://github.com/mongodb/mongo/blob/399ce1d4f498b815290cd0f16c881e0e22ebeda8/src/mongo/db/pipeline/document_source_merge.cpp#L444\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">DocumentSourceMerge::createFromBson() </a>that triggers a call to <a href=\"https://github.com/mongodb/mongo/blob/399ce1d4f498b815290cd0f16c881e0e22ebeda8/src/mongo/db/pipeline/document_source_merge.cpp#L458\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">MongoProcessInterface::ensureFieldsUniqueOrResolveDocumentKey()</a>.Â  This function in the end <a href=\"https://github.com/mongodb/mongo/blob/3afb4b31149e5a747e25f2aab611621a99bf8667/src/mongo/s/catalog_cache.cpp#L326-L330\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">throws a StaleConfigInfo</a> because the target collection is not present in the cache. The error is correctly handled by the shard that will execute the <a href=\"https://github.com/mongodb/mongo/blob/3afb4b31149e5a747e25f2aab611621a99bf8667/src/mongo/db/s/shard_filtering_metadata_refresh.h#L41-L62\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">onShardVersionMismatch()</a> procedure.</p>\n\n<p>Since the CollectionShardingState already contains the latest shard version for the target collection no action will be taken and no refresh of the catalog cache will be triggered.</p>\n\n<p>In other words if the CollectionShardingState is up to date, the StaleConfigInfo won't guarantee that the catalog cache will be refreshed.</p>",
    "environment": "",
    "key": {
      "id": "1622704",
      "content": "SERVER-54507"
    },
    "summary": "Can't execute $merge if sharding catalog cache is empty",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "eric.cox",
      "content": "Eric Cox"
    },
    "reporter": {
      "username": "tommaso.tocci",
      "content": "Tommaso Tocci"
    },
    "labels": "",
    "created": "Fri, 12 Feb 2021 18:01:08 +0000",
    "updated": "Thu, 1 Jul 2021 17:16:00 +0000",
    "resolved": "Fri, 7 May 2021 22:08:12 +0000",
    "version": "4.4.4",
    "fixVersion": "5.0.0-rc0",
    "component": "Querying",
    "votes": "0",
    "watches": "7",
    "comments": {
      "comment": [
        {
          "id": "3762196",
          "author": "xgen-internal-githook",
          "created": "Fri, 7 May 2021 21:53:13 +0000",
          "content": "<p>Author:</p>\n{'name': 'Eric Cox', 'email': 'eric.cox@mongodb.com', 'username': 'ericox'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-54507\" title=\"Can&#39;t execute $merge if sharding catalog cache is empty\" class=\"issue-link\" data-issue-key=\"SERVER-54507\"><del>SERVER-54507</del></a> Can't execute merge if sharding catalog cache is empty<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/32fe49396dec58836033bca67ad1360b1a80f03c\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/32fe49396dec58836033bca67ad1360b1a80f03c</a></p>"
        },
        {
          "id": "3912734",
          "author": "xgen-internal-githook",
          "created": "Thu, 1 Jul 2021 17:16:00 +0000",
          "content": "<p>Author:</p>\n{'name': 'Eric Cox', 'email': 'eric.cox@mongodb.com', 'username': 'ericox'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56815\" title=\"Complete TODO listed in SERVER-54507\" class=\"issue-link\" data-issue-key=\"SERVER-56815\"><del>SERVER-56815</del></a> Complete TODO listed in <a href=\"https://jira.mongodb.org/browse/SERVER-54507\" title=\"Can&#39;t execute $merge if sharding catalog cache is empty\" class=\"issue-link\" data-issue-key=\"SERVER-54507\"><del>SERVER-54507</del></a><br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/620a4c060e7cf06d340a81b01cad62f5812852f3\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/620a4c060e7cf06d340a81b01cad62f5812852f3</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10520",
          "name": "Problem/Incident",
          "outwardlinks": {
            "description": "causes"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": {
              "issuekey": {
                "id": "1709023",
                "content": "SERVER-56815"
              }
            }
          },
          "inwardlinks": {
            "description": "is related to",
            "issuelink": {
              "issuekey": {
                "id": "1706905",
                "content": "SERVER-56763"
              }
            }
          }
        }
      ]
    },
    "attachments": {
      "attachment": {
        "id": "299993",
        "name": "merge_cache_bug.patch",
        "size": "877",
        "author": "tommaso.tocci",
        "created": "Fri, 12 Feb 2021 17:59:04 +0000"
      }
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "6.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21266",
                "content": "v4.9"
              },
              {
                "key": "18953",
                "content": "v4.4"
              },
              {
                "key": "16775",
                "content": "v4.2"
              },
              {
                "key": "15640",
                "content": "v4.0"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 18 Feb 2021 17:21:46 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        12 weeks ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "xgen-internal-githook"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            12 weeks ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "145.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "eric.cox",
              "xgen-internal-githook",
              "tommaso.tocci"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyv0lj:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hywtsf:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4464",
                "content": "Query Execution 2021-03-08"
              },
              {
                "id": "4466",
                "content": "Query Execution 2021-03-22"
              },
              {
                "id": "4468",
                "content": "Query Execution 2021-04-05"
              },
              {
                "id": "4470",
                "content": "Query Execution 2021-04-19"
              },
              {
                "id": "4472",
                "content": "Query Execution 2021-05-03"
              },
              {
                "id": "4697",
                "content": "Query Execution 2021-05-17"
              }
            ]
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>Even though it can be reproduced by a far more easy test case, I've been able to reproduce consistently this bug by just flushing the cache for the target collection in jstests/sharding/query/merge_write_concern.js before to execute the $merge aggregation command.</p>\n\n<p><span class=\"nobr\"><a href=\"https://jira.mongodb.org/secure/attachment/299993/299993_merge_cache_bug.patch\" title=\"merge_cache_bug.patch attached to SERVER-54507\">merge_cache_bug.patch<sup><img class=\"rendericon\" src=\"https://jira.mongodb.org/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span></p>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyumun:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-54701] shardCollection might succesfully write to the config server but end up with missing indexes on the primary Shard",
    "link": "https://jira.mongodb.org/browse/SERVER-54701",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The <a href=\"https://github.com/mongodb/mongo/blob/3eb157099b6a405297bac39168712039751bac8e/src/mongo/db/s/shardsvr_shard_collection.cpp#L329\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">index creation on the shard collection path</a>Â is performed using a <a href=\"https://github.com/mongodb/mongo/blob/3eb157099b6a405297bac39168712039751bac8e/src/mongo/db/s/shard_key_util.cpp#L227\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">DBClient</a>, which does not wait for majority write concern. The following scenario might happen:</p>\n\n<p>1. The shard index is created locally<br/>\n2. The writes to config.chunks and config.collections are sent to the config server<br/>\n3. A stepdown happens<br/>\n4. The index creation is rolled backed</p>\n\n<p>If the write on step two succeeds then we'll end up with a sharded collection without the sharded index created on the primary. We should wait for majority write concern of the latest write after the index creation (probably using the same as the <a href=\"https://github.com/mongodb/mongo/blob/v4.4/src/mongo/db/s/config/sharding_catalog_manager_database_operations.cpp#L231\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">sharding catalog manager</a>)</p>",
    "environment": "",
    "key": {
      "id": "1629707",
      "content": "SERVER-54701"
    },
    "summary": "shardCollection might succesfully write to the config server but end up with missing indexes on the primary Shard",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "marcos.grillo",
      "content": "Marcos JosÃ© Grillo Ramirez"
    },
    "reporter": {
      "username": "marcos.grillo",
      "content": "Marcos JosÃ© Grillo Ramirez"
    },
    "labels": "",
    "created": "Mon, 22 Feb 2021 16:49:22 +0000",
    "updated": "Tue, 23 Mar 2021 13:29:02 +0000",
    "resolved": "Tue, 23 Mar 2021 13:29:01 +0000",
    "version": "4.4.4",
    "fixVersion": "4.4.5",
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": {
        "id": "3678955",
        "author": "xgen-internal-githook",
        "created": "Tue, 23 Mar 2021 13:22:18 +0000",
        "content": "<p>Author:</p>\n{'name': 'Marcos JosÃ© Grillo Ramirez', 'email': 'marcos.grillo@mongodb.com', 'username': 'm4nti5'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-54701\" title=\"shardCollection might succesfully write to the config server but end up with missing indexes on the primary Shard\" class=\"issue-link\" data-issue-key=\"SERVER-54701\"><del>SERVER-54701</del></a> Wait for majority write concern after shard index creation<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/37b8886db6b9e1df473c1b6b90142641b73f87f9\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/37b8886db6b9e1df473c1b6b90142641b73f87f9</a></p>"
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Tue, 23 Mar 2021 13:22:18 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        26 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "marcos.grillo"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            26 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "marcos.grillo"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyw75r:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyxyif:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4487",
                "content": "Sharding 2021-03-22"
              },
              {
                "id": "4497",
                "content": "Sharding 2021-04-05"
              }
            ]
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>1. The shard index is created locally<br/>\n2. The writes to config.chunks and config.collections are sent to the config server<br/>\n3. A stepdown happens<br/>\n4. The index creation is rolled backed</p>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyvtev:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-54756] protocol error from windows connector",
    "link": "https://jira.mongodb.org/browse/SERVER-54756",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>when we try to connect from microsoft ODBC connector, the server shows this error:</p>\n\n<p>Â </p>\n\n<p>Error receiving request from client. Ending connection from remote\",\"attr\":{\"error\":</p>\n{\"code\":17,\"codeName\":\"ProtocolError\",\"errmsg\":\"Client sent an HTTP request over a native MongoDB connection\"}",
    "environment": "",
    "key": {
      "id": "1632277",
      "content": "SERVER-54756"
    },
    "summary": "protocol error from windows connector",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "4",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/minor.svg",
      "content": "Minor - P4"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "9",
      "content": "Done"
    },
    "assignee": {
      "username": "backlog-server-triage",
      "content": "Backlog - Triage Team"
    },
    "reporter": {
      "username": "kevin@mainstreetcomputing.com",
      "content": "Kevin Chugh"
    },
    "labels": "",
    "created": "Wed, 24 Feb 2021 16:09:45 +0000",
    "updated": "Thu, 24 Jun 2021 17:09:38 +0000",
    "resolved": "Thu, 24 Jun 2021 17:09:38 +0000",
    "version": "4.4.4",
    "component": "Networking",
    "votes": "0",
    "watches": "2",
    "comments": {
      "comment": {
        "id": "3648024",
        "author": "thomas.schubert",
        "created": "Thu, 4 Mar 2021 21:51:36 +0000",
        "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=kevin%40mainstreetcomputing.com\" class=\"user-hover\" rel=\"kevin@mainstreetcomputing.com\">Kevin Chugh</a>,</p>\n\n<p>Have you reviewed/followed the documentation on <a href=\"https://docs.mongodb.com/bi-connector/master/tutorial/create-system-dsn/?\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://docs.mongodb.com/bi-connector/master/tutorial/create-system-dsn/?</a></p>\n\n<p>Thanks,<br/>\nKelsey</p>"
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 4 Mar 2021 21:51:36 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        29 weeks ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "kelsey.schubert"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            29 weeks ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "backlog-server-triage",
              "kelsey.schubert",
              "kevin@mainstreetcomputing.com"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hywmy7:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyyckf:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>in windows, open odbc connections, configure server connection, click test, on the server side, the server accepts the connection then closes the connection</p>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyw97b:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-54803] StreamableReplicaSetMonitor registers a new topology listener per call to getHostsOrRefresh",
    "link": "https://jira.mongodb.org/browse/SERVER-54803",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Whenever <a href=\"https://github.com/mongodb/mongo/blob/913d6b62acfbb344dde1b116f4161360acd8fd13/src/mongo/client/streamable_replica_set_monitor.cpp#L256\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">StreamableReplicaSetMonitor::getHostsOrRefresh</a> is called (which happens on every query), if the result isn't immediately available, we <a href=\"https://github.com/mongodb/mongo/blob/913d6b62acfbb344dde1b116f4161360acd8fd13/src/mongo/client/streamable_replica_set_monitor.cpp#L304\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">enqueue a query object</a> for that host, to be resolved <a href=\"https://github.com/mongodb/mongo/blob/913d6b62acfbb344dde1b116f4161360acd8fd13/src/mongo/client/streamable_replica_set_monitor.cpp#L744\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">when the host becomes available</a>. As part of enqueuing a query, we unconditionally <a href=\"https://github.com/mongodb/mongo/blob/913d6b62acfbb344dde1b116f4161360acd8fd13/src/mongo/client/streamable_replica_set_monitor.cpp#L358\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">register the query processor as an event listener</a> for topology changes. We only <a href=\"https://github.com/mongodb/mongo/blob/913d6b62acfbb344dde1b116f4161360acd8fd13/src/mongo/client/streamable_replica_set_monitor.cpp#L764-L766\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">remove that listener when all outstanding queries are satisfied</a>, but that won't happen as long as the node the RSM is targeting is down or unable to be contacted. <a href=\"https://github.com/mongodb/mongo/blob/913d6b62acfbb344dde1b116f4161360acd8fd13/src/mongo/client/sdam/topology_listener.cpp#L35\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">Registering a listener</a> does not do any deduplication to check whether the passed-in pointer is the same, which means the list of listeners will continue to grow as long as there are new queries. It also means that every time there's a topology change event, ALL of those listeners will then call requestImmediateCheck.</p>\n\n<p>Â </p>\n\n<p>We should change it so that the RSM _queryProcessor topology listener is only registered at most once.</p>",
    "environment": "",
    "key": {
      "id": "1634264",
      "content": "SERVER-54803"
    },
    "summary": "StreamableReplicaSetMonitor registers a new topology listener per call to getHostsOrRefresh",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "lamont.nelson",
      "content": "Lamont Nelson"
    },
    "reporter": {
      "username": "matthew.saltz",
      "content": "Matthew Saltz"
    },
    "labels": {
      "label": [
        "bkp",
        "sharding-wfbf-day"
      ]
    },
    "created": "Thu, 25 Feb 2021 21:06:25 +0000",
    "updated": "Fri, 11 Jun 2021 20:37:02 +0000",
    "resolved": "Tue, 8 Jun 2021 16:38:41 +0000",
    "version": "4.4.4",
    "fixVersion": [
      "4.4.5",
      "5.1.0",
      "5.0.0-rc1"
    ],
    "component": "Networking",
    "votes": "0",
    "watches": "14",
    "comments": {
      "comment": [
        {
          "id": "3672242",
          "author": "xgen-internal-githook",
          "created": "Thu, 18 Mar 2021 20:54:38 +0000",
          "content": "<p>Author:</p>\n{'name': 'Matthew Saltz', 'email': 'matthew.saltz@mongodb.com', 'username': 'saltzm'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-54803\" title=\"StreamableReplicaSetMonitor registers a new topology listener per call to getHostsOrRefresh\" class=\"issue-link\" data-issue-key=\"SERVER-54803\"><del>SERVER-54803</del></a> Only register _queryProcessor once in StreamableRSM<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/80250fc73deb1d300473b8d2e9e98b5385da90c7\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/80250fc73deb1d300473b8d2e9e98b5385da90c7</a></p>"
        },
        {
          "id": "3672289",
          "author": "matthew.saltz",
          "created": "Thu, 18 Mar 2021 21:13:11 +0000",
          "content": "<p>Re-opening and opening a 4.4 Backport ticket, which I'll then immediately close since the commit went straight to the 4.4 branch</p>"
        },
        {
          "id": "3842092",
          "author": "lamont.nelson",
          "created": "Wed, 26 May 2021 16:26:26 +0000",
          "content": "<p>This shouldn't conflict with <a href=\"https://jira.mongodb.org/browse/SERVER-56854\" title=\"Provide the ability for RSM requests to timeout and mark the server as failed\" class=\"issue-link\" data-issue-key=\"SERVER-56854\"><del>SERVER-56854</del></a> since that is for the 4.0 &amp; 4.2 branches. It looks like this one just needs to be ported to 5.0 and master.</p>"
        },
        {
          "id": "3863479",
          "author": "xgen-internal-githook",
          "created": "Mon, 7 Jun 2021 20:12:09 +0000",
          "content": "<p>Author:</p>\n{'name': 'Matthew Saltz', 'email': 'matthew.saltz@mongodb.com', 'username': 'saltzm'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-54803\" title=\"StreamableReplicaSetMonitor registers a new topology listener per call to getHostsOrRefresh\" class=\"issue-link\" data-issue-key=\"SERVER-54803\"><del>SERVER-54803</del></a> Only register _queryProcessor once in StreamableRSM<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/d6394bb39aae0ae99cfeeb9569203de2ff98e11a\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/d6394bb39aae0ae99cfeeb9569203de2ff98e11a</a></p>"
        },
        {
          "id": "3866529",
          "author": "xgen-internal-githook",
          "created": "Tue, 8 Jun 2021 15:51:45 +0000",
          "content": "<p>Author:</p>\n{'name': 'Matthew Saltz', 'email': 'matthew.saltz@mongodb.com', 'username': 'saltzm'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-54803\" title=\"StreamableReplicaSetMonitor registers a new topology listener per call to getHostsOrRefresh\" class=\"issue-link\" data-issue-key=\"SERVER-54803\"><del>SERVER-54803</del></a> Only register _queryProcessor once in StreamableRSM</p>\n\n<p>(cherry picked from commit d6394bb39aae0ae99cfeeb9569203de2ff98e11a)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/2a98238a5a51521cd022a68ebfd79b5a39796b8d\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/2a98238a5a51521cd022a68ebfd79b5a39796b8d</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "5.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21777",
                "content": "v5.0"
              },
              {
                "key": "18953",
                "content": "v4.4"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_13552",
          "key": "com.go2group.jira.plugin.crm:crm_generic_field",
          "customfieldname": "Case",
          "customfieldvalues": {
            "customfieldvalue": "[5002K00000sdBRgQAM, 5002K00000tUpqEQAS]"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 18 Mar 2021 20:54:38 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        15 weeks, 2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "steven.vannelli"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            15 weeks, 2 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "lamont.nelson",
              "matthew.saltz"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hywz3j:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz0e6v:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4503",
              "content": "Service Arch 2021-03-22"
            }
          }
        },
        {
          "id": "customfield_10555",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:float",
          "customfieldname": "Story Points",
          "customfieldvalues": {
            "customfieldvalue": "4.0"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hywlcn:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-54876] Upgrade mongodb 4.4.4 from 4.2.12 failed",
    "link": "https://jira.mongodb.org/browse/SERVER-54876",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Hi,</p>\n\n<p>we've a replica set with 6 nodes mongodb e one arbiter.</p>\n\n<p>IÂ  tried upgrade from 4.2.12 to 4.4.4 (rolling upgrade) and i did the following steps:Â </p>\n<ol>\n\t<li>Upgrade from 4.2.12 to 4.4.2 one secondary node and the node it works perfectly in secondary mode.</li>\n\t<li>switch primary from node 4.2.12 to 4.4.4 and the node 4.4.4 crashed.</li>\n</ol>\n\n\n<p>This is the output log trace before the node crash :</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{\"t\":\\{\"$date\":\"2021-03-02T08:08:19.684+00:00\"},\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31431, \"ctx\":\"conn1407\",\"msg\":\"BACKTRACE: \\{bt}\",\"attr\":\\{\"bt\":{\"backtrace\":[{\"a\":\"559B86781BE1\",\"b\":\"559B83A79000\",\"o\":\"2D08BE1\",\"s\":\"_ZN5mongo18stack_trace_detail12_GLOBAL__N_119printStackTraceImplERKNS1_7OptionsEPNS_14StackTraceSinkE.constprop.606\",\"s+\":\"1E1\"},\\{\"a\":\"559B86783219\",\"b\":\"559B83A79000\",\"o\":\"2D0A219\",\"s\":\"_ZN5mongo15printStackTraceEv\",\"s+\":\"29\"},\\{\"a\":\"559B86780A76\",\"b\":\"559B83A79000\",\"o\":\"2D07A76\",\"s\":\"_ZN5mongo12_GLOBAL__N_116abruptQuitActionEiP9siginfo_tPv\",\"s+\":\"66\"},\\{\"a\":\"7F336A2F1630\",\"b\":\"7F336A2E2000\",\"o\":\"F630\",\"s\":\"_L_unlock_13\",\"s+\":\"34\"},\\{\"a\":\"7F3369F4A3D7\",\"b\":\"7F3369F14000\",\"o\":\"363D7\",\"s\":\"gsignal\",\"s+\":\"37\"},\\{\"a\":\"7F3369F4BAC8\",\"b\":\"7F3369F14000\",\"o\":\"37AC8\",\"s\":\"abort\",\"s+\":\"148\"},\\{\"a\":\"559B84993677\",\"b\":\"559B83A79000\",\"o\":\"F1A677\",\"s\":\"_ZN5mongo15invariantFailedEPKcS1_j\",\"s+\":\"12C\"},\\{\"a\":\"559B846E5560\",\"b\":\"559B83A79000\",\"o\":\"C6C560\",\"s\":\"_ZN5mongo4repl10MemberData35advanceLastDurableOpTimeAndWallTimeENS0_17OpTimeAndWallTimeENS_6Date_tE.cold.338\",\"s+\":\"18\"},\\{\"a\":\"559B84E097D3\",\"b\":\"559B83A79000\",\"o\":\"13907D3\",\"s\":\"_ZN5mongo4repl19TopologyCoordinator13setLastOptimeERKNS0_18UpdatePositionArgs10UpdateInfoENS_6Date_tEPx\",\"s+\":\"2E3\"},\\{\"a\":\"559B84D56C65\",\"b\":\"559B83A79000\",\"o\":\"12DDC65\",\"s\":\"_ZN5mongo4repl26ReplicationCoordinatorImpl14_setLastOptimeENS_8WithLockERKNS0_18UpdatePositionArgs10UpdateInfoEPx\",\"s+\":\"55\"},\\{\"a\":\"559B84D56DCF\",\"b\":\"559B83A79000\",\"o\":\"12DDDCF\",\"s\":\"_ZN5mongo4repl26ReplicationCoordinatorImpl28processReplSetUpdatePositionERKNS0_18UpdatePositionArgsEPx\",\"s+\":\"AF\"},\\{\"a\":\"559B84D11317\",\"b\":\"559B83A79000\",\"o\":\"1298317\",\"s\":\"_ZN5mongo4repl24CmdReplSetUpdatePosition3runEPNS_16OperationContextERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEERKNS_7BSONObjERNS_14BSONObjBuilderE\",\"s+\":\"167\"},\\{\"a\":\"559B856EC64A\",\"b\":\"559B83A79000\",\"o\":\"1C7364A\",\"s\":\"_ZN5mongo37BasicCommandWithReplyBuilderInterface10Invocation3runEPNS_16OperationContextEPNS_3rpc21ReplyBuilderInterfaceE\",\"s+\":\"11A\"},\\{\"a\":\"559B856E6B8F\",\"b\":\"559B83A79000\",\"o\":\"1C6DB8F\",\"s\":\"_ZN5mongo14CommandHelpers20runCommandInvocationEPNS_16OperationContextERKNS_12OpMsgRequestEPNS_17CommandInvocationEPNS_3rpc21ReplyBuilderInterfaceE\",\"s+\":\"7F\"},\\{\"a\":\"559B84E8E665\",\"b\":\"559B83A79000\",\"o\":\"1415665\",\"s\":\"_ZN5mongo12_GLOBAL__N_114runCommandImplEPNS_16OperationContextEPNS_17CommandInvocationERKNS_12OpMsgRequestEPNS_3rpc21ReplyBuilderInterfaceENS_11LogicalTimeERKNS_23ServiceEntryPointCommon5HooksEPNS_14BSONObjBuilderERKNS_30OperationSessionInfoFromClientE\",\"s+\":\"135\"},\\{\"a\":\"559B84E914C9\",\"b\":\"559B83A79000\",\"o\":\"14184C9\",\"s\":\"_ZN5mongo12_GLOBAL__N_119execCommandDatabaseEPNS_16OperationContextEPNS_7CommandERKNS_12OpMsgRequestEPNS_3rpc21ReplyBuilderInterfaceERKNS_23ServiceEntryPointCommon5HooksE\",\"s+\":\"11B9\"},\\{\"a\":\"559B84E927B0\",\"b\":\"559B83A79000\",\"o\":\"14197B0\",\"s\":\"_ZN5mongo12_GLOBAL__N_116receivedCommandsEPNS_16OperationContextERKNS_7MessageERKNS_23ServiceEntryPointCommon5HooksE\",\"s+\":\"650\"},\\{\"a\":\"559B84E9343D\",\"b\":\"559B83A79000\",\"o\":\"141A43D\",\"s\":\"_ZN5mongo23ServiceEntryPointCommon13handleRequestEPNS_16OperationContextERKNS_7MessageERKNS0_5HooksE\",\"s+\":\"50D\"},\\{\"a\":\"559B84E80EEC\",\"b\":\"559B83A79000\",\"o\":\"1407EEC\",\"s\":\"_ZN5mongo23ServiceEntryPointMongod13handleRequestEPNS_16OperationContextERKNS_7MessageE\",\"s+\":\"3C\"},\\{\"a\":\"559B84E8B975\",\"b\":\"559B83A79000\",\"o\":\"1412975\",\"s\":\"_ZN5mongo19ServiceStateMachine15_processMessageENS0_11ThreadGuardE\",\"s+\":\"F5\"},\\{\"a\":\"559B84E89685\",\"b\":\"559B83A79000\",\"o\":\"1410685\",\"s\":\"_ZN5mongo19ServiceStateMachine15_runNextInGuardENS0_11ThreadGuardE\",\"s+\":\"125\"},\\{\"a\":\"559B84E8A616\",\"b\":\"559B83A79000\",\"o\":\"1411616\",\"s\":\"_ZNSt17_Function_handlerIFvvEZN5mongo19ServiceStateMachine22_scheduleNextWithGuardENS2_11ThreadGuardENS1_9transport15ServiceExecutor13ScheduleFlagsENS4_23ServiceExecutorTaskNameENS2_9OwnershipEEUlvE_E9_M_invokeERKSt9_Any_data\",\"s+\":\"56\"},\\{\"a\":\"559B86148162\",\"b\":\"559B83A79000\",\"o\":\"26CF162\",\"s\":\"_ZN5mongo9transport26ServiceExecutorSynchronous8scheduleESt8functionIFvvEENS0_15ServiceExecutor13ScheduleFlagsENS0_23ServiceExecutorTaskNameE\",\"s+\":\"182\"},\\{\"a\":\"559B84E88A9B\",\"b\":\"559B83A79000\",\"o\":\"140FA9B\",\"s\":\"_ZN5mongo19ServiceStateMachine22_scheduleNextWithGuardENS0_11ThreadGuardENS_9transport15ServiceExecutor13ScheduleFlagsENS2_23ServiceExecutorTaskNameENS0_9OwnershipE\",\"s+\":\"DB\"},\\{\"a\":\"559B84E89DFD\",\"b\":\"559B83A79000\",\"o\":\"1410DFD\",\"s\":\"_ZN5mongo19ServiceStateMachine15_sourceCallbackENS_6StatusE\",\"s+\":\"6AD\"},\\{\"a\":\"559B84E89EE0\",\"b\":\"559B83A79000\",\"o\":\"1410EE0\",\"s\":\"_ZN5mongo14future_details4callIRZNS_19ServiceStateMachine14_sourceMessageENS2_11ThreadGuardEEUlNS_10StatusWithINS_7MessageEEEE0_S6_EEDaOT_OT0_\",\"s+\":\"60\"},\\{\"a\":\"559B84E8A185\",\"b\":\"559B83A79000\",\"o\":\"1411185\",\"s\":\"_ZN5mongo19ServiceStateMachine14_sourceMessageENS0_11ThreadGuardE\",\"s+\":\"145\"},\\{\"a\":\"559B84E896FA\",\"b\":\"559B83A79000\",\"o\":\"14106FA\",\"s\":\"_ZN5mongo19ServiceStateMachine15_runNextInGuardENS0_11ThreadGuardE\",\"s+\":\"19A\"},\\{\"a\":\"559B84E8A616\",\"b\":\"559B83A79000\",\"o\":\"1411616\",\"s\":\"_ZNSt17_Function_handlerIFvvEZN5mongo19ServiceStateMachine22_scheduleNextWithGuardENS2_11ThreadGuardENS1_9transport15ServiceExecutor13ScheduleFlagsENS4_23ServiceExecutorTaskNameENS2_9OwnershipEEUlvE_E9_M_invokeERKSt9_Any_data\",\"s+\":\"56\"},\\{\"a\":\"559B861487C8\",\"b\":\"559B83A79000\",\"o\":\"26CF7C8\",\"s\":\"_ZNSt17_Function_handlerIFvvEZN5mongo9transport26ServiceExecutorSynchronous8scheduleESt8functionIS0_ENS2_15ServiceExecutor13ScheduleFlagsENS2_23ServiceExecutorTaskNameEEUlvE0_E9_M_invokeERKSt9_Any_data\",\"s+\":\"B8\"},\\{\"a\":\"559B864991E6\",\"b\":\"559B83A79000\",\"o\":\"2A201E6\",\"s\":\"_ZNSt17_Function_handlerIFvvEZN5mongo25launchServiceWorkerThreadESt8functionIS0_EEUlvE1_E9_M_invokeERKSt9_Any_data\",\"s+\":\"56\"},\\{\"a\":\"559B86499254\",\"b\":\"559B83A79000\",\"o\":\"2A20254\",\"s\":\"_ZN5mongo12_GLOBAL__N_17runFuncEPv\",\"s+\":\"14\"},\\{\"a\":\"7F336A2E9EA5\",\"b\":\"7F336A2E2000\",\"o\":\"7EA5\",\"s\":\"start_thread\",\"s+\":\"C5\"},\\{\"a\":\"7F336A0129FD\",\"b\":\"7F3369F14000\",\"o\":\"FE9FD\",\"s\":\"clone\",\"s+\":\"6D\"}],\"processInfo\":\\{\"mongodbVersion\":\"4.4.4\",\"gitVersion\":\"8db30a63db1a9d84bdcad0c83369623f708e0397\",\"compiledModules\":[],\"uname\":{\"sysname\":\"Linux\",\"release\":\"3.10.0-1160.15.2.el7.x86_64\",\"version\":\"#1 SMP Wed Feb 3 15:06:38 UTC 2021\",\"machine\":\"x86_64\"},\"somap\":[\\{\"b\":\"559B83A79000\",\"elfType\":3,\"buildId\":\"CC93F86C6D00CE717DB23676747D258B4027E066\"},\\{\"b\":\"7F336A2E2000\",\"path\":\"/lib64/libpthread.so.0\",\"elfType\":3,\"buildId\":\"E10CC8F2B932FC3DAEDA22F8DAC5EBB969524E5B\"},\\{\"b\":\"7F3369F14000\",\"path\":\"/lib64/libc.so.6\",\"elfType\":3,\"buildId\":\"7CD4A08C18C60E1E2EA1AEBB88C9379BD7289D38\"}]}}}} \n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>I tried also with the version 4.4.3 but have the same errors.</p>\n\n<p>Â </p>",
    "environment": "Vmware virtual machines Centos 7.9.\n<br/>\nReplica set 7 nodes ( six db and one arbiter).",
    "key": {
      "id": "1636862",
      "content": "SERVER-54876"
    },
    "summary": "Upgrade mongodb 4.4.4 from 4.2.12 failed",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "9",
      "content": "Done"
    },
    "assignee": {
      "username": "backlog-server-repl",
      "content": "Backlog - Replication Team"
    },
    "reporter": {
      "username": "nicola.battista89@gmail.com",
      "content": "Nicola Battista"
    },
    "labels": {
      "label": [
        "Upgrade/Downgrade",
        "post-rc0"
      ]
    },
    "created": "Tue, 2 Mar 2021 09:41:26 +0000",
    "updated": "Wed, 12 May 2021 16:06:12 +0000",
    "resolved": "Wed, 12 May 2021 16:02:21 +0000",
    "version": [
      "4.4.3",
      "4.4.4"
    ],
    "votes": "0",
    "watches": "11",
    "comments": {
      "comment": [
        {
          "id": "3642724",
          "author": "dmitry.agranat",
          "created": "Tue, 2 Mar 2021 18:49:44 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=nicola.battista89%40gmail.com\" class=\"user-hover\" rel=\"nicola.battista89@gmail.com\">Nicola Battista</a>, thank you for the report.</p>\n\n<p>For completeness, could you please compress and upload into <a href=\"https://10gen-httpsupload.s3.amazonaws.com/upload_forms/0d843f11-e3a3-4fa9-8e38-dd018c9fec07.html\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">this secure portal</a>:</p>\n<ul>\n\t<li>full <tt>mongoD</tt> logs and the <tt>$dbpath/diagnostic.data</tt> directory from the original primary covering the time before and during the upgrade?</li>\n\t<li>full <tt>mongoD</tt> logs and the <tt>$dbpath/diagnostic.data</tt> directory from the current primary (which was upgraded from 4.2.12 to 4.4.4 when it was a Secondary) covering the time before and during the upgrade?</li>\n</ul>\n\n\n<p>Thanks,<br/>\nDima</p>"
        },
        {
          "id": "3651553",
          "author": "dmitry.agranat",
          "created": "Mon, 8 Mar 2021 11:06:44 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=nicola.battista89%40gmail.com\" class=\"user-hover\" rel=\"nicola.battista89@gmail.com\">Nicola Battista</a>,</p>\n\n<p>We still need additional information to diagnose the problem. If this is still an issue for you, would you please compress and upload it into <a href=\"https://10gen-httpsupload.s3.amazonaws.com/upload_forms/0d843f11-e3a3-4fa9-8e38-dd018c9fec07.html\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">this secure portal</a>:</p>\n<ul>\n\t<li>full mongoD logs and the $dbpath/diagnostic.data directory from the original primary covering the time before and during the upgrade?</li>\n\t<li>full mongoD logs and the $dbpath/diagnostic.data directory from the current primary (which was upgraded from 4.2.12 to 4.4.4 when it was a Secondary) covering the time before and during the upgrade?</li>\n</ul>\n\n\n<p>Thanks,<br/>\nDima</p>"
        },
        {
          "id": "3651580",
          "author": "nicola.battista89@gmail.com",
          "created": "Mon, 8 Mar 2021 11:39:46 +0000",
          "content": "<p>Hi, Being a production database, tomorrow we will replicate the bug again and i'll send you the required logs. </p>\n\n<p>Thank you. </p>\n\n<p>Regards.</p>\n\n<p>Nicola</p>"
        },
        {
          "id": "3663766",
          "author": "nicola.battista89@gmail.com",
          "created": "Mon, 15 Mar 2021 10:03:34 +0000",
          "content": "<p>Hi Dmitry Agranat,</p>\n\n<p>I've sent youÂ  the files in the secure portal.</p>\n\n<p>the name files called : log_tp2-mongo00.tar.gz and log_tp2-mongo01.tar.gz</p>\n\n\n<p>Thank you.</p>\n\n<p>Regards</p>\n\n<p>Nicola</p>"
        },
        {
          "id": "3668372",
          "author": "dmitry.agranat",
          "created": "Wed, 17 Mar 2021 08:48:14 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=nicola.battista89%40gmail.com\" class=\"user-hover\" rel=\"nicola.battista89@gmail.com\">Nicola Battista</a>, the uploaded data only contains <tt>diagnostic.data</tt> archive but no <tt>mongod</tt> logs. Can you upload <tt>mongod</tt> logs covering the time of the reported event?</p>"
        },
        {
          "id": "3668380",
          "author": "nicola.battista89@gmail.com",
          "created": "Wed, 17 Mar 2021 09:02:41 +0000",
          "content": "<p>Hi,</p>\n\n<p>i've sent the mongodb logs called mongod_tp2_mongo00.log.gz and mongod_tp2_mongo01.log.gz.</p>\n\n<p>Thanks</p>\n\n<p>Regards</p>\n\n<p>Nicola</p>\n\n<p>Â </p>"
        },
        {
          "id": "3668668",
          "author": "dmitry.agranat",
          "created": "Wed, 17 Mar 2021 13:00:12 +0000",
          "content": "<p>Thanks <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=nicola.battista89%40gmail.com\" class=\"user-hover\" rel=\"nicola.battista89@gmail.com\">Nicola Battista</a> for uploading <tt>mongodb</tt> logs. I have another question, what is the current <tt>featureCompatibilityVersion</tt> on all 7 members of this replica set? To view the <tt>featureCompatibilityVersion</tt> for a mongod instance, run the following command on each mongod instance:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">db.adminCommand( { getParameter: 1, featureCompatibilityVersion: 1 } )\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>"
        },
        {
          "id": "3668883",
          "author": "nicola.battista89@gmail.com",
          "created": "Wed, 17 Mar 2021 14:15:54 +0000",
          "content": "<p>Hi,</p>\n\n<p>All nodes have this output : </p>\n\n<p> db.adminCommand( { getParameter: 1, featureCompatibilityVersion: 1 } )<br/>\n{<br/>\n \"featureCompatibilityVersion\" : </p>\n{\n \"version\" : \"4.2\"\n }\n<p>,<br/>\n \"ok\" : 1,<br/>\n \"$clusterTime\" : {<br/>\n \"clusterTime\" : Timestamp(1615988483, 684),<br/>\n \"signature\" : </p>\n{\n \"hash\" : BinData(0,\"EFp6D8mRrtb88nUTJ2zWtnX/SO0=\"),\n \"keyId\" : NumberLong(\"6919393090692186131\")\n }\n<p> },<br/>\n \"operationTime\" : Timestamp(1615988483, 683)</p>\n\n<p>Â </p>\n\n<p>Thanks</p>\n\n<p>Regards.</p>\n\n<p>Nicola</p>\n\n<p>Â </p>"
        },
        {
          "id": "3668910",
          "author": "dmitry.agranat",
          "created": "Wed, 17 Mar 2021 14:21:59 +0000",
          "content": "<p>Thanks <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=nicola.battista89%40gmail.com\" class=\"user-hover\" rel=\"nicola.battista89@gmail.com\">Nicola Battista</a>. We're assigning this ticket to the appropriate team to be further investigated. Updates will be posted on this ticket as they happen.</p>"
        },
        {
          "id": "3706421",
          "author": "matthew.russotto",
          "created": "Wed, 7 Apr 2021 19:59:40 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=dmitry.agranat\" class=\"user-hover\" rel=\"dmitry.agranat\">Dmitry Agranat</a><br/>\nI have been able to create a reproduction of this bug but it requires a somewhat unusual sequence of events and I would like to confirm if it was possible before going forward.</p>\n\n<p>What would be required is that the arbiter was at one point not an arbiter, and wrote some oplog entries with a walltime of 0 (which could have happened in some previous versions).  Then it became an arbiter; we would continue to send that last oplog time as the last durable optime of the arbiter, which would crash a 4.4 node.</p>\n\n<p>So to check this, I would like to see if we can get the last entry in the oplog collection (local.oplog.rs) on the arbiter.  There really shouldn't be such a collection; if there isn't, that isn't the problem.</p>"
        },
        {
          "id": "3706458",
          "author": "nicola.battista89@gmail.com",
          "created": "Wed, 7 Apr 2021 20:17:18 +0000",
          "content": "<p>Hi Matthew,</p>\n\n<p>On the Arbiter :</p>\n\n<p>xxx-mongodb:ARBITER&gt; use local<br/>\nswitched to db local<br/>\nxxx-mongodb:ARBITER&gt; show collections;<br/>\noplog.rs<br/>\nreplset.election<br/>\nreplset.minvalid<br/>\nreplset.oplogTruncateAfterPoint<br/>\nstartup_log<br/>\nsystem.replset<br/>\nsystem.rollback.id<br/>\nxxx-mongodb:ARBITER&gt; db.oplog.rs.find()<br/>\nxxx-mongodb:ARBITER&gt; <br/>\nxxx-mongodb:ARBITER&gt;</p>\n\n<p>Â </p>\n\n<p>Regards</p>\n\n<p>Nicola</p>"
        },
        {
          "id": "3754669",
          "author": "matthew.russotto",
          "created": "Tue, 4 May 2021 17:09:12 +0000",
          "content": "<p>It turns out we can get an optime/wall time which is a \"ghost in the machine\".  If an arbiter gets a durable optime/wall time at any point (which can happen if it goes into REMOVED while it has an oplog entry; there may be other bugs which can cause this), that optime will be passed to the other members of the set.  Even if the arbiter is subsequently restarted or even resynced, that durable optime will be greater than the (correct) null durable optime the arbiter is sending in heartbeats, so it will remain in the state of the other nodes in the system, which will pass it around using replSetUpdatePosition.</p>\n"
        },
        {
          "id": "3769459",
          "author": "matthew.russotto",
          "created": "Wed, 12 May 2021 16:02:21 +0000",
          "content": "<p>Investigation is complete; fix will be tracked as <a href=\"https://jira.mongodb.org/browse/SERVER-56619\" title=\"Arbiters should explicitly clear their durable optime\" class=\"issue-link\" data-issue-key=\"SERVER-56619\">SERVER-56619</a> and <a href=\"https://jira.mongodb.org/browse/SERVER-56620\" title=\"Nodes should explicitly clear arbiter durableOpTimeAndWalltime\" class=\"issue-link\" data-issue-key=\"SERVER-56620\"><del>SERVER-56620</del></a>.</p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10010",
          "name": "Duplicate",
          "inwardlinks": {
            "description": "is duplicated by",
            "issuelink": {
              "issuekey": {
                "id": "1681221",
                "content": "SERVER-56129"
              }
            }
          }
        },
        {
          "id": "10620",
          "name": "Issue split",
          "outwardlinks": {
            "description": "split to",
            "issuelink": [
              {
                "issuekey": {
                  "id": "1700715",
                  "content": "SERVER-56619"
                }
              },
              {
                "issuekey": {
                  "id": "1700728",
                  "content": "SERVER-56620"
                }
              }
            ]
          }
        }
      ]
    },
    "attachments": {
      "attachment": [
        {
          "id": "302465",
          "name": "mongod.log.rpmsave.gz",
          "size": "148455",
          "author": "nicola.battista89@gmail.com",
          "created": "Tue, 2 Mar 2021 09:38:11 +0000"
        },
        {
          "id": "302565",
          "name": "mongod.log.rpmsave.zip",
          "size": "148593",
          "author": "dmitry.agranat",
          "created": "Tue, 2 Mar 2021 18:09:48 +0000"
        }
      ]
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "13.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "18953",
              "content": "v4.4"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Tue, 2 Mar 2021 13:32:44 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        19 weeks, 1 day ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "matthew.russotto"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            19 weeks, 1 day ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "backlog-server-repl",
              "dmitry.agranat",
              "matthew.russotto",
              "nicola.battista89@gmail.com"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyxf0v:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyz353:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4853",
                "content": "Repl 2021-04-19"
              },
              {
                "id": "4858",
                "content": "Repl 2021-05-03"
              },
              {
                "id": "4859",
                "content": "Repl 2021-05-17"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyx19z:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-54878] Compact can log incorrect value for freedBytes",
    "link": "https://jira.mongodb.org/browse/SERVER-54878",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>When compacting a collection that is actively being written it is possible that the collection is larger at the completion of compaction than when it started; I assume that this is an expected outcome. In this case the operation returns a negative number for bytesFreed:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\"bytesFreed\" : -339968,</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\"ok\" : 1,</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\"$clusterTime\" : {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\t\"clusterTime\" : Timestamp(1614690587, 925),</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\t\"signature\" : {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\t\t\"hash\" : BinData(0,\"AAAAAAAAAAAAAAAAAAAAAAAAAAA=\"),</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\t\t\"keyId\" : NumberLong(0)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\t}</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t},</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\t\"operationTime\" : Timestamp(1614690587, 898)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>Whereas an absurdly large value is logged for freedBytes:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{\"t\":{\"$date\":\"2021-03-02T08:09:47.634-05:00\"},\"s\":\"I\",  \"c\":\"STORAGE\",  \"id\":20286,   \"ctx\":\"conn24\",\"msg\":\"Compact end\",\"attr\":{\"namespace\":\"test.c\",\"freedBytes\":18446744073709211648}}\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>It looks like compactCollection is incorrectly treating the negative signed value as unsigned when it logs it.</p>\n\n<p>Possibly both values should be logged as 0, since logging a negative value may make it appear that compact is malfunctioning.</p>\n\n<p>Also, it would be good to make the command result and the log statement consistent; suggest changing the log statement to use \"bytesFreed\" as it seems less likely that users will be affected by changing the log statement than by changing the command return.</p>\n",
    "environment": "",
    "key": {
      "id": "1636937",
      "content": "SERVER-54878"
    },
    "summary": "Compact can log incorrect value for freedBytes",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "gregory.wlodarek",
      "content": "Gregory Wlodarek"
    },
    "reporter": {
      "username": "bruce.lucas",
      "content": "Bruce Lucas"
    },
    "labels": {
      "label": "newgrad"
    },
    "created": "Tue, 2 Mar 2021 13:35:19 +0000",
    "updated": "Tue, 25 May 2021 22:14:05 +0000",
    "resolved": "Wed, 5 May 2021 23:26:36 +0000",
    "version": [
      "4.4.0",
      "4.4.4"
    ],
    "fixVersion": [
      "4.4.7",
      "5.0.0-rc0"
    ],
    "votes": "0",
    "watches": "7",
    "comments": {
      "comment": [
        {
          "id": "3757793",
          "author": "xgen-internal-githook",
          "created": "Wed, 5 May 2021 22:32:57 +0000",
          "content": "<p>Author:</p>\n{'name': 'Gregory Wlodarek', 'email': 'gregory.wlodarek@mongodb.com', 'username': 'GWlodarek'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-54878\" title=\"Compact can log incorrect value for freedBytes\" class=\"issue-link\" data-issue-key=\"SERVER-54878\"><del>SERVER-54878</del></a> Compact can log negative value for bytesFreed<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/c48ddf533938bc4ae85ae120b63c1de0ee290e26\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/c48ddf533938bc4ae85ae120b63c1de0ee290e26</a></p>"
        },
        {
          "id": "3763716",
          "author": "xgen-internal-githook",
          "created": "Mon, 10 May 2021 14:43:50 +0000",
          "content": "<p>Author:</p>\n{'name': 'Gregory Wlodarek', 'email': 'gregory.wlodarek@mongodb.com', 'username': 'GWlodarek'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-54878\" title=\"Compact can log incorrect value for freedBytes\" class=\"issue-link\" data-issue-key=\"SERVER-54878\"><del>SERVER-54878</del></a> Compact can log negative value for bytesFreed</p>\n\n<p>(cherry picked from commit c48ddf533938bc4ae85ae120b63c1de0ee290e26)<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/fd200767a125ac704ebd67630246eccfc2670120\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/fd200767a125ac704ebd67630246eccfc2670120</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": {
        "id": "10420",
        "name": "Backports",
        "outwardlinks": {
          "description": "backported by"
        }
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "18953",
              "content": "v4.4"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Wed, 5 May 2021 20:27:37 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        19 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-2057"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "vivian.ge"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            19 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "bruce.lucas",
              "xgen-internal-githook",
              "gregory.wlodarek"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyxfhj:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "0|i02nnb:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4828",
              "content": "Execution Team 2021-05-17"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyx1qn:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-55005] $elemMatch not matching all elements",
    "link": "https://jira.mongodb.org/browse/SERVER-55005",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p><em>$elemmatch</em> operator seems to be faulty when matching complex objects, the order of keys <b>inside</b> the object determines whether the object matches the query.</p>\n\n<p>Tested the behaviour on 3.6.8 and 4.4.4</p>",
    "environment": "",
    "key": {
      "id": "1641278",
      "content": "SERVER-55005"
    },
    "summary": "$elemMatch not matching all elements",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "9",
      "content": "Done"
    },
    "assignee": {
      "username": "eric.sedor",
      "content": "Eric Sedor"
    },
    "reporter": {
      "username": "shessmaster12@gmail.com",
      "content": "Nikita Mikhaylov"
    },
    "labels": "",
    "created": "Fri, 5 Mar 2021 20:36:24 +0000",
    "updated": "Fri, 21 May 2021 17:23:22 +0000",
    "resolved": "Fri, 21 May 2021 17:23:22 +0000",
    "version": "4.4.4",
    "component": "Aggregation Framework",
    "votes": "0",
    "watches": "4",
    "comments": {
      "comment": [
        {
          "id": "3652108",
          "author": "eric.sedor",
          "created": "Mon, 8 Mar 2021 15:41:47 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=shessmaster12%40gmail.com\" class=\"user-hover\" rel=\"shessmaster12@gmail.com\">Nikita Mikhaylov</a>,</p>\n\n<p>This looks correct for the syntax of querying whether or not \"bar\" is a subdocument. Order is considered when querying like this. You should be able to query for nested fields independent of their order using this syntax: <tt>db.table.findOne({\"foo\": {$elemMatch: {\"bar.b\":2,\"bar.a\":1</tt>})}}.</p>\n\n<p>Does this sound right?</p>\n\n<p>Eric</p>"
        },
        {
          "id": "3652184",
          "author": "JIRAUSER1258951",
          "created": "Mon, 8 Mar 2021 16:04:26 +0000",
          "content": "<p>Hi Eric,</p>\n<blockquote><p>This looks correct for the syntax of querying whether or not \"bar\" is a subdocument. Order is considered when querying like this.</p></blockquote>\n<p>I don't think I quite understand what you mean by 'This looks correct for the syntax of querying whether or not \"bar\" is a subdocument.'<br/>\n Is there any documentation/example that you can provide with a similar oddity? Is it a thing that is not specific to <tt>$elemMatch? Are all subdocument queries affected this way?</tt></p>\n<blockquote><p>You should be able to query for nested fields independent of their order using this syntax:Â </p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">db.table.findOne({</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"foo\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">: {$elemMatch:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"bar.b\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"bar.a\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}}})</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/></blockquote>\n<p>Although technically correct, unfortunately in my case, this will not be good enough, the collection is very big and without an index, it is not going to work.<br/>\n As far as I can see from query.explain, MongoDB will not be able to use the indexÂ <a href=\"https://gist.github.com/Noobgam/d46c583e0b173c4f8222bac32bab7b86\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://gist.github.com/Noobgam/d46c583e0b173c4f8222bac32bab7b86</a></p>"
        },
        {
          "id": "3652233",
          "author": "eric.sedor",
          "created": "Mon, 8 Mar 2021 16:24:36 +0000",
          "content": "<p><a href=\"https://docs.mongodb.com/manual/tutorial/query-embedded-documents/#match-an-embedded-nested-document\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">This documentation</a> describes the behavior you are seeing.</p>\n\n<p>For further discussion about how to make this work for your data, I'd like to ask you to post on the <a href=\"https://community.mongodb.com\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">MongoDB Developer Community Forums</a>. The community there can provide good guidance there on how to use elemMatch and also index for its use.</p>\n\n<p>If the discussion there leads you to suspect a bug in the MongoDB server, or to identify a specific improvement to request, then we'd want to discuss here in the SERVER project, which is for bugs and feature suggestions for the MongoDB server.</p>\n\n<p>Gratefully,<br/>\nEric</p>"
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 8 Mar 2021 15:41:47 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        28 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "eric.sedor"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            28 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "eric.sedor",
              "shessmaster12@gmail.com"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyy65b:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyzs5r:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">&gt; db.table.insert({_id: </span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">, foo: [{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"bar\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">: {a: </span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">, b : </span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}}]})</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">WriteResult({ </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"nInserted\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> : </span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> })</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">&gt; db.table.findOne({foo: {$elemMatch: {</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"bar\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> : {a:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">, b:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}}}})</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"_id\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> : </span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"foo\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> : [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                        </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"bar\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> : {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                                </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"a\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> : </span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                                </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"b\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> : </span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                        }</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                }</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        ]</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">&gt; db.table.findOne({foo: {$elemMatch: {</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"bar\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> : {b:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">, a:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}}}})</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">null</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyxsef:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-55027] Geospatial queries over GeoJSONs return wrong results",
    "link": "https://jira.mongodb.org/browse/SERVER-55027",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Hello everyone,</p>\n\n<p>I am currently working on a project, where I store polygons using the native GeoJSON format and then perform geospatial queries to locate these based on both $geoIntersects and $geoWithin operator. Indeed, everything seemed to be working fine.</p>\n\n<p>However, yesterday I discovered a strange behavior, which I am going to reproduce with an example.</p>",
    "environment": "",
    "key": {
      "id": "1643001",
      "content": "SERVER-55027"
    },
    "summary": "Geospatial queries over GeoJSONs return wrong results",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "9",
      "content": "Done"
    },
    "assignee": {
      "username": "edwin.zhou",
      "content": "Edwin Zhou"
    },
    "reporter": {
      "username": "paveldushev9@gmail.com",
      "content": "Pavel Antonov"
    },
    "labels": "",
    "created": "Mon, 8 Mar 2021 08:07:38 +0000",
    "updated": "Tue, 9 Mar 2021 07:17:40 +0000",
    "resolved": "Mon, 8 Mar 2021 21:02:57 +0000",
    "version": [
      "4.2.6",
      "4.4.4"
    ],
    "component": [
      "Geo",
      "Index Maintenance",
      "Querying"
    ],
    "votes": "0",
    "watches": "2",
    "comments": {
      "comment": [
        {
          "id": "3653097",
          "author": "JIRAUSER1257066",
          "created": "Mon, 8 Mar 2021 20:59:55 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=paveldushev9%40gmail.com\" class=\"user-hover\" rel=\"paveldushev9@gmail.com\">Pavel Antonov</a>,</p>\n\n<p>This behavior is caused by GeoJSON visualizers attempting to project orthogonal cartesian coordinates on a spherical shape. Many GeoJSON visualizers on the web plot their coordinates in this way, which can be misleading when trying to interpret how MongoDB queries GeoJSON. To view an accurate representation of how MongoDB queries GeoJSON, I recommend using <a href=\"https://geodndmap.mongodb.com/\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://geodndmap.mongodb.com/</a>. You can plot polygons by opening up your browser's developer tools, and running the following command:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">loadGeoJson({</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    type: \"Polygon\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    coordinates: [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995994802004, 63.4133067893598],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995994802004, 63.4025351187936],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [21.0236218074932, 63.4025351187936],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [21.0236218074932, 63.4133067893598],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995994802004, 63.4133067893598],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  })\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>where you can replace the object with a polygon of your choice.</p>\n\n<p>The polygons that you've provided in your reproduction will show up as follows: <br/>\n <span class=\"image-wrap\" style=\"\"><img src=\"https://jira.mongodb.org/secure/attachment/303852/303852_Screen+Shot+2021-03-08+at+3.45.46+PM.png\" width=\"100%\" style=\"border: 0px solid black\" /></span><br/>\nso we should expect the geospatial query result to include a set of the polygons that you otherwise wouldn't expect when querying using flat coordinates.</p>\n\n\n<p>Best,<br/>\nEdwin</p>"
        },
        {
          "id": "3653805",
          "author": "JIRAUSER1258960",
          "created": "Tue, 9 Mar 2021 07:17:40 +0000",
          "content": "<p>Hi Edwin,</p>\n\n<p>Thanks a lot for your detailed answer!</p>\n\n<p>Regards,</p>\n\n<p>Pavel</p>"
        }
      ]
    },
    "attachments": {
      "attachment": [
        {
          "id": "303852",
          "name": "Screen Shot 2021-03-08 at 3.45.46 PM.png",
          "size": "1077601",
          "author": "edwin.zhou",
          "created": "Mon, 8 Mar 2021 20:52:14 +0000"
        },
        {
          "id": "303711",
          "name": "image-2021-03-08-08-58-51-496.png",
          "size": "845301",
          "author": "paveldushev9@gmail.com",
          "created": "Mon, 8 Mar 2021 07:58:54 +0000"
        },
        {
          "id": "303710",
          "name": "image-2021-03-08-08-59-10-527.png",
          "size": "862664",
          "author": "paveldushev9@gmail.com",
          "created": "Mon, 8 Mar 2021 07:59:13 +0000"
        },
        {
          "id": "303709",
          "name": "image-2021-03-08-09-00-46-731.png",
          "size": "862092",
          "author": "paveldushev9@gmail.com",
          "created": "Mon, 8 Mar 2021 08:00:50 +0000"
        }
      ]
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 8 Mar 2021 20:59:55 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        28 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "paveldushev9@gmail.com"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            28 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "edwin.zhou",
              "paveldushev9@gmail.com"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyygrr:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz02l3:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>In the following example, I have some stored polygons located over the Baltic sea (between Sweden and Finland). Whenever I draw a polygon over the area where the polygons lie, they are correctly detected, namely all 609 objects are found. (see query and Screenshot_1)</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">db.geojsons.find({</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  location: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    $geoIntersects: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      $geometry: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        type: \"Polygon\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        coordinates: [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">          [ [17.314453, 61.648162], [17.314453, 64.434892], [26.542969, 64.434892], [26.542969, 61.648162], [17.314453, 61.648162], ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">});\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p><span class=\"image-wrap\" style=\"\"><img src=\"https://jira.mongodb.org/secure/attachment/303711/303711_image-2021-03-08-08-58-51-496.png\" width=\"100%\" style=\"border: 0px solid black\" /></span></p>\n\n<p>However, the strange behavior occurs when submitting a wider query polygon a little bit below (see Screenshot 2 and 3 with the corresponding queries).</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">db.geojsons.find({</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  location: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    $geoIntersects: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      $geometry: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        type: \"Polygon\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        coordinates: [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">          [ [-4.482422, 61.93895], [46.318359, 61.93895], [46.318359, 58.585436], [-4.482422, 58.585436], [-4.482422, 61.93895], ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">});\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p><span class=\"image-wrap\" style=\"\"><img src=\"https://jira.mongodb.org/secure/attachment/303710/303710_image-2021-03-08-08-59-10-527.png\" width=\"100%\" style=\"border: 0px solid black\" /></span></p>\n\n<p>As well as:</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">db.geojsons.find({</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  location: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    $geoIntersects: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      $geometry: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        type: \"Polygon\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        coordinates: [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">          [ [-4.482422, 61.93895], [36.318359, 61.93895], [36.318359, 58.585436], [-4.482422, 58.585436], [-4.482422, 61.93895], ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">});\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p><span class=\"image-wrap\" style=\"\"><img src=\"https://jira.mongodb.org/secure/attachment/303709/303709_image-2021-03-08-09-00-46-731.png\" width=\"100%\" style=\"border: 0px solid black\" /></span></p>\n\n<p>Â </p>\n\n<p>Hereby, I also attach three example GeoJSONs that I use:</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  type: \"Feature\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  location: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    type: \"Polygon\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    coordinates: [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995991794984, 63.4348461784678],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995991794984, 63.4240745387888],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [21.0236395339339, 63.4240745387888],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [21.0236395339339, 63.4348461784678],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995991794984, 63.4348461784678],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  properties: { acquisitionDate: ISODate(\"2017-01-13T09:10:31Z\") },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  _class: \"com.models.database.GeoJson\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">};</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  type: \"Feature\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  location: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    type: \"Polygon\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    coordinates: [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995993299129, 63.424076492091],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995993299129, 63.413304836971],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [21.0236306669723, 63.413304836971],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [21.0236306669723, 63.424076492091],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995993299129, 63.424076492091],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  properties: { acquisitionDate: ISODate(\"2017-01-13T09:10:31Z\") },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  _class: \"com.models.database.GeoJson\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">};</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  type: \"Feature\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  location: {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    type: \"Polygon\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    coordinates: [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      [</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995994802004, 63.4133067893598],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995994802004, 63.4025351187936],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [21.0236218074932, 63.4025351187936],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [21.0236218074932, 63.4133067893598],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">        [20.9995994802004, 63.4133067893598],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">      ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    ],</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  properties: { acquisitionDate: ISODate(\"2017-01-13T09:10:31Z\") },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">  _class: \"com.models.database.GeoJson\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">};\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>Â </p>\n\n<p>Thank you in advance!</p>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyy30v:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-55305] Retryable write may execute more than once if primary had transitioned through rollback to stable",
    "link": "https://jira.mongodb.org/browse/SERVER-55305",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p><a href=\"https://github.com/mongodb/mongo/blob/9d601c939bca2a4304dca2d3c8abd195c1f070af/src/mongo/db/repl/session_update_tracker.cpp#L217-L221\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">SessionUpdateTracker::&#95;updateSessionInfo()</a> is used by secondary oplog application to coalesce multiple updates to the same config.transactions record into a single update of the most recent retryable write statement. The changes from <a href=\"https://github.com/mongodb/mongo/commit/02020fa91c62562cb08f30c8130baf0791cc0a67\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">02020fa</a> as part of <a href=\"https://jira.mongodb.org/browse/SERVER-47844\" title=\"Update _setStableTimestampForStorage to set the stable timestamp without using the stable optime candidates set when EMRC=true\" class=\"issue-link\" data-issue-key=\"SERVER-47844\"><del>SERVER-47844</del></a> made it possible for a secondary to choose its stable&#95;timestamp as a majority-committed timestamp from <em>within</em> an oplog batch rather than always being on a batch boundary. The combination of these two can lead to the following sequence:</p>\n\n<ol>\n\t<li>During single batch of oplog application:\n\t<ol>\n\t\t<li>User data write for stmtId=0 at t=10.</li>\n\t\t<li>User data write for stmtId=1 at t=11.</li>\n\t\t<li>User data write for stmtId=2 at t=12.</li>\n\t\t<li>Session txn record write at t=12 with stmtId=2 as lastWriteOpTime.\n\t\t<ul>\n\t\t\t<li>In particular, no session txn record write for t=10 with stmtId=0 as lastWriteOpTime or for t=11 with stmtId=1 as lastWriteOpTime because they were coalseced by the SessionUpdateTracker.</li>\n\t\t</ul>\n\t\t</li>\n\t</ol>\n\t</li>\n\t<li>Rollback to stable timestamp t=10.</li>\n\t<li>The session txn record won't exist with stmtId=0 as lastWriteOpTime (because the write was entirely skipped by oplog application) despite the user data write for stmtId=0 being reflected on-disk. This allows stmtId=0 to be re-executed by this node if it became primary.</li>\n</ol>\n\n\n<h6><a name=\"Impacton4.0%2C4.2%2Cand4.4branches\"></a>Impact on 4.0, 4.2, and 4.4 branches</h6>\n\n<p>The stable optime candidates list prevents this issue for retryable inserts, updates, and deletes applied during secondary oplog application.</p>\n\n<p>However, retryable inserts on primaries also coalesce multiple updates to the same config.transactions record into a single update of the most recent retryable write statement. This happens through <a href=\"https://github.com/mongodb/mongo/blob/9d601c939bca2a4304dca2d3c8abd195c1f070af/src/mongo/db/op_observer_impl.cpp#L494\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">OpObserverImpl::onInserts() calling TransasctionParticipant::onWriteOpCompletedOnPrimary() once</a> for a batch of insert statements (aka vectored insert).</p>\n\n<ul>\n\t<li>Only retryable inserts are impacted.</li>\n\t<li>A retry attempt fails with a DuplicateKey error so long as the document wasn't deleted by another client in the meantime. (The document is re-inserted otherwise.)</li>\n</ul>\n\n\n<h6><a name=\"Impacton4.9andmasterbranches\"></a>Impact on 4.9 and master branches</h6>\n\n<p>The stable optime candidates list was removed and so this issue exists for retryable inserts, updates, and deletes applied during secondary oplog application. Retryable inserts on primaries continue to coalesce multiple updates to the same config.transactions record into a single update of the most recent retryable write statement.</p>\n\n<ul>\n\t<li>All of retryable inserts, updates, and deletes are impacted.</li>\n\t<li>A retry attempt for an update can execute more than once (e.g. double increment a counter).</li>\n</ul>\n\n\n<hr />\n\n<p>This issue was discovered while reasoning through why the atClusterTime read on config.transactions to fix <a href=\"https://jira.mongodb.org/browse/SERVER-54626\" title=\"Retryable writes may execute more than once in resharding if statements straddle the fetchTimestamp\" class=\"issue-link\" data-issue-key=\"SERVER-54626\"><del>SERVER-54626</del></a> was insufficient (hence <a href=\"https://jira.mongodb.org/browse/SERVER-55214\" title=\"Resharding txn cloner can miss config.transactions entry when fetching\" class=\"issue-link\" data-issue-key=\"SERVER-55214\"><del>SERVER-55214</del></a>). Shout out to <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=daniel.gottlieb\" class=\"user-hover\" rel=\"daniel.gottlieb\">Daniel Gottlieb</a> for the assist!</p>",
    "environment": "",
    "key": {
      "id": "1652773",
      "content": "SERVER-55305"
    },
    "summary": "Retryable write may execute more than once if primary had transitioned through rollback to stable",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "jason.chan",
      "content": "Jason Chan"
    },
    "reporter": {
      "username": "max.hirschhorn",
      "content": "Max Hirschhorn"
    },
    "labels": "",
    "created": "Thu, 18 Mar 2021 16:46:25 +0000",
    "updated": "Tue, 25 May 2021 22:08:47 +0000",
    "resolved": "Wed, 5 May 2021 13:10:43 +0000",
    "version": [
      "4.0.0",
      "4.2.0",
      "4.4.0"
    ],
    "fixVersion": "5.0.0-rc0",
    "component": [
      "Replication",
      "Sharding"
    ],
    "votes": "0",
    "watches": "18",
    "comments": {
      "comment": [
        {
          "id": "3687654",
          "author": "max.hirschhorn@10gen.com",
          "created": "Sat, 27 Mar 2021 14:58:50 +0000",
          "content": "<p>Reassigning this ticket to the Replication team based on the Slack discussion on what the proposed fix would look like. The idea is to add another step to the rollback&#45;to&#45;stable procedure to fix up the config.transactions collection. Putting the onus on rollback avoids any performance impact on the write path on primaries and secondaries. Note that the following proposal won't address how atClusterTime reads on a primary and secondary may return different results for the config.transactions collection. But it will fully address the implications of updates to a config.transactions record being coalesced into a single write on primaries and secondaries on retryable writes' exactly&#45;once semantics. (I have also filed <a href=\"https://jira.mongodb.org/browse/SERVER-55578\" title=\"Disallow atClusterTime reads on the config.transactions collection\" class=\"issue-link\" data-issue-key=\"SERVER-55578\"><del>SERVER-55578</del></a> to disallow atClusterTime reads on the config.transactions collection outside of resharding.)</p>\n\n<p>(Before rollback) A config.transactions record with a lastWriteOpTime.ts &gt; stable&#95;timestamp may have been coalesced with other updates to the config.transactions record where the user data write was timestamped &lt;= stable&#95;timestamp. Such a config.transactions record need to be fixed up because rollback&#45;to&#45;stable would effectively restore the config.transactions record to a timestamp from before the timestamp of the most recent user data write &lt;= stable&#95;timestamp.</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                 ST</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                 v</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+--------+-------|-------+</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|   A1   |   A2     A3   |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+------------------------+\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>Let's say A1, A2, and A3 are 3 statements performed in the same retryable write with A1 applied in its own batch and A2 and A3 applied in another batch together. At stable&#95;timestamp, the config.transactions record's lastWriteOpTime would be A1. This is because secondary oplog application only did a single write to the config.transactions record timestamped at A3. However, the user data write for A2 is reflected in the stable&#95;timestamp and therefore the config.transactions record's lastWriteOpTime must be updated to A2 to prevent the A2 statement from being re-executed if the node became primary.</p>\n\n<p>(After rolling back the data to stable&#95;timestamp and before truncating the oplog) The rollback&#45;to&#45;stable procedure would scan forward through the oplog starting from [stable&#95;timestamp + 1] (these are the oplog entries being rolled back):</p>\n<ul>\n\t<li>(a) If the oplog entry isn't for a retryable write, then skip over it. Notably, <a href=\"https://github.com/mongodb/mongo/blob/f05a11cfa32ff12c1110aa3657ec80a80de05dc3/src/mongo/db/repl/session_update_tracker.cpp#L174-L185\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">multi-statement transactions do not coalsece any writes to the config.transactions collection</a> and so any write to the config.transactions record from an earlier retryable write statement would have been timestamped &lt;= stable&#95;timestamp already.</li>\n\t<li>(b) If the oplog entry has a null prevOpTime (these are oplog entries which begin a retryable write), then skip over it.</li>\n\t<li>(c) If the oplog entry has prevOpTime &lt;= stable&#95;timestamp, then attempt to look up oplog entry:\n\t<ul>\n\t\t<li>(c.i) If the oplog entry is found, then restore the lastWriteOpTime, lastWriteDate, and txnNum from the {t, ts}, wall, and txnNumber of the oplog entry found via prevOpTime, respectively.</li>\n\t\t<li>(c.ii) If the oplog entry isn't found due to the oplog having been truncated before the stable&#95;timestamp (via the OplogCapMaintainerThread), then restore the lastWriteOpTime and txnNum from the prevOpTime and txnNumber of the oplog entry being scanned, respectively. A value for the lastWriteDate must be faked because the true value has already been truncated from the oplog. A lastWriteOpTime value that isn't present in the node's oplog would cause it to return IncompleteTransactionHistory as a primary if more statements for the txnNum retryable write were performed (thereby preventing multiple executing without being able to answer if the write had happened at all), while still allowing oplog application of more statements for a txnNum retryable write as a secondary (where the primary generating the oplog entries must still have had enough oplog to prove each retryable write statement executed only once).</li>\n\t</ul>\n\t</li>\n\t<li>(d) If the oplog entry has prevOpTime &gt; stable&#95;timestamp, then skip over it. These oplog entries are safe to ignore because case (c) above would have already handled updating the config.transactions record from an earlier scanned oplog entry.</li>\n</ul>\n\n\n<p>The correctness of case (b) requires also updating secondary oplog application to <a href=\"https://github.com/mongodb/mongo/blob/79951c2fe99ab96ca340ff5f51ba63f129643507/src/mongo/db/repl/session_update_tracker.cpp#L218\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">not coalesce multiple updates to the same config.transactions record across different txnNumbers</a>.</p>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                 ST</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">                 v</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+--------+-------|-------+</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|   A1   |   A2     B1   |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+------------------------+\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>Let's say instead of A3 as a third statement in the same retryable write, it was actually B1 of a single statement in the subsequent txnNumber. At stable&#95;timestamp, the config.transactions record's lastWriteOpTime would still be A1. The config.transactions record's lastWriteOpTime must still be updated to A2 to prevent the A2 statement from being re-executed if the node became primary. While a well&#45;behaved driver wouldn't knowingly resend the txnNumber for A2 again, retryable writes are also designed to protect against multiple execution of writes from a delayed message that had gotten stuck in a network switch. Moreover, replica sets are not guaranteed to retain oplog entries from before stable&#95;timestamp and so the rollback&#45;to&#45;stable procedure must be able to have the config.transactions collection become correct without knowing the true lastWriteOpTime and txnNum for the config.transactions record at stable&#95;timestamp from its oplog entries.</p>\n\n<p>Changing SessionUpdateTracker to not coalesce multiple updates to the same config.transactions record across different txnNumbers would mean that secondary oplog application did two writes to the config.transactions record - the first timestamped at A2 and the second timestamped at B1. There is no additional work for rollback&#45;to&#45;stable to do because there is already a write to the config.transactions record timestamped at A2. While patch builds as part of <a href=\"https://jira.mongodb.org/browse/SERVER-55214\" title=\"Resharding txn cloner can miss config.transactions entry when fetching\" class=\"issue-link\" data-issue-key=\"SERVER-55214\"><del>SERVER-55214</del></a> demonstrated a 70-80% performance regression for vectored insert when coalescing updates to the same config.transactions record was turned completely off, it is believed that multiple retryable writes on the same logical session are unlikely to end up in the same oplog batch and so there wouldn't be a noticeable performance impact. It may be valuable to test the SessionUpdateTracker change first in isolation and confirm this belief before starting work on the rest of the changes to the rollback&#45;to&#45;stable procedure.</p>"
        },
        {
          "id": "3742711",
          "author": "xgen-internal-githook",
          "created": "Tue, 27 Apr 2021 22:55:19 +0000",
          "content": "<p>Author:</p>\n{'name': 'Jason Chan', 'email': 'jason.chan@mongodb.com', 'username': 'jasonjhchan'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55305\" title=\"Retryable write may execute more than once if primary had transitioned through rollback to stable\" class=\"issue-link\" data-issue-key=\"SERVER-55305\"><del>SERVER-55305</del></a> Do not coalesce updates across different txnNumbers for retryableWrites<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/70a27d12642793fed2b05da116910799ea67c4f6\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/70a27d12642793fed2b05da116910799ea67c4f6</a></p>"
        },
        {
          "id": "3755485",
          "author": "xgen-internal-githook",
          "created": "Tue, 4 May 2021 22:29:34 +0000",
          "content": "<p>Author:</p>\n{'name': 'Jason Chan', 'email': 'jason.chan@mongodb.com', 'username': 'jasonjhchan'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55305\" title=\"Retryable write may execute more than once if primary had transitioned through rollback to stable\" class=\"issue-link\" data-issue-key=\"SERVER-55305\"><del>SERVER-55305</del></a> Add new step to replication rollback to restore the txns table to be consistent with the stableTimestamp<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/320e2d28396c250dfd69640dcf865dff50ea0b55\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/320e2d28396c250dfd69640dcf865dff50ea0b55</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10520",
          "name": "Problem/Incident",
          "outwardlinks": {
            "description": "causes"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": {
              "issuekey": {
                "id": "1660948",
                "content": "SERVER-55578"
              }
            }
          },
          "inwardlinks": {
            "description": "is related to",
            "issuelink": [
              {
                "issuekey": {
                  "id": "1628188",
                  "content": "SERVER-54626"
                }
              },
              {
                "issuekey": {
                  "id": "1649421",
                  "content": "SERVER-55214"
                }
              },
              {
                "issuekey": {
                  "id": "1700958",
                  "content": "SERVER-56631"
                }
              },
              {
                "issuekey": {
                  "id": "1708611",
                  "content": "SERVER-56796"
                }
              },
              {
                "issuekey": {
                  "id": "1333345",
                  "content": "SERVER-47844"
                }
              },
              {
                "issuekey": {
                  "id": "1333350",
                  "content": "SERVER-47845"
                }
              }
            ]
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "18953",
                "content": "v4.4"
              },
              {
                "key": "16775",
                "content": "v4.2"
              },
              {
                "key": "15640",
                "content": "v4.0"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Tue, 27 Apr 2021 14:15:11 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        20 weeks, 2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "vivian.ge"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            20 weeks, 2 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "70.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "jason.chan",
              "max.hirschhorn"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz04r3:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz1o33:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4853",
                "content": "Repl 2021-04-19"
              },
              {
                "id": "4858",
                "content": "Repl 2021-05-03"
              },
              {
                "id": "4859",
                "content": "Repl 2021-05-17"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hyzr07:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-55429] Abort migration earlier when receiver is not cleaning overlapping ranges",
    "link": "https://jira.mongodb.org/browse/SERVER-55429",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Currently, the migration source manager is waiting up to <a href=\"https://github.com/mongodb/mongo/blob/dbb6b0d496badf3e841ab41270e23cc0e4dc2ea4/src/mongo/db/s/migration_source_manager.cpp#L78\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">6 hours</a> for a receiver to <a href=\"https://github.com/mongodb/mongo/blob/dbb6b0d496badf3e841ab41270e23cc0e4dc2ea4/src/mongo/db/s/migration_destination_manager.cpp#L970-L971\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">finish cleaning overlapping range deletion tasks</a> before starting a move chunk.</p>\n\n<p>This can result in migrations being blocked on both sides for an unreasonable amount of time: a much smaller timeout must be used for this specific case, aborting the migration in case the range doesn't get cleared.</p>",
    "environment": "",
    "key": {
      "id": "1655650",
      "content": "SERVER-55429"
    },
    "summary": "Abort migration earlier when receiver is not cleaning overlapping ranges",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "marcos.grillo",
      "content": "Marcos JosÃ© Grillo Ramirez"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": {
      "label": "sharding-wfbf-day"
    },
    "created": "Mon, 22 Mar 2021 19:57:43 +0000",
    "updated": "Sat, 11 Sep 2021 00:04:12 +0000",
    "resolved": "Tue, 29 Jun 2021 15:04:40 +0000",
    "version": [
      "4.9.0",
      "4.0.23",
      "4.4.4",
      "4.2.13"
    ],
    "fixVersion": "5.1.0",
    "component": "Sharding",
    "votes": "0",
    "watches": "3",
    "comments": {
      "comment": [
        {
          "id": "3695751",
          "author": "kaloian.manassiev",
          "created": "Thu, 1 Apr 2021 10:02:55 +0000",
          "content": "<p>Consider having a timeout on the recipient on how long the cleanup stage, before starting to clone documents takes.</p>"
        },
        {
          "id": "3907663",
          "author": "xgen-internal-githook",
          "created": "Tue, 29 Jun 2021 14:55:11 +0000",
          "content": "<p>Author:</p>\n{'name': 'Marcos JosÃ© Grillo Ramirez', 'email': 'marcos.grillo@mongodb.com', 'username': 'm4nti5'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55429\" title=\"Abort migration earlier when receiver is not cleaning overlapping ranges\" class=\"issue-link\" data-issue-key=\"SERVER-55429\"><del>SERVER-55429</del></a> Add timeout to migrations when waiting for range deletions</p>\n\n<p>... on intersecting ranges<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/1874b32ad88abd2df8a42d6db0eb4c46549d38d7\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/1874b32ad88abd2df8a42d6db0eb4c46549d38d7</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10520",
          "name": "Problem/Incident",
          "outwardlinks": {
            "description": "causes",
            "issuelink": [
              {
                "issuekey": {
                  "id": "1807646",
                  "content": "SERVER-58240"
                }
              },
              {
                "issuekey": {
                  "id": "1833719",
                  "content": "SERVER-58905"
                }
              },
              {
                "issuekey": {
                  "id": "1861563",
                  "content": "SERVER-59636"
                }
              }
            ]
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "inwardlinks": {
            "description": "is related to"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 1 Apr 2021 10:02:55 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        12 weeks, 2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17052",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Downstream Changes Summary",
          "customfieldvalues": {
            "customfieldvalue": "During a migration, if a range deletion on the recipient shard of an intersecting chunk does not finish in 10 seconds, then the migration will be aborted. This behavior can be changed by increasing or lowering the new server parameter: receiveChunkWaitForRangeDeleterTimeoutM."
          }
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16942",
              "content": "Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            12 weeks, 2 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "kaloian.manassiev",
              "marcos.grillo",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz0mfr:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz6qwv:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4978",
                "content": "Sharding EMEA 2021-06-14"
              },
              {
                "id": "4979",
                "content": "Sharding EMEA 2021-06-28"
              }
            ]
          }
        },
        {
          "id": "customfield_17051",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Teams Impacted",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16943",
              "content": "Cloud"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz08ov:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-55552] Unreplicated collection idents can get dropped before the drop in the durable catalog becomes both checkpointed and older than the oldest timestamp",
    "link": "https://jira.mongodb.org/browse/SERVER-55552",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>For two-phase drops, unreplicated collection drops get added to the ident reaper without a timestamp. This causes the ident reaper to perform the actual table drop the next time it runs.</p>\n\n<p>For contrast, replicated collection drops do not have their table dropped until the drop timestamp becomes both checkpointed and older than the oldest timestamp. This is because earlier point-in-time reads may still be accessing the underlying table.</p>\n\n<p>This issue affects restoring backed-up data files where the table is dropped but the catalog entry still exists in the _mdb_catalog.</p>\n\n<p>Below is the order of operations that can cause a fatal assertion when restoring:</p>\n<ul>\n\t<li>Create two collections, sayÂ <b>A.B</b>Â andÂ <b>A.system.profile</b>Â (the system.profile collection is unreplicated by design)</li>\n\t<li>Perform a checkpoint at Timestamp(10)</li>\n\t<li>dropDatabase(<b>A</b>)\n\t<ul>\n\t\t<li>First, we drop all replicated collections (<b>A.B</b>Â in this case) and wait for it to replicate</li>\n\t\t<li>We defer the table drop to Timestamp(15)</li>\n\t\t<li>Then we drop all unreplicated collections (<b>A.system.profile</b>Â in this case)</li>\n\t\t<li>We defer the table drop to Timestamp(0)</li>\n\t</ul>\n\t</li>\n\t<li>The TimestampMonitor now runs and starts reaping drop-pending idents before Timestamp(5)\n\t<ul>\n\t\t<li>OurÂ <b>A.system.profile</b>Â table is now dropped viaÂ <tt>WT_SESSION::drop()</tt></li>\n\t\t<li>WiredTiger drops aren't transactional and they are always removed immediately</li>\n\t</ul>\n\t</li>\n\t<li>Open a backup cursor\n\t<ul>\n\t\t<li><b>checkpointTimestamp</b>Â is Timestamp(10)</li>\n\t\t<li>The backup cursor does not reportÂ <b>A.system.profile</b>Â as part of the backup</li>\n\t\t<li>The _mdb_catalog gets copied, which at Timestamp(10), theÂ <b>A.system.profile</b> collection still has an entry in the catalog</li>\n\t</ul>\n\t</li>\n\t<li>Close the backup cursor</li>\n\t<li>Startup a mongod on the copied files\n\t<ul>\n\t\t<li>While loading the catalog, it sees bothÂ <b>A.B</b>Â andÂ <b>A.system.profile</b>Â in the _mdb_catalog</li>\n\t\t<li>Fatal assertion: \"Version: Unable to find metadata for table:<b>A.system.profile</b>\"</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>This issue is not limited to theÂ <b>system.profile</b> collection only, but any unreplicated collection. An approach to resolve this could involve startup recovery ignoring the assertion for unreplicated collections and removing the durable catalog entry.</p>",
    "environment": "",
    "key": {
      "id": "1660353",
      "content": "SERVER-55552"
    },
    "summary": "Unreplicated collection idents can get dropped before the drop in the durable catalog becomes both checkpointed and older than the oldest timestamp",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "gregory.wlodarek",
      "content": "Gregory Wlodarek"
    },
    "reporter": {
      "username": "gregory.wlodarek",
      "content": "Gregory Wlodarek"
    },
    "labels": "",
    "created": "Fri, 26 Mar 2021 14:48:56 +0000",
    "updated": "Mon, 23 Aug 2021 20:50:20 +0000",
    "resolved": "Mon, 23 Aug 2021 20:50:20 +0000",
    "version": [
      "5.0.0",
      "4.4.4",
      "4.2.13"
    ],
    "fixVersion": "5.1.0",
    "component": "Storage",
    "votes": "0",
    "watches": "5",
    "comments": {
      "comment": [
        {
          "id": "4014232",
          "author": "xgen-internal-githook",
          "created": "Fri, 20 Aug 2021 19:19:34 +0000",
          "content": "<p>Author:</p>\n{'name': 'Gregory Wlodarek', 'email': 'gregory.wlodarek@mongodb.com', 'username': 'GWlodarek'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55552\" title=\"Unreplicated collection idents can get dropped before the drop in the durable catalog becomes both checkpointed and older than the oldest timestamp\" class=\"issue-link\" data-issue-key=\"SERVER-55552\"><del>SERVER-55552</del></a> Backup can copy the state where the collection ident is dropped but not the catalog entry for un-replicated collections<br/>\nBranch: <a href=\"https://jira.mongodb.org/browse/SERVER-55552\" title=\"Unreplicated collection idents can get dropped before the drop in the durable catalog becomes both checkpointed and older than the oldest timestamp\" class=\"issue-link\" data-issue-key=\"SERVER-55552\"><del>SERVER-55552</del></a><br/>\n<a href=\"https://github.com/10gen/mongo-enterprise-modules/commit/36b4133feabda83abc4a446a6cc533ab1c9a4240\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/10gen/mongo-enterprise-modules/commit/36b4133feabda83abc4a446a6cc533ab1c9a4240</a></p>"
        },
        {
          "id": "4018071",
          "author": "xgen-internal-githook",
          "created": "Mon, 23 Aug 2021 20:48:18 +0000",
          "content": "<p>Author:</p>\n{'name': 'Gregory Wlodarek', 'email': 'gregory.wlodarek@mongodb.com', 'username': 'GWlodarek'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55552\" title=\"Unreplicated collection idents can get dropped before the drop in the durable catalog becomes both checkpointed and older than the oldest timestamp\" class=\"issue-link\" data-issue-key=\"SERVER-55552\"><del>SERVER-55552</del></a> Backup can copy the state where the collection ident is dropped but not the catalog entry for un-replicated collections<br/>\nBranch: master<br/>\n<a href=\"https://github.com/10gen/mongo-enterprise-modules/commit/6b5b0664d9154f8179c51c9579779718254f9269\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/10gen/mongo-enterprise-modules/commit/6b5b0664d9154f8179c51c9579779718254f9269</a></p>"
        },
        {
          "id": "4018072",
          "author": "xgen-internal-githook",
          "created": "Mon, 23 Aug 2021 20:48:22 +0000",
          "content": "<p>Author:</p>\n{'name': 'Gregory Wlodarek', 'email': 'gregory.wlodarek@mongodb.com', 'username': 'GWlodarek'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55552\" title=\"Unreplicated collection idents can get dropped before the drop in the durable catalog becomes both checkpointed and older than the oldest timestamp\" class=\"issue-link\" data-issue-key=\"SERVER-55552\"><del>SERVER-55552</del></a> Backup can copy the state where the collection ident is dropped but not the catalog entry for un-replicated collections<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/95668c6ce7c0718bd2a2e44e0bbc557606d5172f\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/95668c6ce7c0718bd2a2e44e0bbc557606d5172f</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "inwardlinks": {
            "description": "is related to",
            "issuelink": {
              "issuekey": {
                "id": "1655268",
                "content": "SERVER-55397"
              }
            }
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "4.0"
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 20 Aug 2021 19:19:34 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        4 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "gregory.wlodarek"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            4 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "22.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "gregory.wlodarek"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz1ffb:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "0|i006l0:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4653",
                "content": "Execution Team 2021-04-19"
              },
              {
                "id": "4879",
                "content": "Execution Team 2021-06-14"
              },
              {
                "id": "5117",
                "content": "Execution Team 2021-08-23"
              },
              {
                "id": "5118",
                "content": "Execution Team 2021-09-06"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz11of:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-55742] Define kmipClientCertificateSelector config on windows/macOS",
    "link": "https://jira.mongodb.org/browse/SERVER-55742",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>TheÂ kmipClientCertificateSelector setting is incorrectly suppressed on windows and macOS platforms.Â  Make sure it gets declared correctly.</p>",
    "environment": "",
    "key": {
      "id": "1669692",
      "content": "SERVER-55742"
    },
    "summary": "Define kmipClientCertificateSelector config on windows/macOS",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "sara.golemon",
      "content": "Sara Golemon"
    },
    "reporter": {
      "username": "sara.golemon",
      "content": "Sara Golemon"
    },
    "labels": "",
    "created": "Fri, 2 Apr 2021 14:09:24 +0000",
    "updated": "Tue, 25 May 2021 22:10:37 +0000",
    "resolved": "Tue, 13 Apr 2021 23:25:09 +0000",
    "version": [
      "4.2.0",
      "4.4.0"
    ],
    "fixVersion": [
      "4.2.15",
      "4.4.7",
      "5.0.0-rc0"
    ],
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3716420",
          "author": "xgen-internal-githook",
          "created": "Tue, 13 Apr 2021 21:24:16 +0000",
          "content": "<p>Author:</p>\n{'name': 'Sara Golemon', 'email': 'sara.golemon@mongodb.com', 'username': 'sgolemon'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55742\" title=\"Define kmipClientCertificateSelector config on windows/macOS\" class=\"issue-link\" data-issue-key=\"SERVER-55742\"><del>SERVER-55742</del></a> Re-expose kmipClientCertificateSelector config option<br/>\nBranch: master<br/>\n<a href=\"https://github.com/10gen/mongo-enterprise-modules/commit/0ffde6d9dc7ba0626d0e9aa0222fb426663028cf\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/10gen/mongo-enterprise-modules/commit/0ffde6d9dc7ba0626d0e9aa0222fb426663028cf</a></p>"
        },
        {
          "id": "3763794",
          "author": "xgen-internal-githook",
          "created": "Mon, 10 May 2021 14:58:10 +0000",
          "content": "<p>Author:</p>\n{'name': 'Sara Golemon', 'email': 'sara.golemon@mongodb.com', 'username': 'sgolemon'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55742\" title=\"Define kmipClientCertificateSelector config on windows/macOS\" class=\"issue-link\" data-issue-key=\"SERVER-55742\"><del>SERVER-55742</del></a> Re-expose kmipClientCertificateSelector config option</p>\n\n<p>(cherry picked from commit 0ffde6d9dc7ba0626d0e9aa0222fb426663028cf)<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/10gen/mongo-enterprise-modules/commit/74b298e0db6712ed1597cf670cd23d2f42b0e25c\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/10gen/mongo-enterprise-modules/commit/74b298e0db6712ed1597cf670cd23d2f42b0e25c</a></p>"
        },
        {
          "id": "3763989",
          "author": "xgen-internal-githook",
          "created": "Mon, 10 May 2021 15:39:19 +0000",
          "content": "<p>Author:</p>\n{'name': 'Sara Golemon', 'email': 'sara.golemon@mongodb.com', 'username': 'sgolemon'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55742\" title=\"Define kmipClientCertificateSelector config on windows/macOS\" class=\"issue-link\" data-issue-key=\"SERVER-55742\"><del>SERVER-55742</del></a> Re-expose kmipClientCertificateSelector config option</p>\n\n<p>(cherry picked from commit 0ffde6d9dc7ba0626d0e9aa0222fb426663028cf)<br/>\nBranch: v4.2<br/>\n<a href=\"https://github.com/10gen/mongo-enterprise-modules/commit/9f84efffaca0dfdaf238d28becb8bcd60f55e115\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/10gen/mongo-enterprise-modules/commit/9f84efffaca0dfdaf238d28becb8bcd60f55e115</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10320",
          "name": "Documented",
          "inwardlinks": {
            "description": "is documented by",
            "issuelink": {
              "issuekey": {
                "id": "1679749",
                "content": "DOCS-14360"
              }
            }
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21266",
                "content": "v4.9"
              },
              {
                "key": "18953",
                "content": "v4.4"
              },
              {
                "key": "16775",
                "content": "v4.2"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10011",
              "content": "Minor Change"
            }
          }
        },
        {
          "id": "customfield_13552",
          "key": "com.go2group.jira.plugin.crm:crm_generic_field",
          "customfieldname": "Case",
          "customfieldvalues": {
            "customfieldvalue": "[5002K00000tRJjjQAG]"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Tue, 13 Apr 2021 21:24:16 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        19 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17052",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Downstream Changes Summary",
          "customfieldvalues": {
            "customfieldvalue": "Due to a bug, current releases of v4.2 and later were missing the kmipClientCertificateSelector setParameter.  This has been remedied on master, and fixes will be backported."
          }
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16942",
              "content": "Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "vivian.ge"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            19 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "sara.golemon"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz30i7:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz4fc7:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4793",
                "content": "Security 2021-04-05"
              },
              {
                "id": "4794",
                "content": "Security 2021-04-19"
              }
            ]
          }
        },
        {
          "id": "customfield_17051",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Teams Impacted",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16944",
              "content": "Docs"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz2mrb:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-55747] MongoDB 4.4.x on Windows service related log lines issues",
    "link": "https://jira.mongodb.org/browse/SERVER-55747",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The log lines generated when MongoDB 4.4.x starts a windows service or removes it have issues with the strings included (\"toUtf8String_serviceName\").</p>\n\n<p>For example:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{\"t\":{\"$date\":\"2020-12-17T16:12:57.631+00:00\"},\"s\":\"I\",  \"c\":\"CONTROL\",  \"id\":23316,   \"ctx\":\"main\",\"msg\":\"Trying to start Windows service '{toUtf8String_serviceName}'\",\"attr\":{\"toUtf8String_serviceName\":\"MongoDB\"}}\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>or:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{\"t\":{\"$date\":\"2021-03-26T05:32:09.899+00:00\"},\"s\":\"I\",  \"c\":\"CONTROL\",  \"id\":23307,   \"ctx\":\"main\",\"msg\":\"Trying to remove Windows service '{toUtf8String_serviceName}'\",\"attr\":{\"toUtf8String_serviceName\":\"MongoDB\"}}</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{\"t\":{\"$date\":\"2021-03-26T05:32:09.900+00:00\"},\"s\":\"I\",  \"c\":\"CONTROL\",  \"id\":23309,   \"ctx\":\"main\",\"msg\":\"Could not find a service named '{toUtf8String_serviceName}' to remove\",\"attr\":{\"toUtf8String_serviceName\":\"MongoDB\"}}\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p>Please review what's causing this.</p>",
    "environment": "",
    "key": {
      "id": "1669724",
      "content": "SERVER-55747"
    },
    "summary": "MongoDB 4.4.x on Windows service related log lines issues",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "mark.benvenuto",
      "content": "Mark Benvenuto"
    },
    "reporter": {
      "username": "emilio.scalise",
      "content": "Emilio Scalise"
    },
    "labels": "",
    "created": "Fri, 2 Apr 2021 14:53:57 +0000",
    "updated": "Tue, 25 May 2021 22:07:42 +0000",
    "resolved": "Fri, 14 May 2021 15:36:10 +0000",
    "version": "4.4.4",
    "fixVersion": "5.0.0-rc0",
    "component": "Logging",
    "votes": "0",
    "watches": "2",
    "comments": {
      "comment": [
        {
          "id": "3698644",
          "author": "bruce.lucas@10gen.com",
          "created": "Fri, 2 Apr 2021 14:56:36 +0000",
          "content": "<p>Looks like these were missed in the cleanup after the initial automated conversion from logv1 to logv2.</p>"
        },
        {
          "id": "3773879",
          "author": "xgen-internal-githook",
          "created": "Fri, 14 May 2021 15:10:30 +0000",
          "content": "<p>Author:</p>\n{'name': 'Mark Benvenuto', 'email': 'mark.benvenuto@mongodb.com', 'username': 'markbenvenuto'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55747\" title=\"MongoDB 4.4.x on Windows service related log lines issues\" class=\"issue-link\" data-issue-key=\"SERVER-55747\"><del>SERVER-55747</del></a> MongoDB 4.4.x on Windows service related log lines issues<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/b82d718c176b5d9837b9ec88cd9d1983e1e9820c\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/b82d718c176b5d9837b9ec88cd9d1983e1e9820c</a></p>"
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_13552",
          "key": "com.go2group.jira.plugin.crm:crm_generic_field",
          "customfieldname": "Case",
          "customfieldvalues": {
            "customfieldvalue": "[5002K00000uDdIEQA0]"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 2 Apr 2021 14:56:36 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        18 weeks, 6 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "vivian.ge"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            18 weeks, 6 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "bruce.lucas",
              "emilio.scalise",
              "xgen-internal-githook",
              "mark.benvenuto"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz30pb:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz4fin:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4832",
                "content": "Security 2021-05-03"
              },
              {
                "id": "4833",
                "content": "Security 2021-05-17"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz2myf:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-55764] Amazon Linux 2 tasks need distro updated",
    "link": "https://jira.mongodb.org/browse/SERVER-55764",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Several Amazon Linux 2 tasks on the 4.4 waterfallÂ were generated to run on the distro \"amazon-build\", and need to be changed toÂ \"amazon2-build\"</p>",
    "environment": "",
    "key": {
      "id": "1669880",
      "content": "SERVER-55764"
    },
    "summary": "Amazon Linux 2 tasks need distro updated",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "carlos.anaya",
      "content": "Carlos Anaya"
    },
    "reporter": {
      "username": "jonathan.streets",
      "content": "Jonathan Streets"
    },
    "labels": "",
    "created": "Fri, 2 Apr 2021 18:32:15 +0000",
    "updated": "Mon, 10 May 2021 14:49:05 +0000",
    "resolved": "Mon, 10 May 2021 14:49:05 +0000",
    "version": "4.4.4",
    "fixVersion": "4.4 Required",
    "component": "Build",
    "votes": "0",
    "watches": "2",
    "comments": {
      "comment": [
        {
          "id": "3732889",
          "author": "brooke.miller",
          "created": "Thu, 22 Apr 2021 13:32:59 +0000",
          "content": "<p>waiting to merge once 4.4 branch is unfrozen</p>"
        },
        {
          "id": "3763738",
          "author": "xgen-internal-githook",
          "created": "Mon, 10 May 2021 14:44:49 +0000",
          "content": "<p>Author:</p>\n{'name': 'Carlos Anaya', 'email': 'carlos.anaya@mongodb.com', 'username': 'carlos-anaya'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-55764\" title=\"Amazon Linux 2 tasks need distro updated\" class=\"issue-link\" data-issue-key=\"SERVER-55764\"><del>SERVER-55764</del></a> Update distro of Amazon Linux 2 task to amazon2-build<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/4b0a0bc3ec96d5c3b5862de7822e89755588d5df\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/4b0a0bc3ec96d5c3b5862de7822e89755588d5df</a></p>"
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Wed, 21 Apr 2021 16:04:24 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        19 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "carlos.anaya"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            19 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "brooke.miller",
              "carlos.anaya",
              "xgen-internal-githook",
              "jonathan.streets"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz31nr:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "0|i025b3:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4650",
                "content": "DAG 2021-05-03"
              },
              {
                "id": "4651",
                "content": "DAG 2021-05-17"
              }
            ]
          }
        },
        {
          "id": "customfield_10555",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:float",
          "customfieldname": "Story Points",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz2nwv:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-56151] MacOS immediately aborts mongod",
    "link": "https://jira.mongodb.org/browse/SERVER-56151",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>I installed MongDB following the steps described here:</p>\n\n<p><a href=\"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/</a></p>\n\n<p>Every time I try to run `mongod` in Terminal, executing `<a href=\"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/</a>` I get an abort message.</p>\n\n<p>Here below you find the crash report.</p>\n\n<p>â</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Process: mongod [1881] Path: /usr/local/Cellar/mongodb-community/4.4.4/bin/mongod Identifier: mongod Version: 0 Code Type: X86-64 (Native) Parent Process: zsh [1312] Responsible: Terminal [418] User ID: 501</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Date/Time: 2021-04-18 12:51:36.839 +0200 OS Version: macOS 11.2.3 (20D91) Report Version: 12 Bridge OS Version: 5.2 (18P4347) Anonymous UUID: 36F96353-BAC5-E51D-CA50-97AE95A5F2C7</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Time Awake Since Boot: 150 seconds</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">System Integrity Protection: disabled</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Crashed Thread: 0 initandlisten Dispatch queue: com.apple.main-thread</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Exception Type: EXC_CRASH (SIGABRT) Exception Codes: 0x0000000000000000, 0x0000000000000000 Exception Note: EXC_CORPSE_NOTIFY</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Application Specific Information: abort() called</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Thread 0 Crashed:: initandlisten Dispatch queue: com.apple.main-thread 0 libsystem_kernel.dylib  0x00007fff20449462 *pthread_kill + 10 1 libsystem_pthread.dylib  0x00007fff20477610 pthread_kill + 263 2 libsystem_c.dylib  0x00007fff203ca720 abort + 120 3 mongod  0x00000001102567e7 mongo::fassertFailedWithLocation(int, char const*, unsigned int) + 407 4 mongod  0x000000010e166d76 mongo::WiredTigerKVEngine::_openWiredTiger(std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::*1::allocator&lt;char&gt; &gt; const&amp;, std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::*1::allocator&lt;char&gt; &gt; const&amp;) + 2006 5 mongod  0x000000010e16420e mongo::WiredTigerKVEngine::WiredTigerKVEngine(std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::*1::allocator&lt;char&gt; &gt; const&amp;, std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::*1::allocator&lt;char&gt; &gt; const&amp;, mongo::ClockSource*, std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::*1::allocator&lt;char&gt; &gt; const&amp;, unsigned long, unsigned long, bool, bool, bool, bool) + 5486 6 mongod  0x000000010e168bc8 mongo::WiredTigerKVEngine::WiredTigerKVEngine(std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::*1::allocator&lt;char&gt; &gt; const&amp;, std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::*1::allocator&lt;char&gt; &gt; const&amp;, mongo::ClockSource_, std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, unsigned long, unsigned long, bool, bool, bool, bool) + 56 7 mongod  0x000000010e142197 mongo::(anonymous namespace)::WiredTigerFactory::create(mongo::StorageGlobalParams const&amp;, mongo::StorageEngineLockFile const_) const + 823 8 mongod  0x000000010ebd35ea mongo::initializeStorageEngine(mongo::ServiceContext_, mongo::StorageEngineInitFlags) + 1914 9 mongod  0x000000010e0fe3c3 mongo::(anonymous namespace)::_initAndListen(mongo::ServiceContext_, int) + 1123 10 mongod  0x000000010e0f3fda mongo::(anonymous namespace)::mongoDbMain(int, char*, char*) + 5594 11 mongod  0x000000010e0f29f9 main + 9 12 libdyld.dylib  0x00007fff20492621 start + 1</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Thread 1:: SignalHandler 0 libsystem_kernel.dylib  0x00007fff2044ba1e *sigwait + 10 1 libsystem_pthread.dylib  0x00007fff20478033 sigwait + 29 2 mongod  0x000000010ea7d27c mongo::(anonymous namespace)::signalProcessingThread(mongo::LogFileStatus) + 236 3 mongod  0x000000010ea7da59 void* std::*1::*thread_proxy&lt;std::*1::tuple&lt;std::*1::unique_ptr&lt;std::*1::*thread_struct, std::*1::default_delete[std::__1::__thread_struct] &gt;, mongo::stdx::thread::thread&lt;void (_)(mongo::LogFileStatus), mongo::LogFileStatus&amp;, 0&gt;(void (_)(mongo::LogFileStatus), mongo::LogFileStatus&amp;)::'lambda'()&gt; &gt;(void*) + 57 4 libsystem_pthread.dylib  0x00007fff20477950 _pthread_start + 224 5 libsystem_pthread.dylib  0x00007fff2047347b thread_start + 15</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Thread 2:: BackgroundThreadClockSource 0 libsystem_kernel.dylib  0x00007fff204458e2 *psynch_cvwait + 10 1 libsystem_pthread.dylib  0x00007fff20477e6f _pthread_cond_wait + 1254 2 libc++.1.dylib  0x00007fff203decf2 std::*1::condition_variable::wait(std::*1::unique_lock&lt;std::*1::mutex&gt;&amp;) + 18 3 mongod  0x000000010f01bce2 void std::*1::condition_variable_any::wait&lt;std::*1::unique_lock[std::__1::mutex] &gt;(std::*1::unique_lock&lt;std::*1::mutex&gt;&amp;) + 98 4 mongod  0x0000000110126558 void* std::*1::*thread_proxy&lt;std::*1::tuple&lt;std::*1::unique_ptr&lt;std::*1::*thread_struct, std::*1::default_delete&lt;std::*1::__thread_struct&gt; &gt;, mongo::stdx::thread::thread&lt;mongo::BackgroundThreadClockSource::_startTimerThread()::$_0, 0&gt;(mongo::BackgroundThreadClockSource::_startTimerThread()::$_0)::'lambda'()&gt; &gt;(void*) + 232 5 libsystem_pthread.dylib  0x00007fff20477950 _pthread_start + 224 6 libsystem_pthread.dylib  0x00007fff2047347b thread_start + 15</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Thread 3:: OCSPManagerHTTP-0 0 libsystem_kernel.dylib  0x00007fff204458e2 *psynch_cvwait + 10 1 libsystem_pthread.dylib  0x00007fff20477e6f _pthread_cond_wait + 1254 2 libc++.1.dylib  0x00007fff203decf2 std::*1::condition_variable::wait(std::*1::unique_lock&lt;std::*1::mutex&gt;&amp;) + 18 3 mongod  0x000000010e186223 void std::*1::condition_variable_any::wait&lt;std::*1::unique_lock[mongo::latch_detail::Latch] &gt;(std::*1::unique_lock[mongo::latch_detail::Latch]&amp;) + 99 4 mongod  0x000000010fde624f mongo::ThreadPool::_consumeTasks() + 783 5 mongod  0x000000010fde5dff mongo::ThreadPool::_workerThreadBody(mongo::ThreadPool*, std::*1::basic_string&lt;char, std::*1::char_traits&lt;char&gt;, std::*1::allocator&lt;char&gt; &gt; const&amp;) + 319 6 mongod  0x000000010fde94de void* std::*1::*thread_proxy&lt;std::*1::tuple&lt;std::*1::unique_ptr&lt;std::*1::*thread_struct, std::*1::default_delete&lt;std::*1::__thread_struct&gt; &gt;, mongo::stdx::thread::thread&lt;mongo::ThreadPool::_startWorkerThread_inlock()::$_17, 0&gt;(mongo::ThreadPool::_startWorkerThread_inlock()::$_17)::'lambda'()&gt; &gt;(void*) + 62 7 libsystem_pthread.dylib  0x00007fff20477950 _pthread_start + 224 8 libsystem_pthread.dylib  0x00007fff2047347b thread_start + 15</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Thread 4:: FlowControlRefresher 0 libsystem_kernel.dylib  0x00007fff204458e2 *psynch_cvwait + 10 1 libsystem_pthread.dylib  0x00007fff20477e6f _pthread_cond_wait + 1254 2 libc++.1.dylib  0x00007fff203ded83 std::*1::condition_variable::*do_timed_wait(std::*1::unique_lock[std::__1::mutex]&amp;, std::*1::chrono::time_point&lt;std::*1::chrono::system_clock, std::*1::chrono::duration&lt;long long, std::*1::ratio&lt;1l, 1000000000l&gt; &gt; &gt;) + 93 3 mongod  0x000000010e179009 std::*1::cv_status std::*1::condition_variable::wait_until&lt;std::*1::chrono::system_clock, std::*1::chrono::duration&lt;long long, std::*1::ratio&lt;1l, 1000000l&gt; &gt; &gt;(std::*1::unique_lock[std::__1::mutex]&amp;, std::*1::chrono::time_point&lt;std::*1::chrono::system_clock, std::*1::chrono::duration&lt;long long, std::*1::ratio&lt;1l, 1000000l&gt; &gt; &gt; const&amp;) + 121 4 mongod  0x000000010e178e50 std::*1::cv_status std::*1::condition_variable_any::wait_until&lt;mongo::BasicLockableAdapter, std::*1::chrono::system_clock, std::*1::chrono::duration&lt;long long, std::*1::ratio&lt;1l, 1000000l&gt; &gt; &gt;(mongo::BasicLockableAdapter&amp;, std::*1::chrono::time_point&lt;std::*1::chrono::system_clock, std::*1::chrono::duration&lt;long long, std::*1::ratio&lt;1l, 1000000l&gt; &gt; &gt; const&amp;) + 96 5 mongod  0x0000000110126ab3 mongo::ClockSource::waitForConditionUntil(mongo::stdx::condition_variable&amp;, mongo::BasicLockableAdapter, mongo::Date_t, mongo::Waitable_) + 787 6 mongod  0x000000010e80d424 void_ std::*1::*thread_proxy&lt;std::*1::tuple&lt;std::*1::unique_ptr&lt;std::*1::*thread_struct, std::*1::default_delete[std::__1::__thread_struct] &gt;, mongo::stdx::thread::thread&lt;mongo::PeriodicRunnerImpl::PeriodicJobImpl::_run()::$_0, 0&gt;(mongo::PeriodicRunnerImpl::PeriodicJobImpl::_run()::$_0)::'lambda'()&gt; &gt;(void*) + 612 7 libsystem_pthread.dylib  0x00007fff20477950 _pthread_start + 224 8 libsystem_pthread.dylib  0x00007fff2047347b thread_start + 15</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Thread 0 crashed with X86 Thread State (64-bit):  rax: 0x0000000000000000 rbx: 0x000000011e9d1e00 rcx: 0x00007ffee1b0cf78 rdx: 0x0000000000000000  rdi: 0x0000000000000307 rsi: 0x0000000000000006 rbp: 0x00007ffee1b0cfa0 rsp: 0x00007ffee1b0cf78  r8: 0x00000001122e2a00 r9: 0x00007fd7e5500000 r10: 0x000000011e9d1e00 r11: 0x0000000000000246  r12: 0x0000000000000307 r13: 0x00000001110f84f0 r14: 0x0000000000000006 r15: 0x0000000000000016  rip: 0x00007fff20449462 rfl: 0x0000000000000246 cr2: 0x0000000110e937b8</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Logical CPU: 0 Error Code: 0x020000b8 Trap Number: 133</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">External Modification Summary:  Calls made by other processes targeting this process:  task_for_pid: 0  thread_create: 0  thread_set_state: 0  Calls made by this process:  task_for_pid: 0  thread_create: 0  thread_set_state: 0  Calls made by all processes on this machine:  task_for_pid: 172  thread_create: 0  thread_set_state: 0</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">VM Region Summary: ReadOnly portion of Libraries: Total=639.9M resident=0K(0%) swapped_out_or_unallocated=639.9M(100%) Writable regions: Total=90.0M written=0K(0%) resident=0K(0%) swapped_out=0K(0%) unallocated=90.0M(100%)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   VIRTUAL Â  REGION </span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">REGION TYPE SIZE COUNT (non-coalesced)  =========== ======= =======  Activity Tracing 256K 1  Kernel Alloc Once 8K 1  MALLOC 79.2M 23  MALLOC guard page 16K 4  STACK GUARD 56.0M 5  Stack 10.0M 5  VM_ALLOCATE 8K 2  *DATA 4451K 157 * DATA_CONST 6358K 99  *DATA_DIRTY 291K 60 * LINKEDIT 507.2M 4  *OBJC_RO 60.5M 1 * OBJC_RW 2449K 2  *TEXT 132.8M 161 * UNICODE 588K 1  shared memory 8K 2  =========== ======= =======  TOTAL 859.8M 528 </span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Model: MacBookPro15,1, BootROM 1554.80.3.0.0 (iBridge: 18.16.14347.0.0,0), 6 processors, 6-Core Intel Core i7, 2,6 GHz, 16 GB, SMC  Graphics: kHW_IntelUHDGraphics630Item, Intel UHD Graphics 630, spdisplays_builtin Graphics: kHW_AMDRadeonPro560XItem, Radeon Pro 560X, spdisplays_pcie_device, 4 GB Memory Module: BANK 0/ChannelA-DIMM0, 8 GB, DDR4, 2400 MHz, Micron, 8ATF1G64HZ-2G6E1 Memory Module: BANK 2/ChannelB-DIMM0, 8 GB, DDR4, 2400 MHz, Micron, 8ATF1G64HZ-2G6E1 AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0x7BF), wl0: Sep 11 2020 16:57:49 version 9.30.440.2.32.5.61 FWID 01-129bddb Bluetooth: Version 8.0.3d9, 3 services, 27 devices, 1 incoming serial ports Network Service: Wi-Fi, AirPort, en0 USB Device: USB 3.1 Bus USB Device: Apple T2 Bus USB Device: Touch Bar Backlight USB Device: Touch Bar Display USB Device: Apple Internal Keyboard / Trackpad USB Device: Headset USB Device: Ambient Light Sensor USB Device: FaceTime HD Camera (Built-in) USB Device: Apple T2 Controller Thunderbolt Bus: MacBook Pro, Apple Inc., 47.4 Thunderbolt Bus: MacBook Pro, Apple Inc., 47.4\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>",
    "environment": "",
    "key": {
      "id": "1682335",
      "content": "SERVER-56151"
    },
    "summary": "MacOS immediately aborts mongod",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "9",
      "content": "Done"
    },
    "assignee": {
      "username": "edwin.zhou",
      "content": "Edwin Zhou"
    },
    "reporter": {
      "username": "alessandro@zanardi.org",
      "content": "Alessandro Zanardi"
    },
    "labels": "",
    "created": "Sun, 18 Apr 2021 11:10:16 +0000",
    "updated": "Fri, 7 May 2021 15:37:17 +0000",
    "resolved": "Tue, 4 May 2021 21:28:32 +0000",
    "version": "4.4.4",
    "component": "Shell",
    "votes": "0",
    "watches": "4",
    "comments": {
      "comment": [
        {
          "id": "3738841",
          "author": "JIRAUSER1257066",
          "created": "Mon, 26 Apr 2021 15:34:01 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=alessandro%40zanardi.org\" class=\"user-hover\" rel=\"alessandro@zanardi.org\">Alessandro Zanardi</a>,</p>\n\n<p>Can you provide the mongod.log file that covers this crash?</p>\n\n<p>Best,<br/>\nEdwin</p>"
        },
        {
          "id": "3739159",
          "author": "JIRAUSER1259516",
          "created": "Mon, 26 Apr 2021 17:10:04 +0000",
          "content": "<p>HiÂ @Edwin Zhou,</p>\n\n<p>I had to do a complete reset, felete the whole folder, and re-install Mongo.</p>\n\n<p>So I'm afraid the file was lost. Anyways I'll double check it for you.</p>\n\n<p>Considering I followed the instructions <a href=\"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">here</a>, could you tell me on OSX with a Hombrew installation where the file should be located?</p>\n\n<p>Thanks,</p>\n\n<p>Â  Alex</p>\n\n<p>Â </p>\n\n<p>p.s. for some weird reason the user mentions (like your name at the top of my message) don't seem to be working..</p>"
        },
        {
          "id": "3739424",
          "author": "JIRAUSER1257066",
          "created": "Mon, 26 Apr 2021 18:36:43 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=alessandro%40zanardi.org\" class=\"user-hover\" rel=\"alessandro@zanardi.org\">Alessandro Zanardi</a>,</p>\n\n<p>In the documentation you linked, you will be able to find the directories where the logs are stored at the end of the <a href=\"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/#installing-mongodb-4.4-edition-edition\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">Installing MongoDB 4.4 Community Edition</a> section.</p>\n\n<p>Best,<br/>\nEdwin</p>"
        },
        {
          "id": "3739464",
          "author": "JIRAUSER1259516",
          "created": "Mon, 26 Apr 2021 18:53:22 +0000",
          "content": "<p>Hi Edwin,</p>\n\n<p>The directory indicated in the docs, on my computer, only contains \"mongo.log\" andÂ \"output.log\".</p>\n\n<p>But you requested \"mongod.log\".</p>\n\n<p>How would you like me to proceed?</p>\n\n<p>Best,</p>\n\n<p>Â  Alex</p>"
        },
        {
          "id": "3739734",
          "author": "JIRAUSER1257066",
          "created": "Mon, 26 Apr 2021 20:13:22 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=alessandro%40zanardi.org\" class=\"user-hover\" rel=\"alessandro@zanardi.org\">Alessandro Zanardi</a>,</p>\n\n<p>I apologize for my lack of clarity. Please provide the mongo.log file.</p>\n\n<p>Best,<br/>\nEdwin</p>"
        },
        {
          "id": "3748424",
          "author": "JIRAUSER1259516",
          "created": "Fri, 30 Apr 2021 10:59:59 +0000",
          "content": "<p>Hi @Edwin,</p>\n\n<p>Here you have it:</p>\n\n<p><span class=\"nobr\"><a href=\"https://jira.mongodb.org/secure/attachment/312667/312667_mongo.log\" title=\"mongo.log attached to SERVER-56151\">mongo.log<sup><img class=\"rendericon\" src=\"https://jira.mongodb.org/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span></p>\n\n<p>Thanks for looking into this!</p>"
        },
        {
          "id": "3752420",
          "author": "JIRAUSER1257066",
          "created": "Mon, 3 May 2021 17:38:19 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=alessandro%40zanardi.org\" class=\"user-hover\" rel=\"alessandro@zanardi.org\">Alessandro Zanardi</a>,</p>\n\n<p>Thank you for providing the log files as requested. After reviewing the logs, it appears that the first time you ran MongoDB was in 2019 and was on version 4.0.4. In 2021, you attempt to run MongoDB v4.4 on the same dbPath. Note that upgrading from version v4.0 to v4.4 will first require an intermediate upgrade to v4.2.</p>\n\n<p>Can you first try to use MongoDB 4.0 on the existing dbPath? If it doesn't start, please attach the same mongo.log file covering the startup and the following crash.</p>\n\n<p>If it does start, I recommend following the <a href=\"https://docs.mongodb.com/manual/release-notes/4.2-upgrade-standalone/\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">upgrade steps to MongoDB v4.2</a>, and from there, <a href=\"https://docs.mongodb.com/manual/release-notes/4.4-upgrade-standalone/\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">to MongoDB v4.4</a>.</p>\n\n<p>Best,</p>\n\n<p>Edwin</p>\n"
        },
        {
          "id": "3753793",
          "author": "JIRAUSER1259516",
          "created": "Tue, 4 May 2021 12:13:05 +0000",
          "content": "<p>Hi Edwin,</p>\n\n<p>The issue is already fixed on my side. I had to completely remove MongoDB, anywhere on the system, and reinstall it. After that, it worked.</p>\n\n<p>Even so, it'd be much better for future users who have the same issue if MongoDB printed a useful error message, instead of getting an obscure abort log from Apple.</p>\n\n<p>Maybe the dev team could look into it?</p>\n\n<p>Cheers,</p>\n\n<p>Â  Â Alex</p>"
        },
        {
          "id": "3755376",
          "author": "JIRAUSER1257066",
          "created": "Tue, 4 May 2021 21:28:23 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=alessandro%40zanardi.org\" class=\"user-hover\" rel=\"alessandro@zanardi.org\">Alessandro Zanardi</a>,</p>\n\n<p>We're happy to hear that you've been able to resolve the issue by performing a fresh install of MongoDB!</p>\n\n<p>When an unexpected behavior occurs with MongoDB server, the events will be logged to the MongoDB server logs. Unfortunately, Apple's crash report doesn't provide much helpful information regarding crashes related to MongoDB. We believe that the events described in the log files were made clear, and we don't think there are any necessary improvements to be made here. </p>\n\n<p>That being said, we appreciate the quick turnaround in providing us the information needed to help resolve this issue.</p>\n\n<p>Gratefully,<br/>\nEdwin</p>"
        },
        {
          "id": "3761134",
          "author": "JIRAUSER1259516",
          "created": "Fri, 7 May 2021 15:37:17 +0000",
          "content": "<p>Hi Edwin,</p>\n\n<p>Regarding this part:</p>\n\n<p><cite>We believe that the events described in the log files were made clear, and we don't think there are any necessary improvements to be made here.</cite></p>\n\n<p>I think when the MongoDB server crashes, besides logging in the background, I think it would be useful to also show an error message in the Terminal, so that the user can react to it.</p>\n\n<p>Can you please pass this info to the dev team?</p>\n\n<p>Thanks!</p>\n\n<p>Â  Alex</p>"
        }
      ]
    },
    "attachments": {
      "attachment": {
        "id": "312667",
        "name": "mongo.log",
        "size": "357493",
        "author": "alessandro@zanardi.org",
        "created": "Fri, 30 Apr 2021 10:59:22 +0000"
      }
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "10.0"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 26 Apr 2021 15:34:01 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        19 weeks, 6 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "alessandro@zanardi.org"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            19 weeks, 6 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "alessandro@zanardi.org",
              "edwin.zhou"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz551b:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz6fif:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>Please see the \"description\" field with the full crash report.</p>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz4raf:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-56179] Caida de nodos secundarios en MongoDB ReplicaSet",
    "link": "https://jira.mongodb.org/browse/SERVER-56179",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Â Buenas tardes,</p>\n\n<p>Se ha estado presentando caÃ­das de nodos en un replicaSet configurado con MongoDB Community 4.4.4.</p>\n\n<p>Se ha generado estos archivos .MDMP producto de las caÃ­das de los nodos.</p>\n\n<p>Adicionalmente se adjunta el archivo de configuraciÃ³n para uno de los nodos y en los otros solo se cambia el puerto y la ruta de los archivos de la BD y del log.</p>\n\n<p>Â </p>\n\n<p>TambiÃ©n quisiera consultar que desde estas ultimas versiones el log File de los nodos crece muy rÃ¡pido y eso dificulta ver el motivo de la cada, por mas que se ha configurado en 0 el systemlog en el archivo de configuraciÃ³n, sigue generando archivos log de gran tamaÃ±o.</p>\n\n<p>Â </p>\n\n<p>Quedo atento a sus comentarios.</p>\n\n<p>Saludos cordiales,</p>\n\n<p>Â </p>",
    "environment": "",
    "key": {
      "id": "1682990",
      "content": "SERVER-56179"
    },
    "summary": "Caida de nodos secundarios en MongoDB ReplicaSet",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "9",
      "content": "Done"
    },
    "assignee": {
      "username": "eric.sedor",
      "content": "Eric Sedor"
    },
    "reporter": {
      "username": "faaquinoa@gmail.com",
      "content": "Frank Alejandro Aquino Altuna"
    },
    "labels": "",
    "created": "Mon, 19 Apr 2021 18:15:57 +0000",
    "updated": "Thu, 15 Jul 2021 15:43:21 +0000",
    "resolved": "Thu, 15 Jul 2021 15:43:21 +0000",
    "version": "4.4.4",
    "component": "WiredTiger",
    "votes": "0",
    "watches": "4",
    "comments": {
      "comment": [
        {
          "id": "3742354",
          "author": "eric.sedor",
          "created": "Tue, 27 Apr 2021 20:14:40 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=faaquinoa%40gmail.com\" class=\"user-hover\" rel=\"faaquinoa@gmail.com\">Frank Alejandro Aquino Altuna</a>, thanks for your report.</p>\n\n<p>Would you please archive (tar or zip) the mongod.log files and the <tt>$dbpath/diagnostic.data</tt> directory (the contents are described <a href=\"https://docs.mongodb.com/manual/administration/analyzing-mongodb-performance/#full-time-diagnostic-data-capture\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">here</a>) and upload them to this <a href=\"https://10gen-httpsupload.s3.amazonaws.com/upload_forms/ccc43dbf-7e50-4308-a633-60e6a173a44e.html\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">support uploader</a> location?</p>\n\n<p>Files uploaded to this portal are visible only to MongoDB employees and are routinely deleted after some time.</p>\n\n<p>Thank you,<br/>\nEric</p>"
        },
        {
          "id": "3745480",
          "author": "faaquinoa@gmail.com",
          "created": "Wed, 28 Apr 2021 22:16:38 +0000",
          "content": "<p>Hi Eric Sedor.</p>\n\n<p>The Mongo.log is a very heavy file that in just minutes reaches 500MB in size, and when the nodes fell, it reached a weight of 56GB and I don't think it can be loaded here. But the contents of the diagnostic.data folder if I can upload it here.</p>\n\n<p>Stay tuned to your comments.</p>\n\n<p>Â </p>"
        },
        {
          "id": "3745481",
          "author": "faaquinoa@gmail.com",
          "created": "Wed, 28 Apr 2021 22:16:38 +0000",
          "content": "<p>Hi Eric Sedor.</p>\n\n<p>The Mongo.log is a very heavy file that in just minutes reaches 500MB in size, and when the nodes fell, it reached a weight of 56GB and I don't think it can be loaded here. But the contents of the diagnostic.data folder if I can upload it here.</p>\n\n<p>Stay tuned to your comments.</p>\n\n<p>Â </p>"
        },
        {
          "id": "3745701",
          "author": "faaquinoa@gmail.com",
          "created": "Thu, 29 Apr 2021 02:24:33 +0000",
          "content": "<p><a href=\"https://www.mediafire.com/file/pzzvolyy2zunkqy/diagnostic.data.zip/file\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://www.mediafire.com/file/pzzvolyy2zunkqy/diagnostic.data.zip/file</a></p>"
        },
        {
          "id": "3759635",
          "author": "faaquinoa@gmail.com",
          "created": "Thu, 6 May 2021 19:16:09 +0000",
          "content": "<p>Hi Eric Sedor,</p>\n\n<p>In log of nodes this is show:</p>\n\n<p>Â </p>\n\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.879-05:00\"}\n<p>,\"s\":\"W\", \"c\":\"-\", \"id\":23075, \"ctx\":\"conn26\",\"msg\":\"DBException thrown\",\"attr\":{\"error\":</p>\n{\"code\":262,\"codeName\":\"ExceededTimeLimit\",\"errmsg\":\"operation exceeded time limit\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31380, \"ctx\":\"conn26\",\"msg\":\"BACKTRACE: {bt}\",\"attr\":{\"bt\":{\"backtrace\":[</p>\n{\"a\":\"7FF72AB97393\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/stacktrace_windows.cpp\",\"line\":349,\"s\":\"mongo::`anonymous namespace'::printWindowsStackTraceImpl\",\"s+\":\"43\"}\n<p>,{\"a\":\"7FF72ABA39FF\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/assert_util.cpp\",\"line\":82,\"s\":\"mongo::DBException::traceIfNeeded\",\"s+\":\"BF\"},{\"a\":\"7FF72ABFC461\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/assert_util.h\",\"line\":152,\"s\":\"mongo::AssertionException::AssertionException\",\"s+\":\"41\"},{\"a\":\"7FF72ABEAD13\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/assert_util.h\",\"line\":183,\"s\":\"mongo::error_details::ExceptionForImpl&lt;262,mongo::ExceptionForCat&lt;2&gt;,mongo::ExceptionForCat&lt;10&gt;,mongo::ExceptionForCat&lt;14&gt; &gt;::ExceptionForImpl&lt;262,mongo::ExceptionForCat&lt;2&gt;,mongo::ExceptionForCat&lt;10&gt;,mongo::ExceptionForCat&lt;14&gt; &gt;\",\"s+\":\"53\"},{\"a\":\"7FF72AC01E97\",\"module\":\"mongod.exe\",\"file\":\"C:/data/mci/1a6309d4f2fbd6937ba087af7c306dc3/src/build/opt/mongo/base/error_codes.cpp\",\"line\":2327,\"s\":\"mongo::error_details::throwExceptionForStatus\",\"s+\":\"1B07\"},{\"a\":\"7FF72ABA2F11\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/assert_util.cpp\",\"line\":276,\"s\":\"mongo::internalAssertWithLocation\",\"s+\":\"181\"},{\"a\":\"7FF7298E33EA\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/interruptible.h\",\"line\":425,\"s\":\"&lt;lambda_e92ad99fc1275512ced0a76fd2cfd93f&gt;::operator()\",\"s+\":\"16A\"},{\"a\":\"7FF7298E0667\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/interruptible.h\",\"line\":449,\"s\":\"mongo::Interruptible::waitForConditionOrInterruptUntil&lt;std::unique_lock&lt;mongo::latch_detail::Latch&gt;,&lt;lambda_288a0b92bfbc0fe7785d4a35b7a95cde&gt; &gt;\",\"s+\":\"137\"},{\"a\":\"7FF7298ED4DC\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/future_impl.h\",\"line\":389,\"s\":\"mongo::future_details::SharedStateBase::wait\",\"s+\":\"AC\"},{\"a\":\"7FF729997DA0\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/future_impl.h\",\"line\":679,\"s\":\"mongo::future_details::SharedStateHolder&lt;std::shared_ptr&lt;mongo::repl::IsMasterResponse const &gt; &gt;::getNoThrow\",\"s+\":\"20\"},{\"a\":\"7FF72997B615\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/interruptible.h\",\"line\":286,\"s\":\"mongo::Interruptible::runWithDeadline&lt;&lt;lambda_86d5c867d075c2bc03446f6a1a506613&gt; &gt;\",\"s+\":\"65\"},{\"a\":\"7FF72997A4A1\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/repl/replication_coordinator_impl.cpp\",\"line\":178,\"s\":\"mongo::repl::`anonymous namespace'::futureGetNoThrowWithDeadline&lt;std::shared_ptr&lt;mongo::repl::IsMasterResponse const &gt; &gt;\",\"s+\":\"41\"},{\"a\":\"7FF729991783\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/repl/replication_coordinator_impl.cpp\",\"line\":2230,\"s\":\"mongo::repl::ReplicationCoordinatorImpl::awaitIsMasterResponse\",\"s+\":\"623\"},{\"a\":\"7FF729959853\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/repl/replication_info.cpp\",\"line\":110,\"s\":\"mongo::repl::`anonymous namespace'::appendReplicationInfo\",\"s+\":\"1B3\"},{\"a\":\"7FF729958043\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/repl/replication_info.cpp\",\"line\":510,\"s\":\"mongo::repl::`anonymous namespace'::CmdHello::runWithReplyBuilder\",\"s+\":\"CA3\"},{\"a\":\"7FF72A17B831\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/commands.cpp\",\"line\":808,\"s\":\"mongo::BasicCommandWithReplyBuilderInterface::Invocation::run\",\"s+\":\"111\"},{\"a\":\"7FF72A17BD93\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/commands.cpp\",\"line\":187,\"s\":\"mongo::CommandHelpers::runCommandInvocation\",\"s+\":\"83\"},{\"a\":\"7FF7298EC371\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":856,\"s\":\"mongo::`anonymous namespace'::runCommandImpl\",\"s+\":\"171\"},{\"a\":\"7FF7298E6F79\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":1207,\"s\":\"mongo::`anonymous namespace'::execCommandDatabase\",\"s+\":\"1919\"},{\"a\":\"7FF7298E1D82\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":1395,\"s\":\"&lt;lambda_544331c0dc5456bd033660d38db896d9&gt;::operator()\",\"s+\":\"5E2\"},{\"a\":\"7FF7298EA3C6\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":1423,\"s\":\"mongo::`anonymous namespace'::receivedCommands\",\"s+\":\"B6\"},{\"a\":\"7FF7298E8B89\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":1726,\"s\":\"mongo::ServiceEntryPointCommon::handleRequest\",\"s+\":\"989\"},{\"a\":\"7FF7298D65A2\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_mongod.cpp\",\"line\":291,\"s\":\"mongo::ServiceEntryPointMongod::handleRequest\",\"s+\":\"32\"},{\"a\":\"7FF7298D8AB7\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/transport/service_state_machine.cpp\",\"line\":483,\"s\":\"mongo::ServiceStateMachine::<em>processMessage\",\"s+\":\"1B7\"},{\"a\":\"7FF7298D9091\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/transport/service_state_machine.cpp\",\"line\":577,\"s\":\"mongo::ServiceStateMachine::_runNextInGuard\",\"s+\":\"C1\"},{\"a\":\"7FF7298D81C4\",\"module\":\"mongod.exe\",\"file\":\"C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/VC/Tools/MSVC/14.26.28801/include/functional\",\"line\":910,\"s\":\"std::_Func_impl_no_alloc&lt;&lt;lambda_b23af5efc3b61ab25bff0c3bcd13382b&gt;,void&gt;::_Do_call\",\"s+\":\"54\"},{\"a\":\"7FF72A8C78E2\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/transport/service_executor_synchronous.cpp\",\"line\":127,\"s\":\"&lt;lambda_29546a6698e80e311a5ae805fe7aad67&gt;::operator()\",\"s+\":\"152\"},{\"a\":\"7FF72AA45AB6\",\"module\":\"mongod.exe\",\"file\":\"C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/VC/Tools/MSVC/14.26.28801/include/thread\",\"line\":43,\"s\":\"std::thread::_Invoke&lt;std::tuple&lt;&lt;lambda_30130984df28a890937aeb9eb32385d9&gt; &gt;,0&gt;\",\"s+\":\"36\"},{\"a\":\"7FFACEF0CDE0\",\"module\":\"ucrtbase.dll\",\"s\":\"o</em>_realloc_base\",\"s+\":\"60\"},{\"a\":\"7FFACF9D8364\",\"module\":\"KERNEL32.DLL\",\"s\":\"BaseThreadInitThunk\",\"s+\":\"14\"}]}}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72AB97393\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/stacktrace_windows.cpp\",\"line\":349,\"s\":\"mongo::`anonymous namespace'::printWindowsStackTraceImpl\",\"s+\":\"43\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72ABA39FF\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/assert_util.cpp\",\"line\":82,\"s\":\"mongo::DBException::traceIfNeeded\",\"s+\":\"BF\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72ABFC461\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/assert_util.h\",\"line\":152,\"s\":\"mongo::AssertionException::AssertionException\",\"s+\":\"41\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72ABEAD13\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/assert_util.h\",\"line\":183,\"s\":\"mongo::error_details::ExceptionForImpl&lt;262,mongo::ExceptionForCat&lt;2&gt;,mongo::ExceptionForCat&lt;10&gt;,mongo::ExceptionForCat&lt;14&gt; &gt;::ExceptionForImpl&lt;262,mongo::ExceptionForCat&lt;2&gt;,mongo::ExceptionForCat&lt;10&gt;,mongo::ExceptionForCat&lt;14&gt; &gt;\",\"s+\":\"53\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72AC01E97\",\"module\":\"mongod.exe\",\"file\":\"C:/data/mci/1a6309d4f2fbd6937ba087af7c306dc3/src/build/opt/mongo/base/error_codes.cpp\",\"line\":2327,\"s\":\"mongo::error_details::throwExceptionForStatus\",\"s+\":\"1B07\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72ABA2F11\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/assert_util.cpp\",\"line\":276,\"s\":\"mongo::internalAssertWithLocation\",\"s+\":\"181\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298E33EA\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/interruptible.h\",\"line\":425,\"s\":\"&lt;lambda_e92ad99fc1275512ced0a76fd2cfd93f&gt;::operator()\",\"s+\":\"16A\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298E0667\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/interruptible.h\",\"line\":449,\"s\":\"mongo::Interruptible::waitForConditionOrInterruptUntil&lt;std::unique_lock&lt;mongo::latch_detail::Latch&gt;,&lt;lambda_288a0b92bfbc0fe7785d4a35b7a95cde&gt; &gt;\",\"s+\":\"137\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298ED4DC\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/future_impl.h\",\"line\":389,\"s\":\"mongo::future_details::SharedStateBase::wait\",\"s+\":\"AC\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF729997DA0\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/future_impl.h\",\"line\":679,\"s\":\"mongo::future_details::SharedStateHolder&lt;std::shared_ptr&lt;mongo::repl::IsMasterResponse const &gt; &gt;::getNoThrow\",\"s+\":\"20\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72997B615\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/util/interruptible.h\",\"line\":286,\"s\":\"mongo::Interruptible::runWithDeadline&lt;&lt;lambda_86d5c867d075c2bc03446f6a1a506613&gt; &gt;\",\"s+\":\"65\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72997A4A1\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/repl/replication_coordinator_impl.cpp\",\"line\":178,\"s\":\"mongo::repl::`anonymous namespace'::futureGetNoThrowWithDeadline&lt;std::shared_ptr&lt;mongo::repl::IsMasterResponse const &gt; &gt;\",\"s+\":\"41\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF729991783\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/repl/replication_coordinator_impl.cpp\",\"line\":2230,\"s\":\"mongo::repl::ReplicationCoordinatorImpl::awaitIsMasterResponse\",\"s+\":\"623\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF729959853\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/repl/replication_info.cpp\",\"line\":110,\"s\":\"mongo::repl::`anonymous namespace'::appendReplicationInfo\",\"s+\":\"1B3\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF729958043\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/repl/replication_info.cpp\",\"line\":510,\"s\":\"mongo::repl::`anonymous namespace'::CmdHello::runWithReplyBuilder\",\"s+\":\"CA3\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72A17B831\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/commands.cpp\",\"line\":808,\"s\":\"mongo::BasicCommandWithReplyBuilderInterface::Invocation::run\",\"s+\":\"111\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72A17BD93\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/commands.cpp\",\"line\":187,\"s\":\"mongo::CommandHelpers::runCommandInvocation\",\"s+\":\"83\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298EC371\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":856,\"s\":\"mongo::`anonymous namespace'::runCommandImpl\",\"s+\":\"171\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298E6F79\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":1207,\"s\":\"mongo::`anonymous namespace'::execCommandDatabase\",\"s+\":\"1919\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.925-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298E1D82\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":1395,\"s\":\"&lt;lambda_544331c0dc5456bd033660d38db896d9&gt;::operator()\",\"s+\":\"5E2\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298EA3C6\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":1423,\"s\":\"mongo::`anonymous namespace'::receivedCommands\",\"s+\":\"B6\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298E8B89\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_common.cpp\",\"line\":1726,\"s\":\"mongo::ServiceEntryPointCommon::handleRequest\",\"s+\":\"989\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298D65A2\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/db/service_entry_point_mongod.cpp\",\"line\":291,\"s\":\"mongo::ServiceEntryPointMongod::handleRequest\",\"s+\":\"32\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298D8AB7\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/transport/service_state_machine.cpp\",\"line\":483,\"s\":\"mongo::ServiceStateMachine::_processMessage\",\"s+\":\"1B7\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298D9091\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/transport/service_state_machine.cpp\",\"line\":577,\"s\":\"mongo::ServiceStateMachine::_runNextInGuard\",\"s+\":\"C1\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF7298D81C4\",\"module\":\"mongod.exe\",\"file\":\"C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/VC/Tools/MSVC/14.26.28801/include/functional\",\"line\":910,\"s\":\"std::_Func_impl_no_alloc&lt;&lt;lambda_b23af5efc3b61ab25bff0c3bcd13382b&gt;,void&gt;::_Do_call\",\"s+\":\"54\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72A8C78E2\",\"module\":\"mongod.exe\",\"file\":\".../src/mongo/transport/service_executor_synchronous.cpp\",\"line\":127,\"s\":\"&lt;lambda_29546a6698e80e311a5ae805fe7aad67&gt;::operator()\",\"s+\":\"152\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FF72AA45AB6\",\"module\":\"mongod.exe\",\"file\":\"C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/VC/Tools/MSVC/14.26.28801/include/thread\",\"line\":43,\"s\":\"std::thread::_Invoke&lt;std::tuple&lt;&lt;lambda_30130984df28a890937aeb9eb32385d9&gt; &gt;,0&gt;\",\"s+\":\"36\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FFACEF0CDE0\",\"module\":\"ucrtbase.dll\",\"s\":\"o__realloc_base\",\"s+\":\"60\"}\n<p>}}</p>\n{\"t\":\\{\"$date\":\"2021-05-06T14:05:29.926-05:00\"}\n<p>,\"s\":\"I\", \"c\":\"CONTROL\", \"id\":31445, \"ctx\":\"conn26\",\"msg\":\" Frame: {frame}\",\"attr\":{\"frame\":</p>\n{\"a\":\"7FFACF9D8364\",\"module\":\"KERNEL32.DLL\",\"s\":\"BaseThreadInitThunk\",\"s+\":\"14\"}\n<p>}}</p>\n\n<p>Â </p>\n\n<p>Â </p>"
        },
        {
          "id": "3862706",
          "author": "eric.sedor",
          "created": "Mon, 7 Jun 2021 15:51:33 +0000",
          "content": "<p>Hi <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=faaquinoa%40gmail.com\" class=\"user-hover\" rel=\"faaquinoa@gmail.com\">Frank Alejandro Aquino Altuna</a>, and sorry for the delay.</p>\n\n<p>Unfortunately I am not able to obtain files from the mediafire link you provided. Can you please upload the diagnostic.data directory to <a href=\"https://mongodb.app.box.com/f/0668a2cf717b4dceaf2b176d2ba35c8b\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">this new location on Box</a>. Files uploaded here are private and only visible to MongoDB employees participating in this investigation.</p>\n\n<p>A few questions:</p>\n<ul>\n\t<li>Is this issue still occurring?</li>\n\t<li>Can you provide a timeline for when the issue occurs?</li>\n</ul>\n\n\n<p>I understand the log files are large but if it is possible to upload diagnostic data and log files for a single crash, it will be very helpful in our investigation.</p>\n\n<p>Eric</p>"
        },
        {
          "id": "3912981",
          "author": "eric.sedor",
          "created": "Thu, 1 Jul 2021 17:50:05 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=faaquinoa%40gmail.com\" class=\"user-hover\" rel=\"faaquinoa@gmail.com\">Frank Alejandro Aquino Altuna</a>, I wanted to see if you got my last message. Are you able to provide files via <a href=\"https://mongodb.app.box.com/f/0668a2cf717b4dceaf2b176d2ba35c8b\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">the link I provided</a>?</p>"
        },
        {
          "id": "3943849",
          "author": "eric.sedor",
          "created": "Thu, 15 Jul 2021 15:43:04 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=faaquinoa%40gmail.com\" class=\"user-hover\" rel=\"faaquinoa@gmail.com\">Frank Alejandro Aquino Altuna</a>, I'm going to close this ticket. But we can reopen it if you can provide the additional information I requested and upload the logs and diagnostic data to <a href=\"https://mongodb.app.box.com/f/0668a2cf717b4dceaf2b176d2ba35c8b\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">this portal</a>.</p>"
        }
      ]
    },
    "attachments": {
      "attachment": [
        {
          "id": "310477",
          "name": "mongo.conf",
          "size": "1396",
          "author": "faaquinoa@gmail.com",
          "created": "Mon, 19 Apr 2021 18:12:27 +0000"
        },
        {
          "id": "310480",
          "name": "mongod.2021-04-19T17-33-50.mdmp",
          "size": "3064758",
          "author": "faaquinoa@gmail.com",
          "created": "Mon, 19 Apr 2021 18:12:23 +0000"
        },
        {
          "id": "310479",
          "name": "mongod.2021-04-19T17-33-53.mdmp",
          "size": "2689869",
          "author": "faaquinoa@gmail.com",
          "created": "Mon, 19 Apr 2021 18:12:16 +0000"
        },
        {
          "id": "310478",
          "name": "mongod.2021-04-19T17-34-16.mdmp",
          "size": "3320488",
          "author": "faaquinoa@gmail.com",
          "created": "Mon, 19 Apr 2021 18:12:17 +0000"
        }
      ]
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "8.0"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 19 Apr 2021 22:32:10 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        10 weeks ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "eric.sedor"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            10 weeks ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "eric.sedor",
              "faaquinoa@gmail.com"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz5913:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz6j7b:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz4va7:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-56261] Invariant failure at hasTransientTransactionOrRetryableWriteError",
    "link": "https://jira.mongodb.org/browse/SERVER-56261",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{\"t\":{\"$date\":\"2021-04-08T13:25:49.833+00:00\"},\"s\":\"F\",  \"c\":\"-\",        \"id\":23079,   \"ctx\":\"conn21888\",\"msg\":\"Invariant failure\",\"attr\":{\"expr\":\"!hasTransientTransactionOrRetryableWriteError\",\"file\":\"src/mongo/db/error_labels.cpp\",\"line\":124}}</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{\"t\":{\"$date\":\"2021-04-08T13:25:49.833+00:00\"},\"s\":\"F\",  \"c\":\"-\",        \"id\":23080,   \"ctx\":\"conn21888\",\"msg\":\"\\n\\n***aborting after invariant() failure\\n\\n\"}</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">{\"t\":{\"$date\":\"2021-04-08T13:25:49.839+00:00\"},\"s\":\"F\",  \"c\":\"CONTROL\",  \"id\":4757800, \"ctx\":\"conn21888\",\"msg\":\"Writing fatal message\",\"attr\":{\"message\":\"Got signal: 6 (Aborted).\\n\"}}\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>",
    "environment": "",
    "key": {
      "id": "1687037",
      "content": "SERVER-56261"
    },
    "summary": "Invariant failure at hasTransientTransactionOrRetryableWriteError",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "haley.connelly",
      "content": "Haley Connelly"
    },
    "reporter": {
      "username": "dmitry.agranat",
      "content": "Dmitry Agranat"
    },
    "labels": {
      "label": "Atlas_Failure_Analysis"
    },
    "created": "Thu, 22 Apr 2021 11:43:01 +0000",
    "updated": "Wed, 2 Jun 2021 18:07:06 +0000",
    "resolved": "Thu, 20 May 2021 21:47:04 +0000",
    "version": "4.4.4",
    "fixVersion": [
      "5.1.0",
      "4.4.7",
      "5.0.0-rc1"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "7",
    "comments": {
      "comment": [
        {
          "id": "3749300",
          "author": "haley.connelly",
          "created": "Fri, 30 Apr 2021 17:18:28 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=dmitry.agranat\" class=\"user-hover\" rel=\"dmitry.agranat\">Dmitry Agranat</a>Â looks like the FTDC starts from April 16th but the logs are from April 8th.Â </p>"
        },
        {
          "id": "3778144",
          "author": "haley.connelly",
          "created": "Mon, 17 May 2021 19:46:06 +0000",
          "content": "<p>After speaking with <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=lingzhi.deng\" class=\"user-hover\" rel=\"lingzhi.deng\">Lingzhi Deng</a>Â we've decided to replace the <a href=\"https://github.com/mongodb/mongo/blob/4452664400a030dbe4ccd113bf8bc3b881d9b054/src/mongo/db/error_labels.cpp#L126\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">failing invariant</a> with an if - else - If there is already a transientTransaction error, don't append the retryable error label.Â </p>"
        },
        {
          "id": "3798097",
          "author": "xgen-internal-githook",
          "created": "Thu, 20 May 2021 21:42:19 +0000",
          "content": "<p>Author:</p>\n{'name': 'Haley Connelly', 'email': 'haley.connelly@mongodb.com', 'username': 'haleyConnelly'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56261\" title=\"Invariant failure at hasTransientTransactionOrRetryableWriteError\" class=\"issue-link\" data-issue-key=\"SERVER-56261\"><del>SERVER-56261</del></a> remove invariant that RetryableWriteError and TransientTransactionError are mutually exclusive<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/0dab95acc0d5dca595873bc94b8323e188f3b302\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/0dab95acc0d5dca595873bc94b8323e188f3b302</a></p>"
        },
        {
          "id": "3852632",
          "author": "xgen-internal-githook",
          "created": "Tue, 1 Jun 2021 22:01:43 +0000",
          "content": "<p>Author:</p>\n{'name': 'Haley Connelly', 'email': 'haley.connelly@mongodb.com', 'username': 'haleyConnelly'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56261\" title=\"Invariant failure at hasTransientTransactionOrRetryableWriteError\" class=\"issue-link\" data-issue-key=\"SERVER-56261\"><del>SERVER-56261</del></a> remove invariant that RetryableWriteError and TransientTransactionError are mutually exclusive</p>\n\n<p>(cherry picked from commit 0dab95acc0d5dca595873bc94b8323e188f3b302)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/fbe065462ef1accb2de846e88c42130bb0ff8e6d\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/fbe065462ef1accb2de846e88c42130bb0ff8e6d</a></p>"
        },
        {
          "id": "3854419",
          "author": "xgen-internal-githook",
          "created": "Wed, 2 Jun 2021 17:57:37 +0000",
          "content": "<p>Author:</p>\n{'name': 'Haley Connelly', 'email': 'haley.connelly@mongodb.com', 'username': 'haleyConnelly'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56261\" title=\"Invariant failure at hasTransientTransactionOrRetryableWriteError\" class=\"issue-link\" data-issue-key=\"SERVER-56261\"><del>SERVER-56261</del></a> remove invariant that RetryableWriteError and TransientTransactionError are mutually exclusive</p>\n\n<p>(cherry picked from commit 0dab95acc0d5dca595873bc94b8323e188f3b302)<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/873c94200f93532bf730564ba34874413ede3cd0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/873c94200f93532bf730564ba34874413ede3cd0</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": {
              "issuekey": {
                "id": "1622950",
                "content": "SERVER-54534"
              }
            }
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "5.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21777",
                "content": "v5.0"
              },
              {
                "key": "18953",
                "content": "v4.4"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 30 Apr 2021 17:18:28 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        16 weeks, 1 day ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17052",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Downstream Changes Summary",
          "customfieldvalues": {
            "customfieldvalue": "RetryableWriteError and TransientTransactionError are not always mutually exclusive. "
          }
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16942",
              "content": "Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            16 weeks, 1 day ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "dmitry.agranat",
              "xgen-internal-githook",
              "haley.connelly"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz5xq7:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz77bz:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4516",
                "content": "Sharding 2021-05-03"
              },
              {
                "id": "4789",
                "content": "Sharding 2021-05-31"
              }
            ]
          }
        },
        {
          "id": "customfield_17051",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Teams Impacted",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16945",
              "content": "Drivers"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz5jzb:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-56514] Tests with casual consistency do not wait for the indexes to finish building",
    "link": "https://jira.mongodb.org/browse/SERVER-56514",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Consider the simple test:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const coll = db.test;</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">coll.drop();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">coll.createIndex(</span><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">/* geospatial index spec */</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">coll.insert(</span><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">/* documents with geospatial data */</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">coll.find(</span><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">/* query using $near, $nearSphere or $geoNear */</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">).toArray();\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>Let us try to execute this test in <tt>replica_sets_multi_stmt_txn_terminate_primary_jscore_passthrough</tt> suite. Network overrides will add <tt>w: \"majority\"</tt> to the <tt>createIndex</tt> command <a href=\"https://github.com/mongodb/mongo/blob/ff6b2f2877a0721cd631acaa2057e491ebd8c846/jstests/libs/override_methods/network_error_and_txn_override.js#L500\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">here</a>. With these settings, the following timeline of execution is possible on MongoDB version 4.2:</p>\n\n<p><span class=\"image-wrap\" style=\"\"><img src=\"https://jira.mongodb.org/secure/attachment/320944/320944_1.jpg\" width=\"700\" style=\"border: 0px solid black\" /></span></p>\n\n<p>First of all, we have 3-node replica set. node2 is Primary, all other nodes are Secondaries. Test issues <tt>createIndexes</tt> command, it arrives on Primary and command waits until the index is successfully built. To satisfy <tt>\"majority\"</tt> write concern, command is replicated to the node1. As soon as command is replicated, <tt>createIndexes</tt> command returns with success. It does not wait for node1 to finish the index build.</p>\n\n<p>After the <tt>createIndexes</tt> command, the test suite issues a stepdown of Primary, which triggers a re-election. node1 is now selected as Primary. Note that the index build on node1 is still in progress.</p>\n\n<p>After the new Primary was selected, test issues a find command with <tt>$near</tt>, <tt>$nearSphere</tt> or <tt>$geoNear</tt> operator. All these operators <b>require</b> a geospatial index to work. Since the geospatial index on the current Primary node1 is still building, it is not available for querying. Since there is no geospatial index available, query fails.</p>\n\n<p>Note that starting from version 4.4 <tt>createIndexes</tt> with write concern <tt>\"majority\"</tt> actually waits for the index to finish building on the majority of nodes. So the affected versions are 4.2 and earlier.</p>",
    "environment": "",
    "key": {
      "id": "1697326",
      "content": "SERVER-56514"
    },
    "summary": "Tests with casual consistency do not wait for the indexes to finish building",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "nikita.lapkov",
      "content": "Nikita Lapkov"
    },
    "reporter": {
      "username": "nikita.lapkov",
      "content": "Nikita Lapkov"
    },
    "labels": "",
    "created": "Fri, 30 Apr 2021 14:14:32 +0000",
    "updated": "Fri, 2 Jul 2021 15:36:30 +0000",
    "resolved": "Fri, 2 Jul 2021 15:36:30 +0000",
    "version": [
      "4.0.0",
      "4.2.0"
    ],
    "fixVersion": "4.2 Required",
    "votes": "0",
    "watches": "4",
    "comments": {
      "comment": {
        "id": "3901040",
        "author": "xgen-internal-githook",
        "created": "Fri, 25 Jun 2021 17:17:02 +0000",
        "content": "<p>Author:</p>\n{'name': 'Nikita Lapkov', 'email': 'nikita.lapkov@mongodb.com', 'username': 'laplab'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56514\" title=\"Tests with casual consistency do not wait for the indexes to finish building\" class=\"issue-link\" data-issue-key=\"SERVER-56514\"><del>SERVER-56514</del></a> Add causally_consistent_index_builds override to replica_sets_multi_stmt_txn_terminate_primary_jscore_passthrough suite<br/>\nBranch: v4.2<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/1b5e10ddfd3f70cd28c14c496fc58836f7442f85\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/1b5e10ddfd3f70cd28c14c496fc58836f7442f85</a></p>"
      }
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": {
      "attachment": {
        "id": "320944",
        "name": "1.jpg",
        "size": "510585",
        "author": "nikita.lapkov",
        "created": "Fri, 18 Jun 2021 13:16:13 +0000"
      }
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "6.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "15640",
              "content": "v4.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 25 Jun 2021 17:17:02 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        12 weeks, 6 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "nikita.lapkov"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            12 weeks, 6 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "17.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "nikita.lapkov"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz7mgv:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz8tef:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4472",
                "content": "Query Execution 2021-05-03"
              },
              {
                "id": "4697",
                "content": "Query Execution 2021-05-17"
              },
              {
                "id": "4703",
                "content": "Query Execution 2021-05-31"
              },
              {
                "id": "4705",
                "content": "Query Execution 2021-06-14"
              },
              {
                "id": "4707",
                "content": "Query Execution 2021-06-28"
              },
              {
                "id": "4709",
                "content": "Query Execution 2021-07-12"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz78pz:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-56839] Index seeks concurrent with recently-committed prepared transactions can return wrong results",
    "link": "https://jira.mongodb.org/browse/SERVER-56839",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Read-only queries that perform index scans have the potential to return the wrong keys if they scan near recently-committed prepared transactions.</p>\n\n<p>The bug is as follows, in this order:</p>\n<ul>\n\t<li>An index has a key for \"a\" and it is visible to all operations.</li>\n\t<li>A key for \"b\" is not visible because it is prepared and uncommitted by a transaction.</li>\n\t<li>Another operation queries for a key, \"c\". This operation uses <a href=\"https://github.com/mongodb/mongo/blob/620f76b6617c6ee51569acff46f6e9a686337e8c/src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp#L1038\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">search_near</a>() for a key starting with \"c\". Because there are no keys afterward and because read-only queries ignore prepared updates, the cursor lands on an adjacent key, \"a\".</li>\n\t<li>The prepared transaction involving \"b\" commits.</li>\n\t<li>Because \"a\" compares less than \"c\", we call <a href=\"https://github.com/mongodb/mongo/blob/620f76b6617c6ee51569acff46f6e9a686337e8c/src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp#L1017-L1018\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">next</a>() on the cursor to uphold our contract to return a key that will compare greater than or equal to \"c\" (note this is the case for the actual key we would store for \"c\"). Due to the concurrently committed transaction, the call to next() actually lands on \"b\", which is newly visible, as it compares after \"a\". We expect that a call to next() guarantees we land on a key after \"c\", however, that is not the case, and leads us to return keys other than the ones we were searching for.</li>\n</ul>\n\n\n<p>This does not affect write operations since they enforce and block on prepare conflicts. This only affects read-only queries.</p>",
    "environment": "",
    "key": {
      "id": "1710702",
      "content": "SERVER-56839"
    },
    "summary": "Index seeks concurrent with recently-committed prepared transactions can return wrong results",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "louis.williams",
      "content": "Louis Williams"
    },
    "reporter": {
      "username": "louis.williams",
      "content": "Louis Williams"
    },
    "labels": "",
    "created": "Tue, 11 May 2021 13:36:55 +0000",
    "updated": "Tue, 13 Jul 2021 16:54:04 +0000",
    "resolved": "Tue, 25 May 2021 17:15:11 +0000",
    "version": [
      "4.2.0",
      "4.4.0",
      "5.0.0"
    ],
    "fixVersion": [
      "5.1.0",
      "4.4.7",
      "5.0.0-rc2",
      "4.2.16"
    ],
    "votes": "0",
    "watches": "4",
    "comments": {
      "comment": [
        {
          "id": "3771656",
          "author": "daniel.gottlieb@10gen.com",
          "created": "Thu, 13 May 2021 14:52:03 +0000",
          "content": "<p>Clarification: Does the query for \"c\" have to be something that reads at a timestamp? If there's no read timestamp, my understanding is that if the query for \"c\" gets a snapshot prior to the prepared transaction committing, the \"c\" query's storage engine snapshot will never see \"b\"</p>\n\n<p>Question: I didn't understand the last bullet point regarding the bug:</p>\n<blockquote>\n<p>Due to the concurrently committed transaction, we land on \"b\", which is now after \"a\". This allows us to return a key other than the one we were searching for</p></blockquote>\n\n<p>Is the claim that higher level code isn't properly vetting any $match filters on returned documents? Or is the MDB Index API returning that we found an exact match when that wasn't true (perhaps allowing query to optimize away any double-checking of what gets returned)?</p>"
        },
        {
          "id": "3776662",
          "author": "louis.williams",
          "created": "Mon, 17 May 2021 13:52:39 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=daniel.gottlieb\" class=\"user-hover\" rel=\"daniel.gottlieb\">Daniel Gottlieb</a>, I updated some text to hopefully answer your question:</p>\n\n<blockquote><p>Due to the concurrently committed transaction, the call to next() actually lands on \"b\", which is newly visible, as it compares after \"a\". We expect that a call to next() guarantees we land on a key after \"c\", however, that is not the case, and leads us to return keys other than the ones we were searching for.</p></blockquote>\n\n<p>The MongoDB code assumes that if search_near lands on a key that compares lower than the search key, calling next() is guaranteed to return a key that compares higher than the search key. The same logic also applies in the other direction for reverse cursors. \"ignore_prepare\" doesn't guarantee snapshot isolation and therefore this may not always be true.</p>\n\n<p>To answer your first question: if an operation reads without a timestamp, as is the case in my example, it gets a snapshot where an update is prepared. WiredTiger normally returns WT_PREPARE_CONFLICT for reads until this operation commits/aborts, but \"ignore_prepare\" allows the operator to return the pre-image. Once the prepared operation commits, it becomes visible.</p>"
        },
        {
          "id": "3776829",
          "author": "daniel.gottlieb@10gen.com",
          "created": "Mon, 17 May 2021 14:17:11 +0000",
          "content": "<p>Thanks for the clarifications <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=louis.williams\" class=\"user-hover\" rel=\"louis.williams\">Louis Williams</a>! I've responded with updated claims for posterity.</p>\n\n<blockquote>\n<p>The MongoDB code assumes that if search_near lands on a key that compares lower than the search key, calling next() is guaranteed to return a key that compares higher than the search key.</p></blockquote>\n<p>Ah, that's an invariant that makes intuitive sense to me. I can see why violating that promise can lead to wrong results.</p>\n\n<blockquote>\n<p>To answer your first question: if an operation reads without a timestamp, as is the case in my example, it gets a snapshot where an update is prepared. WiredTiger normally returns WT_PREPARE_CONFLICT for reads until this operation commits/aborts, but \"ignore_prepare\" allows the operator to return the pre-image. Once the prepared operation commits, it becomes visible.</p></blockquote>\n<p>I think I see. WT makes a <tt>txnId</tt> \"visible\" when a transaction is prepared (meaning new readers won't add said <tt>txnId</tt> to its copy of \"concurrent transactions\"). But the individual updates themselves are obviously marked as prepared, resulting in a WT_PREPARE_CONFLICT until that's no longer true. </p>"
        },
        {
          "id": "3838634",
          "author": "xgen-internal-githook",
          "created": "Tue, 25 May 2021 17:08:55 +0000",
          "content": "<p>Author:</p>\n{'name': 'Louis Williams', 'email': 'louis.williams@mongodb.com', 'username': 'louiswilliams'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56839\" title=\"Index seeks concurrent with recently-committed prepared transactions can return wrong results\" class=\"issue-link\" data-issue-key=\"SERVER-56839\"><del>SERVER-56839</del></a> Index seeks should advance their cursor until a<br/>\nmatching key is found</p>\n\n<p>This fixes a bug that can result in a seek on an index returning the<br/>\nwrong key if it is concurrent with a recently-committed prepared<br/>\ntransaction on an adjacent record.<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/b18749767fc53a9b5822312a063afb26883a774a\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/b18749767fc53a9b5822312a063afb26883a774a</a></p>"
        },
        {
          "id": "3878704",
          "author": "xgen-internal-githook",
          "created": "Tue, 15 Jun 2021 15:25:41 +0000",
          "content": "<p>Author:</p>\n{'name': 'Louis Williams', 'email': 'louis.williams@mongodb.com', 'username': 'louiswilliams'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56839\" title=\"Index seeks concurrent with recently-committed prepared transactions can return wrong results\" class=\"issue-link\" data-issue-key=\"SERVER-56839\"><del>SERVER-56839</del></a> Index seeks should advance their cursor until a<br/>\nmatching key is found</p>\n\n<p>This fixes a bug that can result in a seek on an index returning the<br/>\nwrong key if it is concurrent with a recently-committed prepared<br/>\ntransaction on an adjacent record.</p>\n\n<p>(cherry picked from commit b18749767fc53a9b5822312a063afb26883a774a)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/cc7ffaa7a7e7462037a40fffa833987e7aa644c5\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/cc7ffaa7a7e7462037a40fffa833987e7aa644c5</a></p>"
        },
        {
          "id": "3882296",
          "author": "xgen-internal-githook",
          "created": "Wed, 16 Jun 2021 20:07:22 +0000",
          "content": "<p>Author:</p>\n{'name': 'Louis Williams', 'email': 'louis.williams@mongodb.com', 'username': 'louiswilliams'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56839\" title=\"Index seeks concurrent with recently-committed prepared transactions can return wrong results\" class=\"issue-link\" data-issue-key=\"SERVER-56839\"><del>SERVER-56839</del></a> Index seeks should advance their cursor until a<br/>\nmatching key is found</p>\n\n<p>This fixes a bug that can result in a seek on an index returning the<br/>\nwrong key if it is concurrent with a recently-committed prepared<br/>\ntransaction on an adjacent record.</p>\n\n<p>(cherry picked from commit b18749767fc53a9b5822312a063afb26883a774a)<br/>\n(cherry picked from commit cc7ffaa7a7e7462037a40fffa833987e7aa644c5)<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/0fc497c9d6a4a30fe0624ce0d7d8f8b7428c684d\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/0fc497c9d6a4a30fe0624ce0d7d8f8b7428c684d</a></p>"
        },
        {
          "id": "3930900",
          "author": "xgen-internal-githook",
          "created": "Tue, 13 Jul 2021 16:03:06 +0000",
          "content": "<p>Author:</p>\n{'name': 'Louis Williams', 'email': 'louis.williams@mongodb.com', 'username': 'louiswilliams'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-56839\" title=\"Index seeks concurrent with recently-committed prepared transactions can return wrong results\" class=\"issue-link\" data-issue-key=\"SERVER-56839\"><del>SERVER-56839</del></a> Index seeks should advance their cursor until a<br/>\nmatching key is found</p>\n\n<p>This fixes a bug that can result in a seek on an index returning the<br/>\nwrong key if it is concurrent with a recently-committed prepared<br/>\ntransaction on an adjacent record.</p>\n\n<p>(cherry picked from commit b18749767fc53a9b5822312a063afb26883a774a)<br/>\n(cherry picked from commit cc7ffaa7a7e7462037a40fffa833987e7aa644c5)<br/>\n(cherry picked from commit 0fc497c9d6a4a30fe0624ce0d7d8f8b7428c684d)<br/>\nBranch: v4.2<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/da8835fbda87fa3afe53e37adb6b1ea38e61a5f7\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/da8835fbda87fa3afe53e37adb6b1ea38e61a5f7</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "inwardlinks": {
            "description": "is related to",
            "issuelink": {
              "issuekey": {
                "id": "1759725",
                "content": "SERVER-57270"
              }
            }
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "7.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21777",
                "content": "v5.0"
              },
              {
                "key": "18953",
                "content": "v4.4"
              },
              {
                "key": "16775",
                "content": "v4.2"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 13 May 2021 14:52:03 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        10 weeks, 2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            10 weeks, 2 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "50.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "daniel.gottlieb",
              "xgen-internal-githook",
              "louis.williams"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz9wfj:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hytgfj:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4878",
              "content": "Execution Team 2021-05-31"
            }
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>Create this failpoint:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">diff --git a/src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp b/src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">index f91a65eb05..b91ce66b6f 100644</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">--- a/src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+++ b/src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">@@ -82,6 +82,7 @@ namespace {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> MONGO_FAIL_POINT_DEFINE(WTCompactIndexEBUSY);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> MONGO_FAIL_POINT_DEFINE(WTEmulateOutOfOrderNextIndexKey);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+MONGO_FAIL_POINT_DEFINE(WTIndexPauseAfterSearchNear);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> using std::string;</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> using std::vector;</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">@@ -1050,6 +1051,16 @@ protected:</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">         LOGV2_TRACE_CURSOR(20089, \"cmp: {cmp}\", \"cmp\"_attr = cmp);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+        WTIndexPauseAfterSearchNear.executeIf(</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+            [](const BSONObj&amp;) {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+                LOGV2(0, \"hanging in search_near\");</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+                WTIndexPauseAfterSearchNear.pauseWhileSet();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+            },</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+            [&amp;](const BSONObj&amp; data) {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+                LOGV2(0, \"indexName\", \"name\"_attr = data[\"indexName\"].str());</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+                return data[\"indexName\"].str() == _idx.indexName();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+            });</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">+\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>And run this test:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">/**</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * Reproduces a bug where searching for a key returns an adjacent key in a recently-committed</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * prepared transaction.</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> *</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * Create an index with a single key, \"a\". Insert a new key for \"b\" in a prepared transaction. This</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * creates a prepared, but uncommitted index entry before the key we want to search for, \"c\", which</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * doesn't exist. We will query (search_near internally) for \"c\" and the cursor will initially land</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * on \"a\". This is less than they key were searching for, so the cursor is advanced to the next key,</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * expecting to land on something greater than or equal to \"c\". Before this happens, the prepared</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * transaction commits, making \"b\" visible. As a result, the cursor lands on and returns \"b\" even</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> * though we queried for \"c\".</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> */</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">(</span><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">function</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">() {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"use strict\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">;</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">load(</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"jstests/core/txns/libs/prepare_helpers.js\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">load(</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"jstests/libs/fail_point_util.js\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">load(</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">'jstests/libs/parallel_shell_helpers.js'</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const replTest = </span><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">new</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\"> ReplSetTest({nodes: 1});</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">replTest.startSet();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">replTest.initiate();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const primary = replTest.getPrimary();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const dbName = </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">'test'</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">;</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const collName = </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">'coll'</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">;</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const db = primary.getDB(dbName);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">assert.commandWorked(db[collName].createIndex({x: 1}));</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">assert.commandWorked(db[collName].insert({x: </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">'a'</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}));</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const session = primary.startSession({causalConsistency: </span><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">false</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">});</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const sessionDB = session.getDatabase(dbName);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const sessionColl = sessionDB.getCollection(collName);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">session.startTransaction();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">sessionColl.insert({x: </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">'b'</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">});</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">let prepareTimestamp = PrepareHelpers.prepareTransaction(session);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">let failpoint = configureFailPoint(primary, </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"WTIndexPauseAfterSearchNear\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">, {indexName: </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">'x_1'</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">});</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">// After the query on 'c' starts, we commit the transaction and advance the cursor, landing on 'b'</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">// instead of returning nothing.</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">const awaitShell = startParallelShell(</span><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">function</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">() {</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    assert.eq(0, db.coll.findOne({x: </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">'c'</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}));  </span><span style=\"color: #008200; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">// fails (or crashes in debug builds)</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}, primary.port);</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">failpoint.wait();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">assert.commandWorked(PrepareHelpers.commitTransaction(session, prepareTimestamp));</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">failpoint.off();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">awaitShell();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\">&nbsp;</pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">replTest.stopSet();</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">})();\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz9ion:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-57474] profile_operation_metrics.js not resilient to query yielding",
    "link": "https://jira.mongodb.org/browse/SERVER-57474",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>When running profile_operation_metrics.js, it's possible for queries to yield. Each yield results in the <tt>cursorSeeks</tt> metric being incremented. There's a build failure on the debug variants experiencing this behaviour, specifically the <tt>findIxScanAndFetch</tt> test in profile_operation_metrics.js.</p>\n\n<p>On a successful run, where there's no yielding, there are 2 <tt>cursorSeeks</tt>. This is what the test expects.</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">[conn1] </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"Slow query\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"attr\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"type\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"command\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"ns\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"profile_operation_metrics.coll\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"appName\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"MongoDB Shell\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"command\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"find\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"coll\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"filter\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"_id\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"lsid\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"id\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"$uuid\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"a910abbe-144f-45a6-86b3-efa816fc27ab\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"$db\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"profile_operation_metrics\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"planSummary\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"IXSCAN { _id: 1 }\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"keysExamined\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"docsExamined\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"fromMultiPlanner\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">true</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"cursorExhausted\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">true</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"numYields\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">0</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"nreturned\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"reslen\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">151</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"locks\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"Global\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"acquireCount\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"r\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">3</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"Mutex\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"acquireCount\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"r\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">3</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}}},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"storage\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"operationMetrics\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"docBytesRead\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">29</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"docUnitsRead\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"idxEntryBytesRead\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">3</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"idxEntryUnitsRead\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"docUnitsReturned\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"cursorSeeks\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">2</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"cpuNanos\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">4718330</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"remote\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"127.0.0.1:44910\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"protocol\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"op_msg\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"durationMillis\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">4</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>But when there's a yield, there are 3 <tt>cursorSeeks</tt>, causing the test to fail.</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">[conn1] </span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"Slow query\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"attr\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"type\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"command\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"ns\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"profile_operation_metrics.coll\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"appName\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"MongoDB Shell\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"command\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"find\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"coll\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"filter\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"_id\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"lsid\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"id\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"$uuid\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"ebdfd9b7-35b7-429a-aba5-315b45fef51f\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"$db\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"profile_operation_metrics\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"planSummary\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"IXSCAN { _id: 1 }\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"keysExamined\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"docsExamined\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"fromMultiPlanner\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">true</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"cursorExhausted\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #006699; font-weight: bold; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">true</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"numYields\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"nreturned\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"reslen\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">151</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"locks\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"Global\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"acquireCount\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"r\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">6</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"Mutex\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"acquireCount\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"r\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">5</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}}},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"storage\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"operationMetrics\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:{</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"docBytesRead\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">29</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"docUnitsRead\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"idxEntryBytesRead\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">3</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"idxEntryUnitsRead\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"docUnitsReturned\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">1</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"cursorSeeks\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">3</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"cpuNanos\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">6101484</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">},</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"remote\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"127.0.0.1:43070\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"protocol\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"op_msg\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">,</span><span style=\"color: blue; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">\"durationMillis\"</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">:</span><span style=\"color: #009900; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">27</span><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">}\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>",
    "environment": "",
    "key": {
      "id": "1769519",
      "content": "SERVER-57474"
    },
    "summary": "profile_operation_metrics.js not resilient to query yielding",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "gregory.wlodarek",
      "content": "Gregory Wlodarek"
    },
    "reporter": {
      "username": "gregory.wlodarek",
      "content": "Gregory Wlodarek"
    },
    "labels": "",
    "created": "Fri, 4 Jun 2021 21:42:00 +0000",
    "updated": "Fri, 23 Jul 2021 18:47:49 +0000",
    "resolved": "Thu, 15 Jul 2021 19:51:11 +0000",
    "version": [
      "5.0.0",
      "5.1.0"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.2"
    ],
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3862927",
          "author": "gregory.wlodarek",
          "created": "Mon, 7 Jun 2021 17:02:16 +0000",
          "content": "<p>This test will be disabled by <a href=\"https://jira.mongodb.org/browse/SERVER-57501\" title=\"Disable profile_operation_metrics.js temporarily\" class=\"issue-link\" data-issue-key=\"SERVER-57501\"><del>SERVER-57501</del></a> until a fix is found.</p>"
        },
        {
          "id": "3944313",
          "author": "xgen-internal-githook",
          "created": "Thu, 15 Jul 2021 18:17:33 +0000",
          "content": "<p>Author:</p>\n{'name': 'Gregory Wlodarek', 'email': 'gregory.wlodarek@mongodb.com', 'username': 'GWlodarek'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57474\" title=\"profile_operation_metrics.js not resilient to query yielding\" class=\"issue-link\" data-issue-key=\"SERVER-57474\"><del>SERVER-57474</del></a> profile_operation_metrics.js queries yield less frequently<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/cd1dde2d12606e2a5496bb5aad72ad1d0aa891d4\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/cd1dde2d12606e2a5496bb5aad72ad1d0aa891d4</a></p>"
        },
        {
          "id": "3960533",
          "author": "xgen-internal-githook",
          "created": "Fri, 23 Jul 2021 18:42:31 +0000",
          "content": "<p>Author:</p>\n{'name': 'Gregory Wlodarek', 'email': 'gregory.wlodarek@mongodb.com', 'username': 'GWlodarek'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57474\" title=\"profile_operation_metrics.js not resilient to query yielding\" class=\"issue-link\" data-issue-key=\"SERVER-57474\"><del>SERVER-57474</del></a> profile_operation_metrics.js queries yield less frequently</p>\n\n<p>(cherry picked from commit cd1dde2d12606e2a5496bb5aad72ad1d0aa891d4)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/813087e4984d65e903a7ff98ae28799fac3fef88\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/813087e4984d65e903a7ff98ae28799fac3fef88</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "inwardlinks": {
            "description": "is related to",
            "issuelink": {
              "issuekey": {
                "id": "1770811",
                "content": "SERVER-57501"
              }
            }
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 15 Jul 2021 18:17:33 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        8 weeks, 6 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            8 weeks, 6 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "152.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "gregory.wlodarek"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzjuzz:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "0|i00lh3:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4880",
                "content": "Execution Team 2021-06-28"
              },
              {
                "id": "4881",
                "content": "Execution Team 2021-07-12"
              },
              {
                "id": "4882",
                "content": "Execution Team 2021-07-26"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzjh93:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-57475] ShardingTest.stop must join top-level chunk migrations",
    "link": "https://jira.mongodb.org/browse/SERVER-57475",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The <a href=\"https://github.com/mongodb/mongo/blob/285b313a0571fc6b648f123277cbdce3d0202a2d/src/mongo/shell/shardingtest.js#L423\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">SharingTest stop method</a> is calling the <a href=\"https://github.com/mongodb/mongo/blob/285b313a0571fc6b648f123277cbdce3d0202a2d/src/mongo/shell/shardingtest.js#L426\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">check orphans hook</a> without previously ensuring that top chunk migrations <a href=\"https://github.com/mongodb/mongo/blob/e154d9e78b86d3e32a03ad6ed2b4e165b8ad3bc2/src/mongo/db/s/chunk_splitter.cpp#L424-L428\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">triggered by the chunk splitter</a> have finished.</p>\n\n<p>As a result, the following race condition can happen when the balancer is active:</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>A migration stops on the receiving side, <a href=\"https://github.com/mongodb/mongo/blob/285b313a0571fc6b648f123277cbdce3d0202a2d/src/mongo/db/s/migration_destination_manager.cpp#L981-L991\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">waiting for an overlapping range deletion to end</a></li>\n\t<li>The test finishes, ShardingTest.stop is called to shutdown the cluster</li>\n\t<li>The check orphans hook <a href=\"https://github.com/mongodb/mongo/blob/285b313a0571fc6b648f123277cbdce3d0202a2d/jstests/libs/check_orphans_are_deleted_helpers.js#L61-L62\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">waits for range deletions to drain</a></li>\n\t<li>Overlapping range deletion finishes:\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>The hook finishes waiting</li>\n\t\t<li>A new pending <a href=\"https://github.com/mongodb/mongo/blob/285b313a0571fc6b648f123277cbdce3d0202a2d/src/mongo/db/s/migration_destination_manager.cpp#L1001-L1016\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">range deletion is enqueued</a> and the <a href=\"https://github.com/mongodb/mongo/blob/285b313a0571fc6b648f123277cbdce3d0202a2d/src/mongo/db/s/migration_destination_manager.cpp#L1060\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">clone of documents from the donor</a> begins</li>\n\t</ul>\n\t</li>\n\t<li>The hook <a href=\"https://github.com/mongodb/mongo/blob/285b313a0571fc6b648f123277cbdce3d0202a2d/jstests/libs/check_orphans_are_deleted_helpers.js#L76-L79\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">misidentifies</a> the just cloned documents as orphans</li>\n</ul>\n",
    "environment": "",
    "key": {
      "id": "1769566",
      "content": "SERVER-57475"
    },
    "summary": "ShardingTest.stop must join top-level chunk migrations",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": {
      "label": "sharding-wfbf-day"
    },
    "created": "Fri, 4 Jun 2021 23:18:20 +0000",
    "updated": "Tue, 6 Jul 2021 13:38:18 +0000",
    "resolved": "Thu, 10 Jun 2021 11:09:49 +0000",
    "version": [
      "5.0.0",
      "5.1.0",
      "4.4.6"
    ],
    "fixVersion": [
      "5.1.0",
      "4.4.7",
      "5.0.0-rc2"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3870391",
          "author": "xgen-internal-githook",
          "created": "Thu, 10 Jun 2021 10:57:39 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57475\" title=\"ShardingTest.stop must join top-level chunk migrations\" class=\"issue-link\" data-issue-key=\"SERVER-57475\"><del>SERVER-57475</del></a> ShardingTest.stop must join top-level chunk migrations<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/0b8ac00f8d05b42aa70614114b3cafa29e02b4bd\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/0b8ac00f8d05b42aa70614114b3cafa29e02b4bd</a></p>"
        },
        {
          "id": "3870465",
          "author": "xgen-internal-githook",
          "created": "Thu, 10 Jun 2021 12:03:15 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57475\" title=\"ShardingTest.stop must join top-level chunk migrations\" class=\"issue-link\" data-issue-key=\"SERVER-57475\"><del>SERVER-57475</del></a> ShardingTest.stop must join top-level chunk migrations<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/f6ca20c9b81a0b839be71fddcacd9f3147d8b717\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/f6ca20c9b81a0b839be71fddcacd9f3147d8b717</a></p>"
        },
        {
          "id": "3879151",
          "author": "xgen-internal-githook",
          "created": "Tue, 15 Jun 2021 17:49:05 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57475\" title=\"ShardingTest.stop must join top-level chunk migrations\" class=\"issue-link\" data-issue-key=\"SERVER-57475\"><del>SERVER-57475</del></a> ShardingTest.stop must join top-level chunk migrations<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/75011d291e4382e65c0e20568dbe2e63e4b2b75c\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/75011d291e4382e65c0e20568dbe2e63e4b2b75c</a></p>"
        },
        {
          "id": "3880315",
          "author": "xgen-internal-githook",
          "created": "Wed, 16 Jun 2021 07:49:35 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57475\" title=\"ShardingTest.stop must join top-level chunk migrations\" class=\"issue-link\" data-issue-key=\"SERVER-57475\"><del>SERVER-57475</del></a> ShardingTest.stop must join top-level chunk migrations<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/16e278b6d3a5322ffd08bd605b66905035b70fb4\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/16e278b6d3a5322ffd08bd605b66905035b70fb4</a></p>"
        },
        {
          "id": "3880347",
          "author": "xgen-internal-githook",
          "created": "Wed, 16 Jun 2021 08:23:32 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57475\" title=\"ShardingTest.stop must join top-level chunk migrations\" class=\"issue-link\" data-issue-key=\"SERVER-57475\"><del>SERVER-57475</del></a> (missing import) ShardingTest.stop must join top-level chunk migrations<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/91e0a56ce3eb2780d7c5947b6f2718a412c7a822\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/91e0a56ce3eb2780d7c5947b6f2718a412c7a822</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "5.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21777",
                "content": "v5.0"
              },
              {
                "key": "18953",
                "content": "v4.4"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 4 Jun 2021 23:32:03 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        14 weeks, 2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "pierlauro.sciarelli"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            14 weeks, 2 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "49.0"
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzjvaf:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzksgv:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4978",
              "content": "Sharding EMEA 2021-06-14"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzjhjj:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-57476] Operation may block on prepare conflict while holding oplog slot, stalling replication indefinitely",
    "link": "https://jira.mongodb.org/browse/SERVER-57476",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p><a href=\"https://github.com/mongodb/mongo/blob/2e6ee47814057a76c8ad5b9a80f9f533308e0c78/src/mongo/db/storage/wiredtiger/wiredtiger_prepare_conflict.h#L66\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">wiredTigerPrepareConflictRetry()</a> doesn't release any storage resources when WiredTiger returns WT&#95;PREPARE&#95;CONFLICT. This is because prepare conflicts are expected to resolve quickly and the storage transaction may already have a snapshot compatible with the commitTimestamp of the prepared transaction. However, committing or aborting a prepared transaction depends on the ability of the replica set to replicate and confirm majority&#45;committed writes. If the operation blocked in wiredTigerPrepareConflictRetry() has reserved an oplog slot, then oplog readers will block until the oplog hole is resolved. But oplog readers being blocked prevents new incoming writes from becoming majority&#45;committed, which can prevent a prepared transaction from exiting the kPrepared state.</p>\n\n<hr />\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Thread 56: \"conn2\" (Thread 0x7f4ee3799700 (LWP 15315))</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">...</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#11 mongo::Interruptible::waitForConditionOrInterrupt&lt;std::unique_lock&lt;mongo::latch_detail::Latch&gt;, mongo::WiredTigerSessionCache::waitUntilPreparedUnitOfWorkCommitsOrAborts(mongo::OperationContext*, uint64_t)::&lt;lambda()&gt; &gt; (waitTimer=0x0, pred=..., m=..., cv=..., this=0x55802d3d26c0) at src/mongo/util/interruptible.h:466</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#12 mongo::WiredTigerSessionCache::waitUntilPreparedUnitOfWorkCommitsOrAborts (this=&lt;optimized out&gt;, opCtx=opCtx@entry=0x55802d3d26c0, lastCount=&lt;optimized out&gt;, lastCount@entry=0) at src/mongo/db/storage/wiredtiger/wiredtiger_session_cache.cpp:369</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#13 0x00007f4f0c17c5e1 in mongo::wiredTigerPrepareConflictRetry&lt;mongo::WiredTigerIndexUnique::_keyExists(mongo::OperationContext*, WT_CURSOR*, char const*, size_t)::&lt;lambda()&gt; &gt;(mongo::OperationContext *, mongo::WiredTigerIndexUnique::&lt;lambda()&gt; &amp;&amp;) (opCtx=0x55802d3d26c0, f=...) at src/mongo/db/storage/wiredtiger/wiredtiger_recovery_unit.h:192</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#14 0x00007f4f0c17ce24 in mongo::WiredTigerIndexUnique::_keyExists (this=this@entry=0x55802cba1380, opCtx=opCtx@entry=0x55802d3d26c0, c=&lt;optimized out&gt;, c@entry=0x55802d8d1400, buffer=0x55802d43bc38 \"+\\002\\004\", size=size@entry=3) at src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp:1400</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#15 0x00007f4f0c17d0da in mongo::WiredTigerIndexUnique::_insertTimestampSafe (this=0x55802cba1380, opCtx=0x55802d3d26c0, c=0x55802d8d1400, keyString=..., dupsAllowed=&lt;optimized out&gt;) at src/mongo/util/shared_buffer.h:204</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#16 0x00007f4f0c17e2dc in mongo::WiredTigerIndexUnique::_insert (this=0x55802cba1380, opCtx=0x55802d3d26c0, c=0x55802d8d1400, keyString=..., dupsAllowed=&lt;optimized out&gt;) at src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp:1474</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#17 0x00007f4f0c178b50 in mongo::WiredTigerIndex::insert (this=0x55802cba1380, opCtx=0x55802d3d26c0, keyString=..., dupsAllowed=&lt;optimized out&gt;) at src/mongo/db/storage/wiredtiger/wiredtiger_index.cpp:267</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#18 0x00007f4f096657d0 in mongo::AbstractIndexAccessMethod::insertKeys(mongo::OperationContext*, std::set&lt;mongo::KeyString::Value, std::less&lt;mongo::KeyString::Value&gt;, std::allocator&lt;mongo::KeyString::Value&gt; &gt; const&amp;, mongo::RecordId const&amp;, mongo::InsertDeleteOptions const&amp;, std::function&lt;mongo::Status (mongo::KeyString::Value const&amp;)&gt;&amp;&amp;, long*) (this=0x55802cc25440, opCtx=0x55802d3d26c0, keys=std::set with 1 element = {...}, loc=..., options=..., onDuplicateKey=..., numInserted=0x7f4ee3795510) at /opt/mongodbtoolchain/revisions/e5348beb43e147b74a40f4ca5fb05a330ea646cf/stow/gcc-v3.U0D/include/c++/8.2.0/bits/unique_ptr.h:342</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#19 0x00007f4f0966596e in mongo::AbstractIndexAccessMethod::insertKeysAndUpdateMultikeyPaths(mongo::OperationContext*, std::set&lt;mongo::KeyString::Value, std::less&lt;mongo::KeyString::Value&gt;, std::allocator&lt;mongo::KeyString::Value&gt; &gt; const&amp;, std::set&lt;mongo::KeyString::Value, std::less&lt;mongo::KeyString::Value&gt;, std::allocator&lt;mongo::KeyString::Value&gt; &gt; const&amp;, std::vector&lt;std::set&lt;unsigned long, std::less&lt;unsigned long&gt;, std::allocator&lt;unsigned long&gt; &gt;, std::allocator&lt;std::set&lt;unsigned long, std::less&lt;unsigned long&gt;, std::allocator&lt;unsigned long&gt; &gt; &gt; &gt; const&amp;, mongo::RecordId const&amp;, mongo::InsertDeleteOptions const&amp;, std::function&lt;mongo::Status (mongo::KeyString::Value const&amp;)&gt;&amp;&amp;, long*) (this=0x55802cc25440, opCtx=0x55802d3d26c0, keys=std::set with 1 element = {...}, multikeyMetadataKeys=std::set with 0 elements, multikeyPaths=std::vector of length 1, capacity 1 = {...}, loc=..., options=..., onDuplicateKey=..., numInserted=0x7f4ee3795510) at src/mongo/db/index/index_access_method.cpp:164</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#20 0x00007f4f0a2bae14 in mongo::IndexCatalogImpl::_indexKeys (this=&lt;optimized out&gt;, opCtx=0x55802d3d26c0, index=&lt;optimized out&gt;, keys=std::set with 1 element = {...}, multikeyMetadataKeys=..., multikeyPaths=std::vector of length 1, capacity 1 = {...}, obj=owned BSONObj 33 bytes @ 0x55802d35bf2b = {...}, loc=..., options=..., keysInsertedOut=0x7f4ee37958e8) at /opt/mongodbtoolchain/revisions/e5348beb43e147b74a40f4ca5fb05a330ea646cf/stow/gcc-v3.U0D/include/c++/8.2.0/bits/std_function.h:402</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#21 0x00007f4f0a2c2bce in mongo::IndexCatalogImpl::_indexFilteredRecords (this=0x55802cc26340, opCtx=0x55802d3d26c0, index=0x55802d35b810, bsonRecords=..., keysInsertedOut=0x7f4ee37958e8) at src/mongo/db/catalog/index_catalog_impl.cpp:1408</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#22 0x00007f4f0a2c2f34 in mongo::IndexCatalogImpl::_indexRecords (this=0x55802cc26340, opCtx=0x55802d3d26c0, index=0x55802d35b810, bsonRecords=std::vector of length 3, capacity 3 = {...}, keysInsertedOut=0x7f4ee37958e8) at src/mongo/db/catalog/index_catalog_impl.cpp:1435</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#23 0x00007f4f0a2c3032 in mongo::IndexCatalogImpl::indexRecords (this=0x55802cc26340, opCtx=0x55802d3d26c0, bsonRecords=std::vector of length 3, capacity 3 = {...}, keysInsertedOut=0x7f4ee37958e8) at src/mongo/db/catalog/index_catalog_impl.cpp:1591</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#24 0x00007f4f0a29baab in mongo::CollectionImpl::_insertDocuments (this=0x55802d35b100, opCtx=0x55802d3d26c0, begin={stmtId = 0, oplogSlot = {_timestamp = {i = 1, secs = 536870912}, _term = 1}, doc = &lt;error reading variable: Cannot access memory at address 0x4000000000000001&gt;{_objdata = 0x4000000000000001 &lt;error: Cannot access memory at address 0x4000000000000001&gt;, _ownedBuffer = {_buffer = {_holder = {px = 0x2}}}}}, end={stmtId = 0, oplogSlot = {_timestamp = {i = 1, secs = 536870912}, _term = 1}, doc = &lt;error reading variable: Cannot access memory at address 0x4000000000000001&gt;{_objdata = 0x4000000000000001 &lt;error: Cannot access memory at address 0x4000000000000001&gt;, _ownedBuffer = {_buffer = {_holder = {px = 0x2}}}}}, opDebug=0x55802d359450) at /opt/mongodbtoolchain/revisions/e5348beb43e147b74a40f4ca5fb05a330ea646cf/stow/gcc-v3.U0D/include/c++/8.2.0/bits/unique_ptr.h:342</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#25 0x00007f4f0a2a034e in mongo::CollectionImpl::insertDocuments (this=this@entry=0x55802d35b100, opCtx=opCtx@entry=0x55802d3d26c0, begin=begin@entry={stmtId = -1, oplogSlot = {_timestamp = {i = 5, secs = 1622990608}, _term = 1}, doc = owned BSONObj 33 bytes @ 0x55802d35bf2b = {[_id] = {\"$oid\": \"60bcdf109bb2288d9de42896\"}, [a] = 1.0}}, end=end@entry={stmtId = 0, oplogSlot = {_timestamp = {i = 1, secs = 536870912}, _term = 1}, doc = &lt;error reading variable: Cannot access memory at address 0x4000000000000001&gt;{_objdata = 0x4000000000000001 &lt;error: Cannot access memory at address 0x4000000000000001&gt;, _ownedBuffer = {_buffer = {_holder = {px = 0x2}}}}}, opDebug=0x55802d359450, fromMigrate=false) at src/mongo/db/catalog/collection_impl.cpp:505</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#26 0x00007f4f0aca3963 in mongo::(anonymous namespace)::insertDocuments (opCtx=0x55802d3d26c0, collection=&lt;optimized out&gt;, begin=..., end={stmtId = 0, oplogSlot = {_timestamp = {i = 1, secs = 536870912}, _term = 1}, doc = &lt;error reading variable: Cannot access memory at address 0x4000000000000001&gt;{_objdata = 0x4000000000000001 &lt;error: Cannot access memory at address 0x4000000000000001&gt;, _ownedBuffer = {_buffer = {_holder = {px = 0x2}}}}}, fromMigrate=&lt;optimized out&gt;) at /opt/mongodbtoolchain/revisions/e5348beb43e147b74a40f4ca5fb05a330ea646cf/stow/gcc-v3.U0D/include/c++/8.2.0/bits/stl_iterator.h:845</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#27 0x00007f4f0aca45a1 in mongo::(anonymous namespace)::insertBatchAndHandleErrors (fromMigrate=&lt;optimized out&gt;, out=&lt;optimized out&gt;, lastOpFixer=&lt;optimized out&gt;, batch=std::vector of length 3, capacity 3 = {...}, wholeOp=..., opCtx=&lt;optimized out&gt;) at src/mongo/db/catalog_raii.h:131</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#28 mongo::performInserts (opCtx=&lt;optimized out&gt;, opCtx@entry=0x55802d3d26c0, wholeOp=..., fromMigrate=fromMigrate@entry=false) at src/mongo/db/ops/write_ops_exec.cpp:621</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#29 0x00007f4f04442cef in mongo::(anonymous namespace)::CmdInsert::Invocation::runImpl (this=0x55802d4090c0, opCtx=0x55802d3d26c0, result=...) at src/mongo/db/commands/write_commands/write_commands.cpp:299</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#30 0x00007f4f044403dd in mongo::(anonymous namespace)::WriteCommand::InvocationBase::run (this=0x55802d4090c0, opCtx=0x55802d3d26c0, result=0x55802cf10cc0) at src/mongo/db/commands/write_commands/write_commands.cpp:241</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#31 0x00007f4f08db14ff in mongo::CommandHelpers::runCommandInvocation (opCtx=0x55802d3d26c0, request=..., invocation=0x55802d4090c0, response=0x55802cf10cc0) at src/mongo/db/commands.cpp:184</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#32 0x00007f4f0469364f in mongo::(anonymous namespace)::runCommandImpl (opCtx=&lt;optimized out&gt;, invocation=&lt;optimized out&gt;, request=..., replyBuilder=0x55802cf10cc0, startOperationTime=..., behaviors=..., extraFieldsBuilder=0x7f4ee37968e0, sessionOptions=...) at src/mongo/db/service_entry_point_common.cpp:828</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#33 0x00007f4f04695cf9 in mongo::(anonymous namespace)::execCommandDatabase (opCtx=&lt;optimized out&gt;, command=&lt;optimized out&gt;, request=..., replyBuilder=&lt;optimized out&gt;, behaviors=...) at src/mongo/db/service_entry_point_common.cpp:1226</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#34 0x00007f4f04697070 in mongo::(anonymous namespace)::&lt;lambda()&gt;::operator() (__closure=&lt;optimized out&gt;) at /opt/mongodbtoolchain/revisions/e5348beb43e147b74a40f4ca5fb05a330ea646cf/stow/gcc-v3.U0D/include/c++/8.2.0/bits/unique_ptr.h:342</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#35 mongo::(anonymous namespace)::receivedCommands (opCtx=0x55802d3d26c0, message=..., behaviors=...) at src/mongo/db/service_entry_point_common.cpp:1440</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#36 0x00007f4f04697cfd in mongo::ServiceEntryPointCommon::handleRequest (opCtx=0x55802d3d26c0, m=..., behaviors=...) at src/mongo/db/service_entry_point_common.cpp:1745\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">Thread 43: \"conn1\" (Thread 0x7f4ee9cbf700 (LWP 15300))</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">...</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#11 mongo::Interruptible::waitForConditionOrInterrupt&lt;std::unique_lock&lt;mongo::latch_detail::Latch&gt;, mongo::WiredTigerOplogManager::waitForAllEarlierOplogWritesToBeVisible(const mongo::WiredTigerRecordStore*, mongo::OperationContext*)::&lt;lambda()&gt; &gt; (waitTimer=0x0, pred=..., m=..., cv=..., this=0x55802d3d18c0) at src/mongo/util/interruptible.h:466</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#12 mongo::WiredTigerOplogManager::waitForAllEarlierOplogWritesToBeVisible (this=&lt;optimized out&gt;, oplogRecordStore=&lt;optimized out&gt;, opCtx=0x55802d3d18c0) at src/mongo/db/storage/wiredtiger/wiredtiger_oplog_manager.cpp:147</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#13 0x00007f4f09ea2244 in mongo::CollectionScan::doWork (this=0x55802cb75c00, out=0x7f4ee9cbb8c8) at src/mongo/db/exec/plan_stage.h:383</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#14 0x00007f4f09ec3316 in mongo::PlanStage::work (this=0x55802cb75c00, out=out@entry=0x7f4ee9cbb8c8) at src/mongo/db/exec/plan_stage.cpp:47</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#15 0x00007f4f09f20f7a in mongo::PlanExecutorImpl::_getNextImpl (this=0x55802d379960, objOut=0x7f4ee9cbba30, dlOut=0x0) at /opt/mongodbtoolchain/revisions/e5348beb43e147b74a40f4ca5fb05a330ea646cf/stow/gcc-v3.U0D/include/c++/8.2.0/bits/unique_ptr.h:342</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#16 0x00007f4f09f219bb in mongo::PlanExecutorImpl::getNext (this=&lt;optimized out&gt;, objOut=0x7f4ee9cbbb28, dlOut=&lt;optimized out&gt;) at src/mongo/db/query/plan_executor_impl.cpp:413</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#17 0x00007f4f0440f753 in mongo::(anonymous namespace)::FindCmd::Invocation::run (this=0x55802cf10680, opCtx=0x55802d3d18c0, result=&lt;optimized out&gt;) at src/mongo/db/commands/find_cmd.cpp:516</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#18 0x00007f4f08db14ff in mongo::CommandHelpers::runCommandInvocation (opCtx=0x55802d3d18c0, request=..., invocation=0x55802cf10680, response=0x55802cf104a0) at src/mongo/db/commands.cpp:184</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#19 0x00007f4f04692d72 in mongo::(anonymous namespace)::runCommandImpl (opCtx=&lt;optimized out&gt;, invocation=&lt;optimized out&gt;, request=..., replyBuilder=0x55802cf104a0, startOperationTime=..., behaviors=..., extraFieldsBuilder=0x7f4ee9cbc8e0, sessionOptions=...) at src/mongo/db/service_entry_point_common.cpp:859</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#20 0x00007f4f04695cf9 in mongo::(anonymous namespace)::execCommandDatabase (opCtx=&lt;optimized out&gt;, command=&lt;optimized out&gt;, request=..., replyBuilder=&lt;optimized out&gt;, behaviors=...) at src/mongo/db/service_entry_point_common.cpp:1226</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#21 0x00007f4f04697070 in mongo::(anonymous namespace)::&lt;lambda()&gt;::operator() (__closure=&lt;optimized out&gt;) at /opt/mongodbtoolchain/revisions/e5348beb43e147b74a40f4ca5fb05a330ea646cf/stow/gcc-v3.U0D/include/c++/8.2.0/bits/unique_ptr.h:342</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#22 mongo::(anonymous namespace)::receivedCommands (opCtx=0x55802d3d18c0, message=..., behaviors=...) at src/mongo/db/service_entry_point_common.cpp:1440</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">#23 0x00007f4f04697cfd in mongo::ServiceEntryPointCommon::handleRequest (opCtx=0x55802d3d18c0, m=..., behaviors=...) at src/mongo/db/service_entry_point_common.cpp:1745\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>",
    "environment": "",
    "key": {
      "id": "1769596",
      "content": "SERVER-57476"
    },
    "summary": "Operation may block on prepare conflict while holding oplog slot, stalling replication indefinitely",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "daniel.gottlieb",
      "content": "Daniel Gottlieb"
    },
    "reporter": {
      "username": "max.hirschhorn",
      "content": "Max Hirschhorn"
    },
    "labels": "",
    "created": "Sat, 5 Jun 2021 01:05:08 +0000",
    "updated": "Mon, 12 Jul 2021 08:43:05 +0000",
    "resolved": "Thu, 10 Jun 2021 14:06:39 +0000",
    "version": [
      "4.2.0",
      "4.4.0",
      "5.0.0-rc0"
    ],
    "fixVersion": [
      "5.1.0",
      "4.2.15",
      "4.4.7",
      "5.0.0-rc2"
    ],
    "votes": "0",
    "watches": "26",
    "comments": {
      "comment": [
        {
          "id": "3863151",
          "author": "daniel.gottlieb@10gen.com",
          "created": "Mon, 7 Jun 2021 18:20:58 +0000",
          "content": "<p>For this ticket I plan on failing operations with a <tt>WriteConflictException</tt> that:</p>\n<ul>\n\t<li>hit <a href=\"https://github.com/mongodb/mongo/blob/master/src/mongo/db/storage/wiredtiger/wiredtiger_prepare_conflict.h#L74\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">a prepare conflict error</a></li>\n\t<li>and are holding open an oplog hole</li>\n</ul>\n\n\n<p>This resolution should eliminate the possibility that any deployments in the wild gets stuck in the way this ticket describes. However, this change won't discover existing potential problems that are not already being exercised. <a href=\"https://jira.mongodb.org/browse/SERVER-57506\" title=\"Eagerly fail when a timestamped transaction enters a prepareConflictRetry loop\" class=\"issue-link\" data-issue-key=\"SERVER-57506\">SERVER-57506</a> is for a change that can identify problematic transactions without requiring they hit a prepare conflict.</p>"
        },
        {
          "id": "3866888",
          "author": "bruce.lucas@10gen.com",
          "created": "Tue, 8 Jun 2021 17:45:13 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=daniel.gottlieb\" class=\"user-hover\" rel=\"daniel.gottlieb\">Daniel Gottlieb</a>, does this have the possibility of user operations that didn't previously encounter write conflict errors, or were unlikely to, to now possibly see a write conflict? That's not necessarily a problem (unless it makes operations <em>likely</em> to see write conflicts at a high rate), but it may be something we need to be aware of in case customers have questions.</p>\n\n<p>Also, I wonder if there is any mechanism in the error returned to indicate to a user <em>why</em> the are seeing a write conflict? We have seen cases where write conflicts can be generated that catch users by surprise (even though we say they should always be prepared to handle write conflicts).</p>"
        },
        {
          "id": "3867076",
          "author": "daniel.gottlieb@10gen.com",
          "created": "Tue, 8 Jun 2021 18:38:08 +0000",
          "content": "<p>Thanks for the thoughtful questions <a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=bruce.lucas\" class=\"user-hover\" rel=\"bruce.lucas\">Bruce Lucas</a>. Given the interest in this scenario, I appreciate the timely feedback that helps us quickly gain confidence that the described change is correct, complete and minimizes impact on users.</p>\n\n<blockquote>\n<p>Daniel Gottlieb, does this have the possibility of user operations that didn't previously encounter write conflict errors, or were unlikely to, to now possibly see a write conflict?</p></blockquote>\n<p>Operations that were unlikely to encounter a write conflict are now more likely to observe one[1]. But I don't believe we return a write conflict for anything that couldn't do so previously. </p>\n\n<p>I've been using this chart to describe the interleaving that leads to a stall:</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| Preparer                              | VectoredInsert            | OplogVisibility Ts |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|---------------------------------------+---------------------------+--------------------|</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| BeginTxn                              |                           |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| Write A                               |                           |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|                                       | BeginTxn                  |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|                                       | Preallocates TS(10, 11)   |                  9 |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| (side txn commits prepare oplog @ 12) |                           |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| Prepare 12                            |                           |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|                                       | Write A (PrepareConflict) |                    |\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n<p>But if we reorder who wins the race to allocate a timestamp, we'd now create an \"unnecessary\" write conflict (the prepare conflict would resolve, allowing the \"vectored insert\" to make progress without retrying the whole operation):</p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| Preparer                              | VectoredInsert                             | OplogVisibility Ts |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|---------------------------------------+--------------------------------------------+--------------------|</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| BeginTxn                              |                                            |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| Write A                               |                                            |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| (side txn commits prepare oplog @ 10) |                                            |                 10 |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| Prepare 10                            |                                            |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|                                       | BeginTxn                                   |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|                                       | Preallocates TS(11, 12)                    |                 10 |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">|                                       | Write A (PrepareConflict -&gt; WriteConflict) |                    |</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">| TS(10) becomes majority committed     |                                            |                    |\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>\n\n<blockquote>\n<p>That's not necessarily a problem (unless it makes operations likely to see write conflicts at a high rate), but it may be something we need to be aware of in case customers have questions.</p></blockquote>\n<p>I don't think we'll see operations write conflict at a high rate, but it's hard to say for certain. The above diagram demonstrates how the benign case can result in a write conflict while we wait for a majority write. The window can be large (network timescale versus CPU timescale for healthy systems). But to be clear, I claim:<br/>\n1) For an application retrying quickly, the overall latency would be similar between the two behaviors. Obviously retrying the write conflict wastes more CPU and/or network. <br/>\n2) Any newly returned write conflict could be unlucky with how timestamps were allocated and could have resulted in a stall. We won't introduce any new write conflicts for a code path that's inherently safe.</p>\n\n<p>That said, we aren't fully aware of all the cases where we have this race. From the stalls we've investigated, some don't seem to be this specific scenario with vectored inserts against a collection with a non-_id unique index (but we were unable to rule it out entirely &#8211; we didn't have visibility into unsharded collections and their index specifications).</p>\n\n<blockquote>\n<p>Also, I wonder if there is any mechanism in the error returned to indicate to a user why the are seeing a write conflict?</p></blockquote>\n<p>I'm not familiar with any mechanism. I know we already struggle to return users an appropriate error message when violating a unique constraint for index keys in the presence of a non-default collation. This feels like a similar problem.</p>\n\n<p>[1] All of these prepare conflicts being transformed into a write conflict could* already be a write conflict today if, for example, the vectored insert tries to write to the document before the \"prepared operation\" goes into a prepared state. If the vectored insert was not part of an MDB transaction, the write conflict will be retried internally. If it were part of an MDB transaction, the transaction would be aborted and the application would have to retry.</p>\n\n<p>Applications that are already resilient to write conflicts in their MDB transactions today should continue to be so after this patch. As noted above, this patch will make the window where applications can see write conflicts change from a CPU timescale to network. Thus it's plausible this could expose retrying bugs in applications that were (un?)lucky enough to not run into them yet.</p>"
        },
        {
          "id": "3867785",
          "author": "xgen-internal-githook",
          "created": "Wed, 9 Jun 2021 01:58:38 +0000",
          "content": "<p>Author:</p>\n{'name': 'Daniel Gottlieb', 'email': 'daniel.gottlieb@mongodb.com', 'username': 'dgottlieb'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57476\" title=\"Operation may block on prepare conflict while holding oplog slot, stalling replication indefinitely\" class=\"issue-link\" data-issue-key=\"SERVER-57476\"><del>SERVER-57476</del></a>: Return a WriteConflict when a timestamped transaction hits a prepare conflict.<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/44419183dfabb246c0a112f6060a372e90ee0d44\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/44419183dfabb246c0a112f6060a372e90ee0d44</a></p>"
        },
        {
          "id": "3867808",
          "author": "xgen-internal-githook",
          "created": "Wed, 9 Jun 2021 02:55:35 +0000",
          "content": "<p>Author:</p>\n{'name': 'Daniel Gottlieb', 'email': 'daniel.gottlieb@mongodb.com', 'username': 'dgottlieb'}\n<p>Message: Revert \"<a href=\"https://jira.mongodb.org/browse/SERVER-57476\" title=\"Operation may block on prepare conflict while holding oplog slot, stalling replication indefinitely\" class=\"issue-link\" data-issue-key=\"SERVER-57476\"><del>SERVER-57476</del></a>: Return a WriteConflict when a timestamped transaction hits a prepare conflict.\"</p>\n\n<p>This reverts commit 44419183dfabb246c0a112f6060a372e90ee0d44.<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/990f8ede6f89e44315688d4f679c28ff53b672d1\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/990f8ede6f89e44315688d4f679c28ff53b672d1</a></p>"
        },
        {
          "id": "3869464",
          "author": "daniel.gottlieb@10gen.com",
          "created": "Wed, 9 Jun 2021 19:29:24 +0000",
          "content": "<blockquote>\n<p>Daniel Gottlieb, does this have the possibility of user operations that didn't previously encounter write conflict errors, or were unlikely to, to now possibly see a write conflict?</p></blockquote>\n<p>Changing my answer: no. This should only create {{WriteConflictException}}s that get retried internally and never get returned to a user. This is based off the assumption that (MDB) transactions don't generate their oplog timestamps until the very end.</p>"
        },
        {
          "id": "3870695",
          "author": "xgen-internal-githook",
          "created": "Thu, 10 Jun 2021 14:05:35 +0000",
          "content": "<p>Author:</p>\n{'name': 'Daniel Gottlieb', 'email': 'daniel.gottlieb@mongodb.com', 'username': 'dgottlieb'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57476\" title=\"Operation may block on prepare conflict while holding oplog slot, stalling replication indefinitely\" class=\"issue-link\" data-issue-key=\"SERVER-57476\"><del>SERVER-57476</del></a>: Return a WriteConflict when a timestamped transaction hits a prepare conflict.<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/1e7e343fb6c90fbf0c62deabf61630353e2e5e29\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/1e7e343fb6c90fbf0c62deabf61630353e2e5e29</a></p>"
        },
        {
          "id": "3872023",
          "author": "xgen-internal-githook",
          "created": "Thu, 10 Jun 2021 21:32:56 +0000",
          "content": "<p>Author:</p>\n{'name': 'Daniel Gottlieb', 'email': 'daniel.gottlieb@mongodb.com', 'username': 'dgottlieb'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57476\" title=\"Operation may block on prepare conflict while holding oplog slot, stalling replication indefinitely\" class=\"issue-link\" data-issue-key=\"SERVER-57476\"><del>SERVER-57476</del></a>: Return a WriteConflict when a timestamped transaction hits a prepare conflict.</p>\n\n<p>(cherry picked from commit 1e7e343fb6c90fbf0c62deabf61630353e2e5e29)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/2b62a316d722b406fbbc48bac492427844f244a3\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/2b62a316d722b406fbbc48bac492427844f244a3</a></p>"
        },
        {
          "id": "3872062",
          "author": "xgen-internal-githook",
          "created": "Thu, 10 Jun 2021 21:46:52 +0000",
          "content": "<p>Author:</p>\n{'name': 'Daniel Gottlieb', 'email': 'daniel.gottlieb@mongodb.com', 'username': 'dgottlieb'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57476\" title=\"Operation may block on prepare conflict while holding oplog slot, stalling replication indefinitely\" class=\"issue-link\" data-issue-key=\"SERVER-57476\"><del>SERVER-57476</del></a>: Return a WriteConflict when a timestamped transaction hits a prepare conflict.</p>\n\n<p>(cherry picked from commit 1e7e343fb6c90fbf0c62deabf61630353e2e5e29)<br/>\nBranch: v4.4<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/cfffcff7de7417c29a1d95d7a856c7874b9eebd1\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/cfffcff7de7417c29a1d95d7a856c7874b9eebd1</a></p>"
        },
        {
          "id": "3872235",
          "author": "xgen-internal-githook",
          "created": "Fri, 11 Jun 2021 00:41:01 +0000",
          "content": "<p>Author:</p>\n{'name': 'Daniel Gottlieb', 'email': 'daniel.gottlieb@mongodb.com', 'username': 'dgottlieb'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57476\" title=\"Operation may block on prepare conflict while holding oplog slot, stalling replication indefinitely\" class=\"issue-link\" data-issue-key=\"SERVER-57476\"><del>SERVER-57476</del></a>: Return a WriteConflict when a timestamped transaction hits a prepare conflict.</p>\n\n<p>(cherry picked from commit 1e7e343fb6c90fbf0c62deabf61630353e2e5e29)<br/>\nBranch: v4.2<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/379db12e4d046c82f60732bcf11c98019f04bbf5\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/379db12e4d046c82f60732bcf11c98019f04bbf5</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": {
              "issuekey": {
                "id": "1770879",
                "content": "SERVER-57506"
              }
            }
          },
          "inwardlinks": {
            "description": "is related to",
            "issuelink": {
              "issuekey": {
                "id": "1611830",
                "content": "SERVER-54284"
              }
            }
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "10.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21777",
                "content": "v5.0"
              },
              {
                "key": "18953",
                "content": "v4.4"
              },
              {
                "key": "16775",
                "content": "v4.2"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_13552",
          "key": "com.go2group.jira.plugin.crm:crm_generic_field",
          "customfieldname": "Case",
          "customfieldvalues": {
            "customfieldvalue": "[5002K00000vdDucQAE]"
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 7 Jun 2021 18:20:58 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        15 weeks ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "joanna.cheng"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            15 weeks ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "bruce.lucas",
              "daniel.gottlieb",
              "xgen-internal-githook",
              "max.hirschhorn"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzjvh3:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzksnz:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5035",
              "content": "Repl 2021-06-14"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzjhq7:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-57587] Avoid scheduling more range deletion tasks for same range during rename",
    "link": "https://jira.mongodb.org/browse/SERVER-57587",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Currently, the \"idempotency\" of <a href=\"https://github.com/mongodb/mongo/blob/5a1ea618307b6f362202e283c3e180d8a71df3d5/src/mongo/db/s/range_deletion_util.cpp#L448-L465\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">restoreRangeDeletionTasksForRename</a> is achieved by <a href=\"https://github.com/mongodb/mongo/blob/5a1ea618307b6f362202e283c3e180d8a71df3d5/src/mongo/db/s/range_deletion_util.cpp#L457-L462\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">deleting previously \"renamed\" range deletion tasks and reschedule them with new migration ids</a>. By doing so, the persistent state is clean but duplicate tasks are not unscheduled from the migration util executor.</p>\n\n<p>A better strategy would be to assign migrations id to snapshotted range deletions at an <a href=\"https://github.com/mongodb/mongo/blob/5a1ea618307b6f362202e283c3e180d8a71df3d5/src/mongo/db/s/range_deletion_util.cpp#L443\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">early stage</a> and afterwards simply check if the task has been already scheduled for the target collection.</p>",
    "environment": "",
    "key": {
      "id": "1774697",
      "content": "SERVER-57587"
    },
    "summary": "Avoid scheduling more range deletion tasks for same range during rename",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": {
      "label": "PM-1965-Cleanup"
    },
    "created": "Wed, 9 Jun 2021 19:01:55 +0000",
    "updated": "Fri, 11 Jun 2021 10:33:38 +0000",
    "resolved": "Thu, 10 Jun 2021 08:02:36 +0000",
    "version": [
      "5.1.0",
      "5.0.0-rc1"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.0-rc2"
    ],
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3870207",
          "author": "xgen-internal-githook",
          "created": "Thu, 10 Jun 2021 08:00:26 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57587\" title=\"Avoid scheduling more range deletion tasks for same range during rename\" class=\"issue-link\" data-issue-key=\"SERVER-57587\"><del>SERVER-57587</del></a> Avoid scheduling more range deletion tasks for same range during rename<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/51a831577b0f0581e21724f4ade10e4880cc4f32\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/51a831577b0f0581e21724f4ade10e4880cc4f32</a></p>"
        },
        {
          "id": "3872702",
          "author": "xgen-internal-githook",
          "created": "Fri, 11 Jun 2021 10:15:28 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57587\" title=\"Avoid scheduling more range deletion tasks for same range during rename\" class=\"issue-link\" data-issue-key=\"SERVER-57587\"><del>SERVER-57587</del></a> Avoid scheduling more range deletion tasks for same range during rename<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/244126c7c0c04ccb061570fee9bdfc63bf5d3f70\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/244126c7c0c04ccb061570fee9bdfc63bf5d3f70</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": {
        "id": "10420",
        "name": "Backports",
        "outwardlinks": {
          "description": "backported by"
        }
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 10 Jun 2021 08:00:26 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        15 weeks ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-1965"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            15 weeks ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzkqrz:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzln5z:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4978",
              "content": "Sharding EMEA 2021-06-14"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzkd13:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-57675] random_DDL_CRUD_operations.js may attempt to rename to a same destination ns twice",
    "link": "https://jira.mongodb.org/browse/SERVER-57675",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>random_DDL_CRUD_operations.js runs renameCollection with </p>\n{dropTarget: false}\n<p>. Thus, the destination ns must not exist, else it will fail with NamespaceExists error.</p>\n\n<p>random_DDL_CRUD_operations.js attempts to ensure that won't happen by picking 'unique' destination names. It does so by <a href=\"https://github.com/mongodb/mongo/blob/28f6788e4e57219bce4a98ad95d082823f6598e5/jstests/concurrency/fsm_workloads/random_DDL_CRUD_operations.js#L114\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">appending a timestamp to the collection name</a>. However, if done twice in the same second, the test could generate the same destination ns twice.</p>\n\n<p>This could be addressed by appending a randomly generated UUID instead of a timestamp.</p>",
    "environment": "",
    "key": {
      "id": "1780287",
      "content": "SERVER-57675"
    },
    "summary": "random_DDL_CRUD_operations.js may attempt to rename to a same destination ns twice",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "jordi.serra-torrens",
      "content": "Jordi Serra Torrens"
    },
    "reporter": {
      "username": "jordi.serra-torrens",
      "content": "Jordi Serra Torrens"
    },
    "labels": "",
    "created": "Mon, 14 Jun 2021 14:00:10 +0000",
    "updated": "Mon, 20 Sep 2021 15:16:07 +0000",
    "resolved": "Tue, 15 Jun 2021 13:50:51 +0000",
    "version": "5.1.0",
    "fixVersion": [
      "5.1.0",
      "5.0.4"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3878321",
          "author": "xgen-internal-githook",
          "created": "Tue, 15 Jun 2021 13:49:19 +0000",
          "content": "<p>Author:</p>\n{'name': 'Jordi Serra Torrens', 'email': 'jordi.serra-torrens@mongodb.com', 'username': 'jordist'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57675\" title=\"random_DDL_CRUD_operations.js may attempt to rename to a same destination ns twice\" class=\"issue-link\" data-issue-key=\"SERVER-57675\"><del>SERVER-57675</del></a> random_DDL_CRUD_operations.js may attempt to rename to a same destination ns twice<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/08f651f82203b1b5f7dd07d6a5110458e7f3087c\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/08f651f82203b1b5f7dd07d6a5110458e7f3087c</a></p>"
        },
        {
          "id": "4071539",
          "author": "xgen-internal-githook",
          "created": "Mon, 20 Sep 2021 14:59:54 +0000",
          "content": "<p>Author:</p>\n{'name': 'Jordi Serra Torrens', 'email': 'jordi.serra-torrens@mongodb.com', 'username': 'jordist'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57675\" title=\"random_DDL_CRUD_operations.js may attempt to rename to a same destination ns twice\" class=\"issue-link\" data-issue-key=\"SERVER-57675\"><del>SERVER-57675</del></a> random_DDL_CRUD_operations.js may attempt to rename to a same destination ns twice</p>\n\n<p>(cherry picked from commit 08f651f82203b1b5f7dd07d6a5110458e7f3087c)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/9313fbaac63f091c4590ec862456fd115c4a57dd\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/9313fbaac63f091c4590ec862456fd115c4a57dd</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Tue, 15 Jun 2021 13:49:19 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-1965"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "21.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "jordi.serra-torrens"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzlp4n:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzmk8n:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4979",
              "content": "Sharding EMEA 2021-06-28"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzlbdr:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-57740] ShardingTest use X509 also with preferTLS mode",
    "link": "https://jira.mongodb.org/browse/SERVER-57740",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Tests in jstests/external_auth <a href=\"https://github.com/10gen/mongo-enterprise-modules/blob/6b11919d5b51ac0f380d062e93f692d08180e179/jstests/external_auth/lib/ldap_authz_lib.js#L102\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">use preferTLS mode</a> but requireÂ  X509 authentication in sharded cluster. On the other hand ShardingTest <a href=\"https://github.com/mongodb/mongo/blob/02e789a65916d2ec180a6d49a6114f92cd9ff36f/src/mongo/shell/shardingtest.js#L762-L763\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">uses X509 authentication only with requireTLS mode</a>. So we should make ShardingTest to use X509 authentication also when TLS mode is preferred.</p>",
    "environment": "",
    "key": {
      "id": "1786078",
      "content": "SERVER-57740"
    },
    "summary": "ShardingTest use X509 also with preferTLS mode",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "tommaso.tocci",
      "content": "Tommaso Tocci"
    },
    "reporter": {
      "username": "tommaso.tocci",
      "content": "Tommaso Tocci"
    },
    "labels": "",
    "created": "Wed, 16 Jun 2021 13:48:44 +0000",
    "updated": "Tue, 31 Aug 2021 13:04:10 +0000",
    "resolved": "Thu, 17 Jun 2021 12:46:50 +0000",
    "version": "5.1.0",
    "fixVersion": [
      "5.1.0",
      "5.0.3"
    ],
    "component": [
      "Sharding",
      "Testing Infrastructure"
    ],
    "votes": "0",
    "watches": "0",
    "comments": {
      "comment": [
        {
          "id": "3884451",
          "author": "xgen-internal-githook",
          "created": "Thu, 17 Jun 2021 12:13:35 +0000",
          "content": "<p>Author:</p>\n{'name': 'Tommaso Tocci', 'email': 'tommaso.tocci@mongodb.com', 'username': 'toto-dev'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57740\" title=\"ShardingTest use X509 also with preferTLS mode\" class=\"issue-link\" data-issue-key=\"SERVER-57740\"><del>SERVER-57740</del></a> ShardingTest use X509 also with preferTLS mode<br/>\nBranch: master<br/>\n<a href=\"https://github.com/10gen/mongo-enterprise-modules/commit/56878b716e1f17132752d7e0bf190932f5c3e077\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/10gen/mongo-enterprise-modules/commit/56878b716e1f17132752d7e0bf190932f5c3e077</a></p>"
        },
        {
          "id": "3884452",
          "author": "xgen-internal-githook",
          "created": "Thu, 17 Jun 2021 12:13:39 +0000",
          "content": "<p>Author:</p>\n{'name': 'Tommaso Tocci', 'email': 'tommaso.tocci@mongodb.com', 'username': 'toto-dev'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57740\" title=\"ShardingTest use X509 also with preferTLS mode\" class=\"issue-link\" data-issue-key=\"SERVER-57740\"><del>SERVER-57740</del></a> ShardingTest use X509 also with preferTLS mode<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/5205bcea3a1506d160bc8b106bf8317844fd943c\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/5205bcea3a1506d160bc8b106bf8317844fd943c</a></p>"
        },
        {
          "id": "4031102",
          "author": "xgen-internal-githook",
          "created": "Tue, 31 Aug 2021 12:41:29 +0000",
          "content": "<p>Author:</p>\n{'name': 'Tommaso Tocci', 'email': 'tommaso.tocci@mongodb.com', 'username': 'toto-dev'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57740\" title=\"ShardingTest use X509 also with preferTLS mode\" class=\"issue-link\" data-issue-key=\"SERVER-57740\"><del>SERVER-57740</del></a> ShardingTest use X509 also with preferTLS mode</p>\n\n<p>(cherry picked from commit 56878b716e1f17132752d7e0bf190932f5c3e077)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/10gen/mongo-enterprise-modules/commit/f9c5e7f1321d16b024a8793e87577a3341382a7e\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/10gen/mongo-enterprise-modules/commit/f9c5e7f1321d16b024a8793e87577a3341382a7e</a></p>"
        },
        {
          "id": "4031115",
          "author": "xgen-internal-githook",
          "created": "Tue, 31 Aug 2021 12:47:51 +0000",
          "content": "<p>Author:</p>\n{'name': 'Tommaso Tocci', 'email': 'tommaso.tocci@mongodb.com', 'username': 'toto-dev'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57740\" title=\"ShardingTest use X509 also with preferTLS mode\" class=\"issue-link\" data-issue-key=\"SERVER-57740\"><del>SERVER-57740</del></a> ShardingTest use X509 also with preferTLS mode</p>\n\n<p>(cherry picked from commit 5205bcea3a1506d160bc8b106bf8317844fd943c)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/2e5dfc90df4e955eedc95be37e907f24eddf8fad\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/2e5dfc90df4e955eedc95be37e907f24eddf8fad</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "4.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 17 Jun 2021 12:13:35 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        3 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            3 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "169.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "tommaso.tocci"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzmorr:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hznjqn:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4979",
              "content": "Sharding EMEA 2021-06-28"
            }
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>run the external_auth suite</p>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzmb0v:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-57744] Test infrastructure does not handle config server stepdowns on ManualInterventionRequired errors",
    "link": "https://jira.mongodb.org/browse/SERVER-57744",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The legacy shard collection path is prepared to <a href=\"https://github.com/mongodb/mongo/blob/a616859a60e6cbb40ab0b7ddbeed06e726bd40bc/src/mongo/db/s/shard_collection_legacy.cpp#L121-L156\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">detect and warn</a> about leftover metadata if finds entries on <em>config.chunks</em> when <a href=\"https://github.com/mongodb/mongo/blob/a616859a60e6cbb40ab0b7ddbeed06e726bd40bc/src/mongo/db/s/shard_collection_legacy.cpp#L557-L576\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">sharding a collection</a>. There is a helper script that, if included, automatically tries to <a href=\"https://github.com/mongodb/mongo/blob/69ea6153374eaa35128871ea13e48cd8735f0f04/jstests/libs/override_methods/mongos_manual_intervention_actions.js#L16-L26\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">clean up <em>config.chunks</em></a> but, this helper is not ready to handle if the config server steps down when cleaning the metadata.</p>\n\n<p>We could add a try/catch block and retry if there is any stepdown error.</p>",
    "environment": "",
    "key": {
      "id": "1786315",
      "content": "SERVER-57744"
    },
    "summary": "Test infrastructure does not handle config server stepdowns on ManualInterventionRequired errors",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "marcos.grillo",
      "content": "Marcos JosÃ© Grillo Ramirez"
    },
    "reporter": {
      "username": "marcos.grillo",
      "content": "Marcos JosÃ© Grillo Ramirez"
    },
    "labels": {
      "label": "PM-1965-Cleanup"
    },
    "created": "Wed, 16 Jun 2021 15:20:13 +0000",
    "updated": "Fri, 25 Jun 2021 11:05:56 +0000",
    "resolved": "Thu, 17 Jun 2021 23:13:17 +0000",
    "version": [
      "5.1.0",
      "5.0.0-rc1"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.0-rc3"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3881939",
          "author": "marcos.grillo",
          "created": "Wed, 16 Jun 2021 17:55:28 +0000",
          "content": "<p>Adding reproducible files, <span class=\"nobr\"><a href=\"https://jira.mongodb.org/secure/attachment/320586/320586_BF-21548.patch\" title=\"BF-21548.patch attached to SERVER-57744\">BF-21548.patch<sup><img class=\"rendericon\" src=\"https://jira.mongodb.org/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span>  <span class=\"nobr\"><a href=\"https://jira.mongodb.org/secure/attachment/320588/320588_check_manual_intervention.js\" title=\"check_manual_intervention.js attached to SERVER-57744\">check_manual_intervention.js<sup><img class=\"rendericon\" src=\"https://jira.mongodb.org/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span> </p>"
        },
        {
          "id": "3885718",
          "author": "xgen-internal-githook",
          "created": "Thu, 17 Jun 2021 19:19:26 +0000",
          "content": "<p>Author:</p>\n{'name': 'Marcos JosÃ© Grillo Ramirez', 'email': 'marcos.grillo@mongodb.com', 'username': 'm4nti5'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57744\" title=\"Test infrastructure does not handle config server stepdowns on ManualInterventionRequired errors\" class=\"issue-link\" data-issue-key=\"SERVER-57744\"><del>SERVER-57744</del></a> Use retryable writes when removing chunks from the manual intervention helper<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/d2a47c173586244500a7ac0465e94aabc8871e91\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/d2a47c173586244500a7ac0465e94aabc8871e91</a></p>"
        },
        {
          "id": "3886753",
          "author": "xgen-internal-githook",
          "created": "Fri, 18 Jun 2021 12:09:02 +0000",
          "content": "<p>Author:</p>\n{'name': 'Marcos JosÃ© Grillo Ramirez', 'email': 'marcos.grillo@mongodb.com', 'username': 'm4nti5'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57744\" title=\"Test infrastructure does not handle config server stepdowns on ManualInterventionRequired errors\" class=\"issue-link\" data-issue-key=\"SERVER-57744\"><del>SERVER-57744</del></a> Use retryable writes when removing chunks from the manual intervention helper</p>\n\n<p>(cherry picked from commit d2a47c173586244500a7ac0465e94aabc8871e91)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/8d2014e097904b60f7df66e9786f01b98876e0a4\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/8d2014e097904b60f7df66e9786f01b98876e0a4</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": {
      "attachment": [
        {
          "id": "320586",
          "name": "BF-21548.patch",
          "size": "2335",
          "author": "marcos.grillo",
          "created": "Wed, 16 Jun 2021 17:54:18 +0000"
        },
        {
          "id": "320588",
          "name": "check_manual_intervention.js",
          "size": "1577",
          "author": "marcos.grillo",
          "created": "Wed, 16 Jun 2021 17:58:54 +0000"
        }
      ]
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 17 Jun 2021 19:19:26 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        14 weeks ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-1965"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "marcos.grillo"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            14 weeks ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "158.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "marcos.grillo"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzmq8f:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hznl3z:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4979",
              "content": "Sharding EMEA 2021-06-28"
            }
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>1. Include the manual intervention helper<br/>\n2. Set FCV version 4.4<br/>\n2. Shard a collection and step down the node before writing the config.collections entry<br/>\n3. Step down the config server when the script is trying to clean up the config.chunks collection</p>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzmchj:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-57859] DDL coordinators must indefinitely retry on CommandNotFound error",
    "link": "https://jira.mongodb.org/browse/SERVER-57859",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Include <tt>CommandNotFound</tt> in the <a href=\"https://github.com/mongodb/mongo/blob/2a535800c66a9d8b5c3b05e3fd4a34c4461bdff1/src/mongo/db/s/sharding_ddl_coordinator.cpp#L211-L217\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">list of errors retried by DDL coordinators</a> in order to not remove coordinator documents in case the user mistakenly replaced the binaries in the wrong order.</p>",
    "environment": "",
    "key": {
      "id": "1791090",
      "content": "SERVER-57859"
    },
    "summary": "DDL coordinators must indefinitely retry on CommandNotFound error",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": {
      "label": "PM-1965-Cleanup"
    },
    "created": "Mon, 21 Jun 2021 09:30:07 +0000",
    "updated": "Mon, 21 Jun 2021 12:55:08 +0000",
    "resolved": "Mon, 21 Jun 2021 12:16:56 +0000",
    "version": [
      "5.1.0",
      "5.0.0-rc2"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.0-rc3"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3888206",
          "author": "xgen-internal-githook",
          "created": "Mon, 21 Jun 2021 11:09:11 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57859\" title=\"DDL coordinators must indefinitely retry on CommandNotFound error\" class=\"issue-link\" data-issue-key=\"SERVER-57859\"><del>SERVER-57859</del></a> DDL coordinators must indefinitely retry on CommandNotFound error<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/1ff3f73f5696c5df1feb730920c9c1b03412a2e8\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/1ff3f73f5696c5df1feb730920c9c1b03412a2e8</a></p>"
        },
        {
          "id": "3888322",
          "author": "xgen-internal-githook",
          "created": "Mon, 21 Jun 2021 12:37:29 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-57859\" title=\"DDL coordinators must indefinitely retry on CommandNotFound error\" class=\"issue-link\" data-issue-key=\"SERVER-57859\"><del>SERVER-57859</del></a> DDL coordinators must indefinitely retry on CommandNotFound error<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/0fc5495fc862bbee21f491e333e7cc22a905e664\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/0fc5495fc862bbee21f491e333e7cc22a905e664</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": {
        "id": "10420",
        "name": "Backports",
        "outwardlinks": {
          "description": "backported by"
        }
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 21 Jun 2021 11:09:11 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        13 weeks, 4 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-1965"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            13 weeks, 4 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hznjnb:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzodvb:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4979",
              "content": "Sharding EMEA 2021-06-28"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzn5wf:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-58167] Use scoped database critical section during dropDatabase",
    "link": "https://jira.mongodb.org/browse/SERVER-58167",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The <a href=\"https://github.com/mongodb/mongo/blob/8786456fa909e88c9ed6e7f019b1d519e005e677/src/mongo/db/s/drop_database_coordinator.cpp#L157-L158\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">critical section acquired</a> in drop database must be cleared out on stepdown to avoid leaving the node in an inconsistent state.</p>\n\n<p>In order to do that, it's possible to simply use a scoped critical section that lives as long as the coordinator is instantiated and exists the critical section on destruction.</p>",
    "environment": "",
    "key": {
      "id": "1803324",
      "content": "SERVER-58167"
    },
    "summary": "Use scoped database critical section during dropDatabase",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": {
      "label": "PM-1965-Cleanup"
    },
    "created": "Wed, 30 Jun 2021 08:12:47 +0000",
    "updated": "Fri, 23 Jul 2021 12:15:12 +0000",
    "resolved": "Mon, 5 Jul 2021 14:47:20 +0000",
    "version": [
      "5.1.0",
      "5.0.0-rc6"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.2"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "2",
    "comments": {
      "comment": [
        {
          "id": "3916685",
          "author": "xgen-internal-githook",
          "created": "Mon, 5 Jul 2021 14:41:17 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58167\" title=\"Use scoped database critical section during dropDatabase\" class=\"issue-link\" data-issue-key=\"SERVER-58167\"><del>SERVER-58167</del></a> Use scoped database critical section during dropDatabase<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/36df326d54d7d97c67d9be778c70b7fcb18ef9b3\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/36df326d54d7d97c67d9be778c70b7fcb18ef9b3</a></p>"
        },
        {
          "id": "3959465",
          "author": "xgen-internal-githook",
          "created": "Fri, 23 Jul 2021 12:04:41 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58167\" title=\"Use scoped database critical section during dropDatabase\" class=\"issue-link\" data-issue-key=\"SERVER-58167\"><del>SERVER-58167</del></a> Use scoped database critical section during dropDatabase<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/20e6f4c5018ef78c752232947398009e018c343f\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/20e6f4c5018ef78c752232947398009e018c343f</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 5 Jul 2021 14:41:17 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        9 weeks ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-1965"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            9 weeks ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "166.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzpmiv:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzqe7r:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4980",
              "content": "Sharding EMEA 2021-07-12"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzp8rz:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-58273] Solve deadlock caused by uninterruptible lock guard in drop db participant command",
    "link": "https://jira.mongodb.org/browse/SERVER-58273",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The <a href=\"https://github.com/mongodb/mongo/blob/4e2b70cd68a312b6fc059690b1720f3416af2d1c/src/mongo/db/s/shardsvr_drop_database_participant_command.cpp#L90\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">UninterruptibleLockGuard in the drop database participant command</a> can end up causing a deadlock in the same way it was happening for the drop collection participant command (complete explanation in <a href=\"https://jira.mongodb.org/browse/SERVER-57756?focusedCommentId=3905869&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-3905869\" class=\"external-link\" rel=\"nofollow\">this comment</a> from <a href=\"https://jira.mongodb.org/browse/SERVER-57756\" title=\"Race between concurrent stepdowns and applying transaction oplog entry\" class=\"issue-link\" data-issue-key=\"SERVER-57756\"><del>SERVER-57756</del></a> ).</p>\n\n<p>Probably it's possible to adopt a solution similar to the one committed for <a href=\"https://jira.mongodb.org/browse/SERVER-58143\" title=\"shardsvrDropCollectionParticipant should be killable on stepdown\" class=\"issue-link\" data-issue-key=\"SERVER-58143\"><del>SERVER-58143</del></a> .</p>",
    "environment": "",
    "key": {
      "id": "1809101",
      "content": "SERVER-58273"
    },
    "summary": "Solve deadlock caused by uninterruptible lock guard in drop db participant command",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "tommaso.tocci",
      "content": "Tommaso Tocci"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": {
      "label": "PM-1965-Cleanup"
    },
    "created": "Tue, 6 Jul 2021 10:21:46 +0000",
    "updated": "Tue, 20 Jul 2021 18:20:55 +0000",
    "resolved": "Wed, 7 Jul 2021 16:13:16 +0000",
    "version": [
      "5.1.0",
      "5.0.0-rc7"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.2"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3920661",
          "author": "xgen-internal-githook",
          "created": "Wed, 7 Jul 2021 15:22:20 +0000",
          "content": "<p>Author:</p>\n{'name': 'Tommaso Tocci', 'email': 'tommaso.tocci@mongodb.com', 'username': 'toto-dev'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58273\" title=\"Solve deadlock caused by uninterruptible lock guard in drop db participant command\" class=\"issue-link\" data-issue-key=\"SERVER-58273\"><del>SERVER-58273</del></a> Solve deadlock caused by uninterruptible lock guard in drop db participant command<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/2a41fb45f89a9b7b51053f9b448d767ba074684e\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/2a41fb45f89a9b7b51053f9b448d767ba074684e</a></p>"
        },
        {
          "id": "3953153",
          "author": "xgen-internal-githook",
          "created": "Tue, 20 Jul 2021 18:00:13 +0000",
          "content": "<p>Author:</p>\n{'name': 'Tommaso Tocci', 'email': 'tommaso.tocci@mongodb.com', 'username': 'toto-dev'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58273\" title=\"Solve deadlock caused by uninterruptible lock guard in drop db participant command\" class=\"issue-link\" data-issue-key=\"SERVER-58273\"><del>SERVER-58273</del></a> Solve deadlock caused by uninterruptible lock guard in drop db participant command</p>\n\n<p>(cherry picked from commit 2a41fb45f89a9b7b51053f9b448d767ba074684e)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/5e048e396e59172c86f8621a4ad4bf009012d130\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/5e048e396e59172c86f8621a4ad4bf009012d130</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": {
        "id": "10420",
        "name": "Backports",
        "outwardlinks": {
          "description": "backported by"
        }
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Tue, 6 Jul 2021 11:32:49 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        9 weeks, 2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-1965"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            9 weeks, 2 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli",
              "tommaso.tocci"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzqlvr:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzr9w7:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "4980",
              "content": "Sharding EMEA 2021-07-12"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzq84v:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-58775] Mark ConfigsvrSetAllowMigrationsCommand's opCtx as killable on stepdown",
    "link": "https://jira.mongodb.org/browse/SERVER-58775",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "",
    "environment": "",
    "key": {
      "id": "1828520",
      "content": "SERVER-58775"
    },
    "summary": "Mark ConfigsvrSetAllowMigrationsCommand's opCtx as killable on stepdown",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": "",
    "created": "Thu, 22 Jul 2021 16:31:35 +0000",
    "updated": "Wed, 22 Sep 2021 23:33:49 +0000",
    "resolved": "Mon, 26 Jul 2021 10:30:02 +0000",
    "version": [
      "5.1.0",
      "5.0.2"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.2"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "2",
    "comments": {
      "comment": [
        {
          "id": "3962241",
          "author": "xgen-internal-githook",
          "created": "Mon, 26 Jul 2021 10:10:22 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58775\" title=\"Mark ConfigsvrSetAllowMigrationsCommand&#39;s opCtx as killable on stepdown\" class=\"issue-link\" data-issue-key=\"SERVER-58775\"><del>SERVER-58775</del></a> Mark ConfigsvrSetAllowMigrationsCommand's opCtx as killable on stepdown<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/84e1317cca28c38f186ff210be4786599026253e\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/84e1317cca28c38f186ff210be4786599026253e</a></p>"
        },
        {
          "id": "3964703",
          "author": "xgen-internal-githook",
          "created": "Tue, 27 Jul 2021 08:00:21 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58775\" title=\"Mark ConfigsvrSetAllowMigrationsCommand&#39;s opCtx as killable on stepdown\" class=\"issue-link\" data-issue-key=\"SERVER-58775\"><del>SERVER-58775</del></a> Mark ConfigsvrSetAllowMigrationsCommand's opCtx as killable on stepdown<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/d6e08d395941546fbf452896aa28f53621cc09a1\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/d6e08d395941546fbf452896aa28f53621cc09a1</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": {
              "issuekey": {
                "id": "1881402",
                "content": "SERVER-60161"
              }
            }
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 26 Jul 2021 10:10:22 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        8 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "max.hirschhorn"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            8 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "155.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hztwav:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzuizz:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5178",
              "content": "Sharding EMEA 2021-08-09"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hztijz:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-58790] RLE in Simple8b fails when using 0 as added",
    "link": "https://jira.mongodb.org/browse/SERVER-58790",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>This will fail to even pass just testAppendAndGetAllInts. Im pretty sure it applies to any situation in which we exactly fill up the rle buffer with 0s and then try to add another value that will also use rle. Pretty sure its because we assume 0 as a base but then if the user also adds 0 we get doubled. A simple bugfix would be to never start rle if we haven't at least written one s8b word to buffer. May not be best solution though!</p>",
    "environment": "",
    "key": {
      "id": "1829068",
      "content": "SERVER-58790"
    },
    "summary": "RLE in Simple8b fails when using 0 as added",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "jackson.xie",
      "content": "Jackson Xie"
    },
    "reporter": {
      "username": "luke.bhan",
      "content": "Luke Bhan"
    },
    "labels": "",
    "created": "Fri, 23 Jul 2021 02:05:43 +0000",
    "updated": "Tue, 10 Aug 2021 18:28:19 +0000",
    "resolved": "Tue, 10 Aug 2021 18:28:19 +0000",
    "version": "5.1.0",
    "fixVersion": "5.1 Required",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3976515",
          "author": "henrik.edin",
          "created": "Mon, 2 Aug 2021 20:06:29 +0000",
          "content": "<p>Check if this is still an issue with our recent changes.</p>"
        },
        {
          "id": "3993108",
          "author": "xgen-internal-githook",
          "created": "Tue, 10 Aug 2021 18:18:49 +0000",
          "content": "<p>Author:</p>\n{'name': 'Jackson Xie', 'email': 'jackson.xie@mongodb.com', 'username': 'jacksonx9'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58790\" title=\"RLE in Simple8b fails when using 0 as added\" class=\"issue-link\" data-issue-key=\"SERVER-58790\"><del>SERVER-58790</del></a>: add Simple8b test for RLE 0 then immediately switching to another value for RLE<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/3888d215464a081c831074918ad590a8e3ba74a1\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/3888d215464a081c831074918ad590a8e3ba74a1</a></p>"
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 2 Aug 2021 20:06:29 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        6 weeks, 2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-2278"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "jackson.xie"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            6 weeks, 2 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "henrik.edin",
              "jackson.xie",
              "luke.bhan"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hztznr:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzsqvb:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5117",
              "content": "Execution Team 2021-08-23"
            }
          }
        },
        {
          "id": "customfield_10750",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Steps To Reproduce",
          "customfieldvalues": {
            "customfieldvalue": "<p>Simple8b s8b;<br/>\n 763<br/>\n 764 std::vector&lt;uint64_t&gt; expectedInts(1920, 0);<br/>\n 765 for(uint32_t i = 0; i &lt; 200; ++i)</p>\n\n{ 766 expectedInts.push_back(2); 767 }\n\n<p>768 testAppendAndGetAllInts(s8b, expectedInts);</p>"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hztlwv:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-58906] Remove last-lts check for renameCollection in commands_that_write_accept_wc_shards.js",
    "link": "https://jira.mongodb.org/browse/SERVER-58906",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p><a href=\"https://github.com/mongodb/mongo/blob/9b87aa49a79d4018f8de9ec2c95fd2742f3b8303/jstests/sharding/commands_that_write_accept_wc_shards.js#L529\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">This check</a> was added when the <tt>last-lts</tt> version was <tt>v4.4</tt> and invalid write concerns passed to <tt>renameCollection</tt> were expected <a href=\"https://github.com/mongodb/mongo/blob/9b87aa49a79d4018f8de9ec2c95fd2742f3b8303/jstests/sharding/commands_that_write_accept_wc_shards.js#L539\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">to trigger a write concern error</a>.</p>\n\n<p>Starting from <tt>v5.0</tt>, no write concerns is propagated anymore for <tt>renameCollection</tt> as the majority write concern is applied by default.</p>",
    "environment": "",
    "key": {
      "id": "1833723",
      "content": "SERVER-58906"
    },
    "summary": "Remove last-lts check for renameCollection in commands_that_write_accept_wc_shards.js",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": "",
    "created": "Wed, 28 Jul 2021 08:19:48 +0000",
    "updated": "Wed, 4 Aug 2021 17:00:00 +0000",
    "resolved": "Wed, 4 Aug 2021 17:00:00 +0000",
    "version": "5.1.0",
    "fixVersion": "5.1.0",
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3967866",
          "author": "xgen-internal-githook",
          "created": "Wed, 28 Jul 2021 13:39:06 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58906\" title=\"Remove last-lts check for renameCollection in commands_that_write_accept_wc_shards.js\" class=\"issue-link\" data-issue-key=\"SERVER-58906\"><del>SERVER-58906</del></a> Remove last-lts check for renameCollection in commands_that_write_accept_wc_shards.js<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/7938c93a33085a76075ed488ed7b6446c3050956\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/7938c93a33085a76075ed488ed7b6446c3050956</a></p>"
        },
        {
          "id": "3977265",
          "author": "tommaso.tocci",
          "created": "Tue, 3 Aug 2021 07:06:27 +0000",
          "content": "<p><a href=\"https://jira.mongodb.org/secure/ViewProfile.jspa?name=pierlauro.sciarelli\" class=\"user-hover\" rel=\"pierlauro.sciarelli\">Pierlauro Sciarelli</a> I think you forgot to remove the <a href=\"https://github.com/mongodb/mongo/blob/7938c93a33085a76075ed488ed7b6446c3050956/jstests/sharding/commands_that_write_accept_wc_shards.js#L12\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">disabled_due_to_server_58295</a> from the test</p>"
        },
        {
          "id": "3980751",
          "author": "xgen-internal-githook",
          "created": "Wed, 4 Aug 2021 16:02:01 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-58906\" title=\"Remove last-lts check for renameCollection in commands_that_write_accept_wc_shards.js\" class=\"issue-link\" data-issue-key=\"SERVER-58906\"><del>SERVER-58906</del></a> Remove disabled_due_to_server_58295 tag from commands_that_write_accept_wc_shards.js<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/9ae4eb2650e5086058a88452f6a72efc5bd95766\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/9ae4eb2650e5086058a88452f6a72efc5bd95766</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": {
        "id": "10620",
        "name": "Issue split",
        "inwardlinks": {
          "description": "split from",
          "issuelink": {
            "issuekey": {
              "id": "1811346",
              "content": "SERVER-58351"
            }
          }
        }
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Wed, 28 Jul 2021 13:39:06 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        7 weeks, 1 day ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10857",
          "key": "com.pyxis.greenhopper.jira:gh-epic-link",
          "customfieldname": "Epic Link",
          "customfieldvalues": {
            "customfieldvalue": "PM-1788"
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "pierlauro.sciarelli"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            7 weeks, 1 day ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli",
              "tommaso.tocci"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzus93:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzve5r:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5178",
              "content": "Sharding EMEA 2021-08-09"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzuei7:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59067] Fix TLS Race condition",
    "link": "https://jira.mongodb.org/browse/SERVER-59067",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The race is when initializing SSLManagerOpenSSL::_rolesNid, which creates a race. The problem is that this field is not static and OBJ_create() is invoked every time SSLManagerOpenSSL is invoked. The problem was amplified by the tenant migration code, which is using transient SSL state and is instantiating SSLManagerOpenSSL on every migration. The bug was always there but the new logic amplified it.</p>\n\n<p>The race is present in all versions but is more serious in RHEL 7.0 using old OpenSSL. The difference is that in that old version the OBJ_cleanup() is actually erasing previous record if another OID with same keys is created. This make non properly guarded init to race with cleanup. In new version of OpenSSL OBJ_cleanup() is no-op.</p>\n\n<p>Form the doc: </p>\n\n<p>In OpenSSL versions prior to 1.1.0 OBJ_cleanup() cleaned up OpenSSLs internal object table and was called before an application exits if any new objects were added using OBJ_create(). This function is deprecated in version 1.1.0 and now does nothing if called. No explicit de-initialisation is now required. See OPENSSL_init_crypto(3) for further information.</p>",
    "environment": "",
    "key": {
      "id": "1839863",
      "content": "SERVER-59067"
    },
    "summary": "Fix TLS Race condition",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "andrew.shuvalov",
      "content": "Andrew Shuvalov"
    },
    "reporter": {
      "username": "andrew.shuvalov",
      "content": "Andrew Shuvalov"
    },
    "labels": {
      "label": "sharding-wfbf-day"
    },
    "created": "Tue, 3 Aug 2021 16:42:41 +0000",
    "updated": "Mon, 20 Sep 2021 14:46:12 +0000",
    "resolved": "Tue, 10 Aug 2021 17:32:31 +0000",
    "version": [
      "5.1.0",
      "5.0.0-rc8"
    ],
    "fixVersion": [
      "5.1 Required",
      "5.0.4"
    ],
    "votes": "0",
    "watches": "3",
    "comments": {
      "comment": [
        {
          "id": "3986487",
          "author": "xgen-internal-githook",
          "created": "Fri, 6 Aug 2021 22:03:31 +0000",
          "content": "<p>Author:</p>\n{'name': 'Andrew Shuvalov', 'email': 'andrew.shuvalov@mongodb.com', 'username': 'shuvalov-mdb'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59067\" title=\"Fix TLS Race condition\" class=\"issue-link\" data-issue-key=\"SERVER-59067\"><del>SERVER-59067</del></a>: low level stress test for OpenSSL manager<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/a3124693d95c37633cca3935d3d2515f63222d22\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/a3124693d95c37633cca3935d3d2515f63222d22</a></p>"
        },
        {
          "id": "3992230",
          "author": "JIRAUSER1256988",
          "created": "Tue, 10 Aug 2021 14:09:34 +0000",
          "content": "<p>Essentially the bug was there forever. The only difference is that SSLManagerOpenSSL used to be a singleton while the new tenant migration project made it to be initialized each time a migration starts. The OpenSSL library is not internally synchronized and we used to change its internal object ID table without any protection. The fix is moving the OBJ_create() initializer from class field to static initializer.</p>"
        },
        {
          "id": "3992907",
          "author": "xgen-internal-githook",
          "created": "Tue, 10 Aug 2021 17:15:59 +0000",
          "content": "<p>Author:</p>\n{'name': 'Andrew Shuvalov', 'email': 'andrew.shuvalov@mongodb.com', 'username': 'shuvalov-mdb'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59067\" title=\"Fix TLS Race condition\" class=\"issue-link\" data-issue-key=\"SERVER-59067\"><del>SERVER-59067</del></a>: fix TLS memory corruption<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/bf244ea14aa8b5c178d09a33e505520f45ce7b29\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/bf244ea14aa8b5c178d09a33e505520f45ce7b29</a></p>"
        },
        {
          "id": "4071456",
          "author": "xgen-internal-githook",
          "created": "Mon, 20 Sep 2021 14:34:33 +0000",
          "content": "<p>Author:</p>\n{'name': 'Andrew Shuvalov', 'email': 'andrew.shuvalov@mongodb.com', 'username': 'shuvalov-mdb'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59067\" title=\"Fix TLS Race condition\" class=\"issue-link\" data-issue-key=\"SERVER-59067\"><del>SERVER-59067</del></a>: BACKPORT-10237 to fix race condition in TLS to 5.0<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/3db2eccd331b3c382fea07f6c9c01edcbe8e8736\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/3db2eccd331b3c382fea07f6c9c01edcbe8e8736</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10520",
          "name": "Problem/Incident",
          "outwardlinks": {
            "description": "causes"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "4.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 6 Aug 2021 22:03:31 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "145.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "andrew.shuvalov",
              "xgen-internal-githook"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzvtzz:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzwecn:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "5218",
                "content": "Sharding 2021-08-09"
              },
              {
                "id": "5219",
                "content": "Sharding 2021-08-23"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzvg93:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59117] xcode next builders hit dyld 512 library limit",
    "link": "https://jira.mongodb.org/browse/SERVER-59117",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The xcode next (Xcode 12.4 at the time this ticket was created) builders hit the 512 limit at some point shortly after they were turned on, causing BF-22040.</p>\n\n<p>We will turn off dynamic link model to avoid this issue for now and turn it back on after the number of libraries needed to link has been reduced.</p>",
    "environment": "",
    "key": {
      "id": "1841851",
      "content": "SERVER-59117"
    },
    "summary": "xcode next builders hit dyld 512 library limit",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "daniel.moody",
      "content": "Daniel Moody"
    },
    "reporter": {
      "username": "daniel.moody",
      "content": "Daniel Moody"
    },
    "labels": "",
    "created": "Thu, 5 Aug 2021 02:54:48 +0000",
    "updated": "Fri, 20 Aug 2021 16:14:25 +0000",
    "resolved": "Thu, 5 Aug 2021 18:37:34 +0000",
    "version": "5.1.0",
    "fixVersion": [
      "5.1.0",
      "5.0.3"
    ],
    "votes": "0",
    "watches": "2",
    "comments": {
      "comment": [
        {
          "id": "3983723",
          "author": "xgen-internal-githook",
          "created": "Thu, 5 Aug 2021 18:32:00 +0000",
          "content": "<p>Author:</p>\n{'name': 'Daniel Moody', 'email': 'daniel.moody@mongodb.com', 'username': 'dmoody256'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59117\" title=\"xcode next builders hit dyld 512 library limit\" class=\"issue-link\" data-issue-key=\"SERVER-59117\"><del>SERVER-59117</del></a> disable xcode 12.4 builders dynamic mode due to dyld limit<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/c142c727325339ba4569c583d209907453ac3504\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/c142c727325339ba4569c583d209907453ac3504</a></p>"
        },
        {
          "id": "3983876",
          "author": "xgen-internal-githook",
          "created": "Thu, 5 Aug 2021 19:26:47 +0000",
          "content": "<p>Author:</p>\n{'name': 'Daniel Moody', 'email': 'daniel.moody@mongodb.com', 'username': 'dmoody256'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59117\" title=\"xcode next builders hit dyld 512 library limit\" class=\"issue-link\" data-issue-key=\"SERVER-59117\"><del>SERVER-59117</del></a> disable xcode 12.4 builders dynamic mode due to dyld limit</p>\n\n<p>(cherry picked from commit c142c727325339ba4569c583d209907453ac3504)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/6dc7b73a7ce8ec3ff4005aca4a699d51ecd7ae23\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/6dc7b73a7ce8ec3ff4005aca4a699d51ecd7ae23</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": [
              {
                "issuekey": {
                  "id": "1841854",
                  "content": "SERVER-59118"
                }
              },
              {
                "issuekey": {
                  "id": "1849760",
                  "content": "SERVER-59310"
                }
              },
              {
                "issuekey": {
                  "id": "1855003",
                  "content": "SERVER-59438"
                }
              },
              {
                "issuekey": {
                  "id": "1855005",
                  "content": "SERVER-59439"
                }
              },
              {
                "issuekey": {
                  "id": "1856544",
                  "content": "SERVER-59470"
                }
              }
            ]
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 5 Aug 2021 03:18:23 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        7 weeks ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "benety.goh"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            7 weeks ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "85.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "daniel.moody",
              "xgen-internal-githook"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzw66n:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "0|i02apj:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5151",
              "content": "Dev Platform 2021-08-09"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzvsfj:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59152] Make range deletion submission resilient to onShardVersionMismatch exceptions",
    "link": "https://jira.mongodb.org/browse/SERVER-59152",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>With the partially wrong changes introduced in <a href=\"https://jira.mongodb.org/browse/SERVER-48883\" title=\"Range deletion recovery can invalidate migration recovery on step up\" class=\"issue-link\" data-issue-key=\"SERVER-48883\"><del>SERVER-48883</del></a>, it <a href=\"https://github.com/mongodb/mongo/blob/108840e0fdd428435b3fbbc1919ddb05311321c7/src/mongo/db/s/migration_util.cpp#L426-L431\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">was wrongly assumed</a> that <a href=\"https://github.com/mongodb/mongo/blob/3a58ebe0fd1d19f5afe38bd24ef2b7774c358828/src/mongo/db/s/shard_filtering_metadata_refresh.cpp#L206\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">onShardVersionMismatch</a> would never fail with exceptions different from <tt>NamespaceNotFound</tt>.</p>\n\n<p>As this is definitely not the case, the range deletion task submission is failing and not retried in case any other exception is thrown.</p>\n\n<p>A possible way to fix the problem would be calling <tt>onShardVersionMismatch</tt> within a <a href=\"https://github.com/mongodb/mongo/blob/3a58ebe0fd1d19f5afe38bd24ef2b7774c358828/src/mongo/db/s/migration_util.cpp#L192\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">retryIdempotentWorkAsPrimaryUntilSuccessOrStepdown</a>.</p>",
    "environment": "",
    "key": {
      "id": "1843263",
      "content": "SERVER-59152"
    },
    "summary": "Make range deletion submission resilient to onShardVersionMismatch exceptions",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": "",
    "created": "Fri, 6 Aug 2021 10:35:38 +0000",
    "updated": "Tue, 10 Aug 2021 10:56:32 +0000",
    "resolved": "Fri, 6 Aug 2021 16:24:56 +0000",
    "version": [
      "5.1.0",
      "5.0.2"
    ],
    "fixVersion": "5.1.0",
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "3985636",
          "author": "xgen-internal-githook",
          "created": "Fri, 6 Aug 2021 16:23:11 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59152\" title=\"Make range deletion submission resilient to onShardVersionMismatch exceptions\" class=\"issue-link\" data-issue-key=\"SERVER-59152\"><del>SERVER-59152</del></a> Make range deletion submission resilient to onShardVersionMismatch exceptions<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/3bdbe14de35d849f729221805c22b9ce76a1a9d6\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/3bdbe14de35d849f729221805c22b9ce76a1a9d6</a></p>"
        },
        {
          "id": "3991896",
          "author": "xgen-internal-githook",
          "created": "Tue, 10 Aug 2021 10:56:32 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59152\" title=\"Make range deletion submission resilient to onShardVersionMismatch exceptions\" class=\"issue-link\" data-issue-key=\"SERVER-59152\"><del>SERVER-59152</del></a> Make range deletion submission resilient to onShardVersionMismatch exceptions</p>\n\n<p>(cherry picked from commit 3bdbe14de35d849f729221805c22b9ce76a1a9d6)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/2b86fc3175604f8e56b61480a2eb7ad719534521\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/2b86fc3175604f8e56b61480a2eb7ad719534521</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 6 Aug 2021 16:23:11 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        6 weeks, 3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "xgen-internal-githook"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            6 weeks, 3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "146.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzwetr:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzwyh3:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5178",
              "content": "Sharding EMEA 2021-08-09"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzw12n:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59190] IndexAccessMethod can be destructed during index build bulk load yield",
    "link": "https://jira.mongodb.org/browse/SERVER-59190",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>If an index build is aborted while it <a href=\"https://github.com/mongodb/mongo/blob/811251543cb0ad333c6018f5b53717784a863ef3/src/mongo/db/index/index_access_method.cpp#L698-L728\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">yields its locks during the bulk load phase</a>, the <tt>AbstractIndexAccessMethod</tt> will be destructed. Then if we read any member state after this has occurred, for instanceÂ <a href=\"https://github.com/mongodb/mongo/blob/811251543cb0ad333c6018f5b53717784a863ef3/src/mongo/db/index/index_access_method.cpp#L711\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">reading the <tt>_indexCatalogEntry</tt> member</a>, this is undefined behavior.</p>\n\n<p>Reproducer attached &#8211; run with UBSAN.</p>",
    "environment": "",
    "key": {
      "id": "1845835",
      "content": "SERVER-59190"
    },
    "summary": "IndexAccessMethod can be destructed during index build bulk load yield",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "yuhong.zhang",
      "content": "Yuhong Zhang"
    },
    "reporter": {
      "username": "gregory.noma",
      "content": "Gregory Noma"
    },
    "labels": "",
    "created": "Mon, 9 Aug 2021 14:58:11 +0000",
    "updated": "Thu, 23 Sep 2021 16:05:23 +0000",
    "resolved": "Fri, 20 Aug 2021 19:27:26 +0000",
    "version": "5.1.0",
    "fixVersion": [
      "5.1.0",
      "5.0.4"
    ],
    "votes": "0",
    "watches": "3",
    "comments": {
      "comment": [
        {
          "id": "4013168",
          "author": "xgen-internal-githook",
          "created": "Fri, 20 Aug 2021 15:13:01 +0000",
          "content": "<p>Author:</p>\n{'name': 'Yuhong Zhang', 'email': 'danielzhangyh@gmail.com', 'username': 'YuhongZhang98'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59190\" title=\"IndexAccessMethod can be destructed during index build bulk load yield\" class=\"issue-link\" data-issue-key=\"SERVER-59190\"><del>SERVER-59190</del></a> IndexAccessMethod can be destructed during index build bulk load yield<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/50cc968124097b6f16ce6623431ae31a54d232ba\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/50cc968124097b6f16ce6623431ae31a54d232ba</a></p>"
        },
        {
          "id": "4078892",
          "author": "xgen-internal-githook",
          "created": "Wed, 22 Sep 2021 21:48:38 +0000",
          "content": "<p>Author:</p>\n{'name': 'Yuhong Zhang', 'email': 'danielzhangyh@gmail.com', 'username': 'YuhongZhang98'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59190\" title=\"IndexAccessMethod can be destructed during index build bulk load yield\" class=\"issue-link\" data-issue-key=\"SERVER-59190\"><del>SERVER-59190</del></a> IndexAccessMethod can be destructed during index build bulk load yield</p>\n\n<p>(cherry picked from commit 50cc968124097b6f16ce6623431ae31a54d232ba)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/658513b292c9b73c756a6d3886a9c3b3df81e557\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/658513b292c9b73c756a6d3886a9c3b3df81e557</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": {
              "issuekey": {
                "id": "1522303",
                "content": "SERVER-51806"
              }
            }
          }
        }
      ]
    },
    "attachments": {
      "attachment": {
        "id": "329238",
        "name": "SERVER-59190.diff",
        "size": "2649",
        "author": "gregory.noma",
        "created": "Mon, 9 Aug 2021 18:07:29 +0000"
      }
    },
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "21777",
                "content": "v5.0"
              },
              {
                "key": "18953",
                "content": "v4.4"
              }
            ]
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 19 Aug 2021 18:43:59 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        1 day ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "backlog-server-backport"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            1 day ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "137.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "gregory.noma",
              "yuhong.zhang"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzwu2v:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "0|i00laf:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "5117",
                "content": "Execution Team 2021-08-23"
              },
              {
                "id": "5118",
                "content": "Execution Team 2021-09-06"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzwgbr:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59204] unowned filter BSONObj stored in PlanCache entry debugInfo",
    "link": "https://jira.mongodb.org/browse/SERVER-59204",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The PlanCache currently stores <a href=\"https://github.com/mongodb/mongo/blob/8b6082cc0c71dab86443b101eac79731aea8a356/src/mongo/db/query/plan_cache.cpp#L217-L218\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">BSONObj owned by the FindCommandRequest in debugInfo entries</a>. In the case that the FindCommandRequest was built Once cached, these entries can outlive the original request and the debugInfo filter and sort will point to unowned memory. Both should be made owned as part of populating the debugInfo.</p>\n\n<p>This only exists in 5.0 and master only as it was introduced recently with a change to use IDL to parse the find command.</p>",
    "environment": "",
    "key": {
      "id": "1846415",
      "content": "SERVER-59204"
    },
    "summary": "unowned filter BSONObj stored in PlanCache entry debugInfo",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "james.wahlin",
      "content": "James Wahlin"
    },
    "reporter": {
      "username": "james.wahlin",
      "content": "James Wahlin"
    },
    "labels": "",
    "created": "Mon, 9 Aug 2021 20:50:35 +0000",
    "updated": "Wed, 8 Sep 2021 21:32:50 +0000",
    "resolved": "Mon, 16 Aug 2021 17:43:02 +0000",
    "version": [
      "5.1.0",
      "5.0.2"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.3"
    ],
    "votes": "0",
    "watches": "5",
    "comments": {
      "comment": [
        {
          "id": "3997652",
          "author": "xgen-internal-githook",
          "created": "Thu, 12 Aug 2021 15:40:35 +0000",
          "content": "<p>Author:</p>\n{'name': 'James Wahlin', 'email': 'james@mongodb.com', 'username': 'jameswahlin'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59204\" title=\"unowned filter BSONObj stored in PlanCache entry debugInfo\" class=\"issue-link\" data-issue-key=\"SERVER-59204\"><del>SERVER-59204</del></a> Ensure that BSONObj stored in the PlanCacheEntry debugInfo is owned<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/fce8274e6d47ed28d915e8e2db5149876dbcae25\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/fce8274e6d47ed28d915e8e2db5149876dbcae25</a></p>"
        },
        {
          "id": "3998194",
          "author": "xgen-internal-githook",
          "created": "Thu, 12 Aug 2021 17:49:30 +0000",
          "content": "<p>Author:</p>\n{'name': 'James Wahlin', 'email': 'james@mongodb.com', 'username': 'jameswahlin'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59204\" title=\"unowned filter BSONObj stored in PlanCache entry debugInfo\" class=\"issue-link\" data-issue-key=\"SERVER-59204\"><del>SERVER-59204</del></a> Ensure that BSONObj stored in the PlanCacheEntry debugInfo is owned</p>\n\n<p>(cherry picked from commit fce8274e6d47ed28d915e8e2db5149876dbcae25)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/19ffa7cd17fa828c43cac69b572588dc84208055\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/19ffa7cd17fa828c43cac69b572588dc84208055</a></p>"
        },
        {
          "id": "4046116",
          "author": "james.wahlin@10gen.com",
          "created": "Wed, 8 Sep 2021 21:32:50 +0000",
          "content": "<p>We decided that the fix committed above is the correct one in light of IDL ownership semantics which don't guarantee that fields of \"owned\" types are always owned. I filedÂ <a href=\"https://jira.mongodb.org/browse/SERVER-59841\" title=\"Consider whether ownership should be enforced by the IDL for owned types\" class=\"issue-link\" data-issue-key=\"SERVER-59841\">SERVER-59841</a> to track potential improvements to the IDL in regards to enforcing ownership.</p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "outwardlinks": {
            "description": "related to",
            "issuelink": [
              {
                "issuekey": {
                  "id": "1550986",
                  "content": "SERVER-53060"
                }
              },
              {
                "issuekey": {
                  "id": "1870036",
                  "content": "SERVER-59841"
                }
              }
            ]
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "3.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 12 Aug 2021 15:40:35 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        2 weeks, 1 day ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "false"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "james.wahlin"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            2 weeks, 1 day ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "148.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "james.wahlin"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzwxmv:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzxh8f:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5335",
              "content": "QO 2021-08-23"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzwjvr:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59500] DDL coordinators must not release dist locks on stepdown",
    "link": "https://jira.mongodb.org/browse/SERVER-59500",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>Upon stepping down, DDL coordinators are currently executing the <em>onCompletion</em> logic that includes the <a href=\"https://github.com/mongodb/mongo/blob/9fbd37083621ef313636552da0045a2d2a2d8955/src/mongo/db/s/sharding_ddl_coordinator.cpp#L274-L277\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">release of distributed locks</a>.</p>\n\n<p>This is not safe, as the following interleaving may happen:</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>Node0 is primary and starts a DDL operation</li>\n\t<li>Node0 steps down, the DDL coordinator enters the <a href=\"https://github.com/mongodb/mongo/blob/9fbd37083621ef313636552da0045a2d2a2d8955/src/mongo/db/s/sharding_ddl_coordinator.cpp#L234\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">onCompletion</a></li>\n\t<li>Node1 steps up, the coordinator is resumed and <a href=\"https://github.com/mongodb/mongo/blob/9fbd37083621ef313636552da0045a2d2a2d8955/src/mongo/db/s/sharding_ddl_coordinator.cpp#L151\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">dist locks are reacquired</a></li>\n\t<li>Node0 is still executing the <em>onCompletion</em> and <a href=\"https://github.com/mongodb/mongo/blob/9fbd37083621ef313636552da0045a2d2a2d8955/src/mongo/db/s/sharding_ddl_coordinator.cpp#L274-L277\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">releases the distributed locks</a></li>\n\t<li>Node1 is running a DDL operation <font color=\"#de350b\">without holding distributed locks</font></li>\n</ul>\n\n\n<p>Different approaches may be evaluated for solving the problem, for example:</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>Custom logic for coordinators to don't release distributed locks if a coordinator document still exists (may require a modification of the <a href=\"https://github.com/mongodb/mongo/blob/5bbadc66ed462aed3cc4f5635c5003da6171c25d/src/mongo/db/s/dist_lock_manager.cpp#L58-L62\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">ScopedDistLock destructor</a>)</li>\n\t<li>Reason in a more general way: shall a node stepping down ever release distributed locks since all operations using a dist lock are going to be resumed by the new primary?</li>\n</ul>\n",
    "environment": "",
    "key": {
      "id": "1857922",
      "content": "SERVER-59500"
    },
    "summary": "DDL coordinators must not release dist locks on stepdown",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": "",
    "created": "Mon, 23 Aug 2021 12:43:09 +0000",
    "updated": "Tue, 21 Sep 2021 07:50:00 +0000",
    "resolved": "Fri, 27 Aug 2021 13:14:56 +0000",
    "version": [
      "5.0.0",
      "5.1.0"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.4"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "4026262",
          "author": "xgen-internal-githook",
          "created": "Fri, 27 Aug 2021 13:13:07 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59500\" title=\"DDL coordinators must not release dist locks on stepdown\" class=\"issue-link\" data-issue-key=\"SERVER-59500\"><del>SERVER-59500</del></a> DDL coordinators must not release dist locks on stepdown<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/979ecf1842bb431badd5ad6b6025ac257742c684\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/979ecf1842bb431badd5ad6b6025ac257742c684</a></p>"
        },
        {
          "id": "4072793",
          "author": "xgen-internal-githook",
          "created": "Mon, 20 Sep 2021 21:05:52 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59500\" title=\"DDL coordinators must not release dist locks on stepdown\" class=\"issue-link\" data-issue-key=\"SERVER-59500\"><del>SERVER-59500</del></a> DDL coordinators must not release dist locks on stepdown<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/48b25c07eea913522f47a435c985c8ba54a2381d\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/48b25c07eea913522f47a435c985c8ba54a2381d</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 26 Aug 2021 08:39:33 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "134.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzyusn:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzy2cn:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5180",
              "content": "Sharding EMEA 2021-09-06"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzyh1j:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59635] Mark ConfigSvrMoveChunkCommand as interruptible on stepdown",
    "link": "https://jira.mongodb.org/browse/SERVER-59635",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The operation context of <a href=\"https://github.com/mongodb/mongo/blob/5bbadc66ed462aed3cc4f5635c5003da6171c25d/src/mongo/db/s/config/configsvr_move_chunk_command.cpp#L82-L109\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">ConfigSvrMoveChunkCommand</a> is not currently marked as killable on stepdown. Flagging it as such by calling <a href=\"https://github.com/mongodb/mongo/blob/55de52a71489f41c18a7b226453d484c694d7c88/src/mongo/db/operation_context.h#L475\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">setAlwaysInterruptAtStepDownOrUp</a> can avoid ending up in deadlocks in case of stepdowns.</p>",
    "environment": "",
    "key": {
      "id": "1861523",
      "content": "SERVER-59635"
    },
    "summary": "Mark ConfigSvrMoveChunkCommand as interruptible on stepdown",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "allison.easton",
      "content": "Allison Easton"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": "",
    "created": "Fri, 27 Aug 2021 09:53:50 +0000",
    "updated": "Thu, 23 Sep 2021 11:08:26 +0000",
    "resolved": "Fri, 17 Sep 2021 07:28:43 +0000",
    "version": [
      "5.1.0",
      "5.0.2"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.4"
    ],
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "4067691",
          "author": "xgen-internal-githook",
          "created": "Fri, 17 Sep 2021 07:16:13 +0000",
          "content": "<p>Author:</p>\n{'name': 'Allison Easton', 'email': 'allison.easton@mongodb.com', 'username': 'allisoneaston'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59635\" title=\"Mark ConfigSvrMoveChunkCommand as interruptible on stepdown\" class=\"issue-link\" data-issue-key=\"SERVER-59635\"><del>SERVER-59635</del></a> Mark ConfigSvrMoveChunkCommand as interruptible on stepdown<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/7801beb303f43ca38390e9a05cb3dc67bb040c14\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/7801beb303f43ca38390e9a05cb3dc67bb040c14</a></p>"
        },
        {
          "id": "4080014",
          "author": "xgen-internal-githook",
          "created": "Thu, 23 Sep 2021 10:47:43 +0000",
          "content": "<p>Author:</p>\n{'name': 'Allison Easton', 'email': 'allison.easton@mongodb.com', 'username': 'allisoneaston'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59635\" title=\"Mark ConfigSvrMoveChunkCommand as interruptible on stepdown\" class=\"issue-link\" data-issue-key=\"SERVER-59635\"><del>SERVER-59635</del></a> Mark ConfigSvrMoveChunkCommand as interruptible on stepdown</p>\n\n<p>(cherry picked from commit 7801beb303f43ca38390e9a05cb3dc67bb040c14)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/a4a5789bb4a812962e9bdba04cad013cc7176823\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/a4a5789bb4a812962e9bdba04cad013cc7176823</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Thu, 16 Sep 2021 14:41:03 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        1 day ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            1 day ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "33.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "allison.easton",
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzzgdz:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i00uu4:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5181",
              "content": "Sharding EMEA 2021-09-20"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzz2mn:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59756] ShardServerProcessInterface's rename must synchronize with DDL operations",
    "link": "https://jira.mongodb.org/browse/SERVER-59756",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p><a href=\"https://github.com/mongodb/mongo/blob/9e218b72d3fe6be540fee92d42ace9fe47f83658/src/mongo/db/pipeline/process_interface/shardsvr_process_interface.cpp#L204-L234\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">ShardServerProcessInterface::renameIfOptionsAndIndexesHaveNotChanged</a> is totally bypassing the DDL coordinator infrastructure and is currently <a href=\"https://github.com/mongodb/mongo/blob/b30ecb0fdf8f5d707d28c2ad012f3420fb582b6c/src/mongo/db/pipeline/document_source_out.cpp#L173-L174\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">only used</a> for the <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/out/\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">$out stage</a>.</p>\n\n<p>Such stage requires a <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/out/#std-label-out-collection\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">collection parameter</a> and works as follows:</p>\n<ol>\n\t<li>User issues an aggregation including an $out stage with output collection <tt>db.outColl</tt></li>\n\t<li>During the aggregation, documents are written to a temporary collection <tt>db.tmp.coll</tt></li>\n\t<li>At the end of the aggregation, the temporary collection is renamed to <tt>db.coll</tt> by calling <a href=\"https://github.com/mongodb/mongo/blob/b30ecb0fdf8f5d707d28c2ad012f3420fb582b6c/src/mongo/db/pipeline/document_source_out.cpp#L173-L174\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">renameIfOptionsAndIndexesHaveNotChanged</a>.</li>\n</ol>\n\n\n<p>As a result, if any DDL is invoked on <tt>db.coll</tt> concurrently with the rename happening at point (<tt>3</tt>), both local and sharding catalog can end up in an inconsistent state.</p>",
    "environment": "",
    "key": {
      "id": "1866403",
      "content": "SERVER-59756"
    },
    "summary": "ShardServerProcessInterface's rename must synchronize with DDL operations",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": "",
    "created": "Thu, 2 Sep 2021 16:49:25 +0000",
    "updated": "Tue, 21 Sep 2021 10:18:30 +0000",
    "resolved": "Tue, 21 Sep 2021 10:17:37 +0000",
    "version": [
      "5.1.0",
      "5.0.3"
    ],
    "fixVersion": "5.1.0",
    "component": "Sharding",
    "votes": "0",
    "watches": "2",
    "comments": {
      "comment": [
        {
          "id": "4038366",
          "author": "xgen-internal-githook",
          "created": "Fri, 3 Sep 2021 08:14:15 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59756\" title=\"ShardServerProcessInterface&#39;s rename must synchronize with DDL operations\" class=\"issue-link\" data-issue-key=\"SERVER-59756\"><del>SERVER-59756</del></a> temporarily disable shardCollection stage in agg_out.js and add TODOs<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/9dd736dc7e0de59898a9239d9c031d1473a80c27\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/9dd736dc7e0de59898a9239d9c031d1473a80c27</a></p>"
        },
        {
          "id": "4049739",
          "author": "xgen-internal-githook",
          "created": "Fri, 10 Sep 2021 13:59:41 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59756\" title=\"ShardServerProcessInterface&#39;s rename must synchronize with DDL operations\" class=\"issue-link\" data-issue-key=\"SERVER-59756\"><del>SERVER-59756</del></a> ShardServerProcessInterface's rename must synchronize with DDL operations<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/35dd7411084701594e0912be7964c18d06886baf\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/35dd7411084701594e0912be7964c18d06886baf</a></p>"
        },
        {
          "id": "4072860",
          "author": "xgen-internal-githook",
          "created": "Mon, 20 Sep 2021 21:32:37 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59756\" title=\"ShardServerProcessInterface&#39;s rename must synchronize with DDL operations\" class=\"issue-link\" data-issue-key=\"SERVER-59756\"><del>SERVER-59756</del></a> ShardServerProcessInterface's rename must synchronize with DDL operations<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/5b219afdb1745464d75a902007764111b97e001f\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/5b219afdb1745464d75a902007764111b97e001f</a></p>"
        },
        {
          "id": "4073627",
          "author": "xgen-internal-githook",
          "created": "Tue, 21 Sep 2021 08:04:09 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59756\" title=\"ShardServerProcessInterface&#39;s rename must synchronize with DDL operations\" class=\"issue-link\" data-issue-key=\"SERVER-59756\"><del>SERVER-59756</del></a> update fcv test reference due to backport<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/2bfdedd5da8f4eedef8f9434b3392a10ed02cae8\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/2bfdedd5da8f4eedef8f9434b3392a10ed02cae8</a></p>"
        },
        {
          "id": "4073835",
          "author": "xgen-internal-githook",
          "created": "Tue, 21 Sep 2021 10:15:32 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: Revert \"<a href=\"https://jira.mongodb.org/browse/SERVER-59756\" title=\"ShardServerProcessInterface&#39;s rename must synchronize with DDL operations\" class=\"issue-link\" data-issue-key=\"SERVER-59756\"><del>SERVER-59756</del></a> ShardServerProcessInterface's rename must synchronize with DDL operations\"</p>\n\n<p>This reverts commit 5b219afdb1745464d75a902007764111b97e001f.<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/5fa7b277cdd63318c26941eee53e0bd499298461\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/5fa7b277cdd63318c26941eee53e0bd499298461</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": {
        "id": "10420",
        "name": "Backports",
        "outwardlinks": {
          "description": "backported by"
        }
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "5.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 3 Sep 2021 07:42:34 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "pierlauro.sciarelli"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            3 days ago\n                        "
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i00aef:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i00qh3:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzzwk7:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59765] $dateAdd/$dateSubtract do not detect an overflow for time units of years/months/days",
    "link": "https://jira.mongodb.org/browse/SERVER-59765",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>$dateAdd/$dateSubtract expressions do not detect an overflow for time units of years/months/days. A result is undefined in such cases. An example of an expression that overflows: </p>\n<p/>\n<div id=\"syntaxplugin\" class=\"syntaxplugin\" style=\"border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;\">\n<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;\">\n\t\t<tbody >\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">    {\"$dateAdd\":</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">            {\"startDate\" : Timestamp(0, 4294967295),</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">            \"unit\" : \"month\",</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">            \"amount\" :  {$multiply: [NumberLong(\"314159265358979383\")]},</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t\t<tr id=\"syntaxplugin_code_and_gutter\">\n\t\t\t\t\t\t<td  style=\" line-height: 1.4em !important; padding: 0em; vertical-align: top;\">\n\t\t\t\t\t<pre style=\"font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;\"><span style=\"color: black; font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;\">            \"timezone\" : \"+1187\" }};\n</span></pre>\n\t\t\t</td>\n\t\t</tr>\n\t\t\t</tbody>\n</table>\n</div>\n<p/>",
    "environment": "",
    "key": {
      "id": "1866960",
      "content": "SERVER-59765"
    },
    "summary": "$dateAdd/$dateSubtract do not detect an overflow for time units of years/months/days",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "mindaugas.malinauskas",
      "content": "Mindaugas Malinauskas"
    },
    "reporter": {
      "username": "mindaugas.malinauskas",
      "content": "Mindaugas Malinauskas"
    },
    "labels": "",
    "created": "Fri, 3 Sep 2021 07:37:19 +0000",
    "updated": "Tue, 21 Sep 2021 18:20:47 +0000",
    "resolved": "Thu, 9 Sep 2021 16:59:46 +0000",
    "version": [
      "5.0.0",
      "5.1.0"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.4"
    ],
    "votes": "0",
    "watches": "3",
    "comments": {
      "comment": [
        {
          "id": "4046624",
          "author": "xgen-internal-githook",
          "created": "Thu, 9 Sep 2021 07:47:08 +0000",
          "content": "<p>Author:</p>\n{'name': 'Mindaugas Malinauskas', 'email': 'mindaugas.malinauskas@mongodb.com'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59765\" title=\"$dateAdd/$dateSubtract do not detect an overflow for time units of years/months/days\" class=\"issue-link\" data-issue-key=\"SERVER-59765\"><del>SERVER-59765</del></a> Improved 'amount' parameter validation for $dateAdd/$dateSubtract<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/ec56b7edb4ffdee862df4b18c11690151253dde3\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/ec56b7edb4ffdee862df4b18c11690151253dde3</a></p>"
        },
        {
          "id": "4047649",
          "author": "xgen-internal-githook",
          "created": "Thu, 9 Sep 2021 15:31:12 +0000",
          "content": "<p>Author:</p>\n{'name': 'Nikita Lapkov', 'email': 'nikita.lapkov@mongodb.com', 'username': 'laplab'}\n<p>Message: Revert \"<a href=\"https://jira.mongodb.org/browse/SERVER-59765\" title=\"$dateAdd/$dateSubtract do not detect an overflow for time units of years/months/days\" class=\"issue-link\" data-issue-key=\"SERVER-59765\"><del>SERVER-59765</del></a> Improved 'amount' parameter validation for $dateAdd/$dateSubtract\"</p>\n\n<p>This reverts commit ec56b7edb4ffdee862df4b18c11690151253dde3.<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/6d2d8a296b9e1dcb14c0e794f6d3c7f492a883fe\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/6d2d8a296b9e1dcb14c0e794f6d3c7f492a883fe</a></p>"
        },
        {
          "id": "4047848",
          "author": "xgen-internal-githook",
          "created": "Thu, 9 Sep 2021 16:29:51 +0000",
          "content": "<p>Author:</p>\n{'name': 'Mindaugas Malinauskas', 'email': 'mindaugas.malinauskas@mongodb.com'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59765\" title=\"$dateAdd/$dateSubtract do not detect an overflow for time units of years/months/days\" class=\"issue-link\" data-issue-key=\"SERVER-59765\"><del>SERVER-59765</del></a> Improved 'amount' parameter validation for $dateAdd/$dateSubtract<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/f369292c627896fac3b7542974fd12bc509aef7c\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/f369292c627896fac3b7542974fd12bc509aef7c</a></p>"
        },
        {
          "id": "4075064",
          "author": "xgen-internal-githook",
          "created": "Tue, 21 Sep 2021 17:49:06 +0000",
          "content": "<p>Author:</p>\n{'name': 'Mindaugas Malinauskas', 'email': 'mindaugas.malinauskas@mongodb.com'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59765\" title=\"$dateAdd/$dateSubtract do not detect an overflow for time units of years/months/days\" class=\"issue-link\" data-issue-key=\"SERVER-59765\"><del>SERVER-59765</del></a> Improved 'amount' parameter validation for $dateAdd/$dateSubtract</p>\n\n<p>(cherry picked from commit f369292c627896fac3b7542974fd12bc509aef7c)<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/c77a6cc4a64b894c59f7a06f6368c45f93a18396\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/c77a6cc4a64b894c59f7a06f6368c45f93a18396</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by",
            "issuelink": {
              "issuekey": {
                "id": "1870341",
                "content": "COMPASS-5078"
              }
            }
          }
        },
        {
          "id": "10320",
          "name": "Documented",
          "inwardlinks": {
            "description": "is documented by",
            "issuelink": {
              "issuekey": {
                "id": "1870338",
                "content": "DOCS-14781"
              }
            }
          }
        },
        {
          "id": "10012",
          "name": "Related",
          "inwardlinks": {
            "description": "is related to"
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "4.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10011",
              "content": "Minor Change"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 6 Sep 2021 09:01:23 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        2 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17052",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:textarea",
          "customfieldname": "Downstream Changes Summary",
          "customfieldvalues": {
            "customfieldvalue": "Tightened $dateAdd/$dateAdd overflow detection - on any &#39;amount&#39; and &#39;unit&#39; values the expressions now either return a correct result or an error, if the expression result is not representable as a date (the result absolute value is too large to fit into the Date type)."
          }
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16942",
              "content": "Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "mindaugas.malinauskas"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            2 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "136.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "mindaugas.malinauskas"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i00du7:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i00tvb:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "4717",
                "content": "QE 2021-09-06"
              },
              {
                "id": "4719",
                "content": "QE 2021-09-20"
              }
            ]
          }
        },
        {
          "id": "customfield_17051",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Teams Impacted",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "key": "16943",
                "content": "Cloud"
              },
              {
                "key": "16944",
                "content": "Docs"
              },
              {
                "key": "16945",
                "content": "Drivers"
              },
              {
                "key": "20958",
                "content": "ET: Atlas Data Lake"
              },
              {
                "key": "20960",
                "content": "ET: Compass/DevTools"
              },
              {
                "key": "20961",
                "content": "ET: Translators and Connectors"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|hzzzzj:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-59903] Do not wipe out renamed tags upon resuming the rename of sharded metadata",
    "link": "https://jira.mongodb.org/browse/SERVER-59903",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>The updatesTag function is <a href=\"https://github.com/mongodb/mongo/blob/249eb6dcf0d315cd0b8a625289bac79d2529edd2/src/mongo/db/s/sharding_ddl_util.cpp#L67\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">renaming the tags</a> from the source to the target collection. This means that if a stepdown happens right after <a href=\"https://github.com/mongodb/mongo/blob/249eb6dcf0d315cd0b8a625289bac79d2529edd2/src/mongo/db/s/sharding_ddl_util.cpp#L306\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">this call</a>, the next time the operation will be resumed tags will be <a href=\"https://github.com/mongodb/mongo/blob/249eb6dcf0d315cd0b8a625289bac79d2529edd2/src/mongo/db/s/sharding_ddl_util.cpp#L298-L299\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">wiped out</a>.</p>\n\n<p>The <a href=\"https://github.com/mongodb/mongo/blob/249eb6dcf0d315cd0b8a625289bac79d2529edd2/src/mongo/db/s/sharding_ddl_util.cpp#L298-L299\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">removeTagsMetadataFromConfig_notIdempotent call</a> is not needed at all. Due to the original design of the rename operation, there is no need to delete the target collection tags since the rename will result in an <a href=\"https://github.com/mongodb/mongo/blob/249eb6dcf0d315cd0b8a625289bac79d2529edd2/src/mongo/db/s/rename_collection_coordinator.cpp#L215-L216\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">early failure</a> in case the target collection <a href=\"https://github.com/mongodb/mongo/blob/249eb6dcf0d315cd0b8a625289bac79d2529edd2/src/mongo/db/s/sharding_ddl_util.cpp#L356-L359\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">has tags</a>.</p>",
    "environment": "",
    "key": {
      "id": "1872453",
      "content": "SERVER-59903"
    },
    "summary": "Do not wipe out renamed tags upon resuming the rename of sharded metadata",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": "",
    "created": "Mon, 13 Sep 2021 10:29:57 +0000",
    "updated": "Tue, 21 Sep 2021 14:05:23 +0000",
    "resolved": "Mon, 13 Sep 2021 12:43:01 +0000",
    "version": [
      "5.1.0",
      "5.0.2"
    ],
    "fixVersion": [
      "5.1.0",
      "5.0.4"
    ],
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": [
        {
          "id": "4052899",
          "author": "xgen-internal-githook",
          "created": "Mon, 13 Sep 2021 12:41:26 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59903\" title=\"Do not wipe out renamed tags upon resuming the rename of sharded metadata\" class=\"issue-link\" data-issue-key=\"SERVER-59903\"><del>SERVER-59903</del></a> Do not wipe out renamed tags on resuming the rename of sharded metadata<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/bc2fc224f1b174c92766fa9b7d8cb4022e7e19ab\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/bc2fc224f1b174c92766fa9b7d8cb4022e7e19ab</a></p>"
        },
        {
          "id": "4074196",
          "author": "xgen-internal-githook",
          "created": "Tue, 21 Sep 2021 13:54:24 +0000",
          "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-59903\" title=\"Do not wipe out renamed tags upon resuming the rename of sharded metadata\" class=\"issue-link\" data-issue-key=\"SERVER-59903\"><del>SERVER-59903</del></a> Do not wipe out renamed tags on resuming the rename of sharded metadata<br/>\nBranch: v5.0<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/62e9f17cf69cbf90a12bbba63b9dc867a684a2a8\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/62e9f17cf69cbf90a12bbba63b9dc867a684a2a8</a></p>"
        }
      ]
    },
    "issuelinks": {
      "issuelinktype": [
        {
          "id": "10420",
          "name": "Backports",
          "outwardlinks": {
            "description": "backported by"
          }
        },
        {
          "id": "10011",
          "name": "Depends",
          "inwardlinks": {
            "description": "is depended on by"
          }
        },
        {
          "id": "10520",
          "name": "Problem/Incident",
          "inwardlinks": {
            "description": "is caused by",
            "issuelink": {
              "issuekey": {
                "id": "1701319",
                "content": "SERVER-56648"
              }
            }
          }
        }
      ]
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_12450",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",
          "customfieldname": "Backport Requested",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "21777",
              "content": "v5.0"
            }
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 13 Sep 2021 10:46:52 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "dbeng-pm-bot"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "133.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i01bon:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i01rgf:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5181",
              "content": "Sharding EMEA 2021-09-20"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|i00xtz:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-60008] Disable the distributed lock ping thread in lagged_config_secondary.js",
    "link": "https://jira.mongodb.org/browse/SERVER-60008",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>If the distributed lock pinger runs afterÂ <a href=\"https://github.com/mongodb/mongo/blob/a5f28efa4e148a99a7b271aed0e5143c4a092614/jstests/sharding/lagged_config_secondary.js#L46\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">stopping replication</a> and before <a href=\"https://github.com/mongodb/mongo/blob/a5f28efa4e148a99a7b271aed0e5143c4a092614/jstests/sharding/lagged_config_secondary.js#L49\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">the insert into the config database</a>, the optime will be bumped and the insert will hang waiting for the higher optime to be replicated. This has happened on slower variants causing the test to timeout. We should disable the dist lock manager similar to what is done in <a href=\"https://github.com/mongodb/mongo/blob/a5f28efa4e148a99a7b271aed0e5143c4a092614/jstests/noPassthrough/readConcern_atClusterTime_noop_write.js#L38\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">readConcern_atClusterTime_noop_write.js</a></p>",
    "environment": "",
    "key": {
      "id": "1875945",
      "content": "SERVER-60008"
    },
    "summary": "Disable the distributed lock ping thread in lagged_config_secondary.js",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "allison.easton",
      "content": "Allison Easton"
    },
    "reporter": {
      "username": "allison.easton",
      "content": "Allison Easton"
    },
    "labels": "",
    "created": "Thu, 16 Sep 2021 09:17:22 +0000",
    "updated": "Fri, 17 Sep 2021 08:26:49 +0000",
    "resolved": "Fri, 17 Sep 2021 08:26:49 +0000",
    "version": "5.1.0",
    "fixVersion": "5.1.0",
    "component": "Sharding",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": {
        "id": "4067794",
        "author": "xgen-internal-githook",
        "created": "Fri, 17 Sep 2021 08:22:56 +0000",
        "content": "<p>Author:</p>\n{'name': 'Allison Easton', 'email': 'allison.easton@mongodb.com', 'username': 'allisoneaston'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-60008\" title=\"Disable the distributed lock ping thread in lagged_config_secondary.js\" class=\"issue-link\" data-issue-key=\"SERVER-60008\"><del>SERVER-60008</del></a> Disable the distributed lock ping thread in lagged_config_secondary.js<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/f508575e0a4f72979247176c279c5497da0a260a\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/f508575e0a4f72979247176c279c5497da0a260a</a></p>"
      }
    },
    "issuelinks": {
      "issuelinktype": {
        "id": "10011",
        "name": "Depends",
        "inwardlinks": {
          "description": "is depended on by"
        }
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Fri, 17 Sep 2021 07:26:28 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        1 week ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "allison.easton"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            1 week ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "28.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "allison.easton",
              "xgen-internal-githook"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i01w4n:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|hz6jsk:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": {
              "id": "5181",
              "content": "Sharding EMEA 2021-09-20"
            }
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|i01i9z:"
          }
        }
      ]
    }
  },
  {
    "title": "[SERVER-60075] Check for autoSplitVector response status in case of mixed binaries",
    "link": "https://jira.mongodb.org/browse/SERVER-60075",
    "project": {
      "id": "10000",
      "key": "SERVER",
      "content": "Core Server"
    },
    "description": "<p>A command run through <a href=\"https://github.com/mongodb/mongo/blob/9ebd09c6c8c504fc68b0cdad67a06aec52d71576/src/mongo/s/client/shard_remote.cpp#L193\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">ShardRemote::_runCommand</a> returns an \"OK\" <tt>StatusWith</tt> even when the response it encloses contains an error.</p>\n\n<p><a href=\"https://github.com/mongodb/mongo/blob/9ebd09c6c8c504fc68b0cdad67a06aec52d71576/src/mongo/s/shard_util.cpp#L121\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">This check</a> needs to be adapted accordingly in order to properly handle the fallback mode in case of mixed binaries.</p>\n",
    "environment": "",
    "key": {
      "id": "1878354",
      "content": "SERVER-60075"
    },
    "summary": "Check for autoSplitVector response status in case of mixed binaries",
    "type": {
      "id": "1",
      "iconUrl": "https://jira.mongodb.org/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype",
      "content": "Bug"
    },
    "priority": {
      "id": "3",
      "iconUrl": "https://jira.mongodb.org/images/icons/priorities/major.svg",
      "content": "Major - P3"
    },
    "status": {
      "id": "6",
      "iconUrl": "https://jira.mongodb.org/images/icons/statuses/closed.png",
      "description": "The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.",
      "content": "Closed"
    },
    "statusCategory": {
      "id": "3",
      "key": "done",
      "colorName": "green"
    },
    "resolution": {
      "id": "1",
      "content": "Fixed"
    },
    "assignee": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "reporter": {
      "username": "pierlauro.sciarelli",
      "content": "Pierlauro Sciarelli"
    },
    "labels": "",
    "created": "Mon, 20 Sep 2021 13:46:20 +0000",
    "updated": "Mon, 20 Sep 2021 19:33:07 +0000",
    "resolved": "Mon, 20 Sep 2021 19:33:07 +0000",
    "version": "5.1.0",
    "fixVersion": "5.1 Required",
    "votes": "0",
    "watches": "1",
    "comments": {
      "comment": {
        "id": "4072339",
        "author": "xgen-internal-githook",
        "created": "Mon, 20 Sep 2021 18:54:51 +0000",
        "content": "<p>Author:</p>\n{'name': 'Pierlauro Sciarelli', 'email': 'pierlauro.sciarelli@mongodb.com', 'username': 'pierlauro'}\n<p>Message: <a href=\"https://jira.mongodb.org/browse/SERVER-60075\" title=\"Check for autoSplitVector response status in case of mixed binaries\" class=\"issue-link\" data-issue-key=\"SERVER-60075\"><del>SERVER-60075</del></a> Check for autoSplitVector response status in case of mixed binaries<br/>\nBranch: master<br/>\n<a href=\"https://github.com/mongodb/mongo/commit/e87d59a016dc31e1b17966876e196c36a801fd7a\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mongodb/mongo/commit/e87d59a016dc31e1b17966876e196c36a801fd7a</a></p>"
      }
    },
    "issuelinks": {
      "issuelinktype": {
        "id": "10011",
        "name": "Depends",
        "inwardlinks": {
          "description": "is depended on by"
        }
      }
    },
    "attachments": "",
    "subtasks": "",
    "customfields": {
      "customfield": [
        {
          "id": "customfield_10050",
          "key": "com.atlassian.jira.toolkit:comments",
          "customfieldname": "# Replies",
          "customfieldvalues": {
            "customfieldvalue": "1.0"
          }
        },
        {
          "id": "customfield_18555",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "# of Sprints",
          "customfieldvalues": {
            "customfieldvalue": "2.0"
          }
        },
        {
          "id": "customfield_10011",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Backwards Compatibility",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10038",
              "content": "Fully Compatible"
            }
          }
        },
        {
          "id": "customfield_10055",
          "key": "com.atlassian.jira.ext.charting:firstresponsedate",
          "customfieldname": "Date of 1st Reply",
          "customfieldvalues": {
            "customfieldvalue": "Mon, 20 Sep 2021 14:50:07 +0000"
          }
        },
        {
          "id": "customfield_10052",
          "key": "com.atlassian.jira.toolkit:dayslastcommented",
          "customfieldname": "Days since reply",
          "customfieldvalues": "\n                                        3 days ago\n    \n                        "
        },
        {
          "id": "customfield_18254",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Dependencies",
          "customfieldvalues": {
            "customfieldvalue": ""
          }
        },
        {
          "id": "customfield_15850",
          "key": "com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary",
          "customfieldname": "Development",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_17050",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",
          "customfieldname": "Downstream Team Attention",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "16941",
              "content": "Not Needed"
            }
          }
        },
        {
          "id": "customfield_10057",
          "key": "com.atlassian.jira.toolkit:lastusercommented",
          "customfieldname": "Last comment by Customer",
          "customfieldvalues": {
            "customfieldvalue": "true"
          }
        },
        {
          "id": "customfield_10056",
          "key": "com.atlassian.jira.toolkit:lastupdaterorcommenter",
          "customfieldname": "Last commenter",
          "customfieldvalues": {
            "customfieldvalue": "pierlauro.sciarelli"
          }
        },
        {
          "id": "customfield_11151",
          "key": "com.atlassian.jira.toolkit:LastCommentDate",
          "customfieldname": "Last public comment date",
          "customfieldvalues": "\n                            3 days ago\n                        "
        },
        {
          "id": "customfield_16465",
          "key": "com.onresolve.jira.groovy.groovyrunner:scripted-field",
          "customfieldname": "Linked BF Score",
          "customfieldvalues": {
            "customfieldvalue": "160.0"
          }
        },
        {
          "id": "customfield_10032",
          "key": "com.atlassian.jira.plugin.system.customfieldtypes:select",
          "customfieldname": "Operating System",
          "customfieldvalues": {
            "customfieldvalue": {
              "key": "10026",
              "content": "ALL"
            }
          }
        },
        {
          "id": "customfield_10051",
          "key": "com.atlassian.jira.toolkit:participants",
          "customfieldname": "Participants",
          "customfieldvalues": {
            "customfieldvalue": [
              "xgen-internal-githook",
              "pierlauro.sciarelli"
            ]
          }
        },
        {
          "id": "customfield_14254",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Product Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i02ayv:"
          }
        },
        {
          "id": "customfield_12550",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "Rank",
          "customfieldvalues": {
            "customfieldvalue": "1|i02qev:"
          }
        },
        {
          "id": "customfield_10558",
          "key": "com.pyxis.greenhopper.jira:gh-global-rank",
          "customfieldname": "Rank (Obsolete)",
          "customfieldvalues": {
            "customfieldvalue": "9223372036854775807"
          }
        },
        {
          "id": "customfield_10557",
          "key": "com.pyxis.greenhopper.jira:gh-sprint",
          "customfieldname": "Sprint",
          "customfieldvalues": {
            "customfieldvalue": [
              {
                "id": "5181",
                "content": "Sharding EMEA 2021-09-20"
              },
              {
                "id": "5304",
                "content": "Sharding EMEA 2021-10-04"
              }
            ]
          }
        },
        {
          "id": "customfield_10053",
          "key": "com.atlassian.jira.ext.charting:timeinstatus",
          "customfieldname": "Time In Status",
          "customfieldvalues": ""
        },
        {
          "id": "customfield_14350",
          "key": "com.pyxis.greenhopper.jira:gh-lexo-rank",
          "customfieldname": "serverRank",
          "customfieldvalues": {
            "customfieldvalue": "1|i01x47:"
          }
        }
      ]
    }
  }
]
